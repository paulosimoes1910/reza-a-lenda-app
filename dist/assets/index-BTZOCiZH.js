(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function gC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aw={exports:{}},uh={},lw={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tl=Symbol.for("react.element"),_C=Symbol.for("react.portal"),yC=Symbol.for("react.fragment"),vC=Symbol.for("react.strict_mode"),wC=Symbol.for("react.profiler"),TC=Symbol.for("react.provider"),EC=Symbol.for("react.context"),IC=Symbol.for("react.forward_ref"),SC=Symbol.for("react.suspense"),CC=Symbol.for("react.memo"),AC=Symbol.for("react.lazy"),dy=Symbol.iterator;function kC(t){return t===null||typeof t!="object"?null:(t=dy&&t[dy]||t["@@iterator"],typeof t=="function"?t:null)}var uw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cw=Object.assign,hw={};function Oo(t,e,n){this.props=t,this.context=e,this.refs=hw,this.updater=n||uw}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dw(){}dw.prototype=Oo.prototype;function Hp(t,e,n){this.props=t,this.context=e,this.refs=hw,this.updater=n||uw}var Gp=Hp.prototype=new dw;Gp.constructor=Hp;cw(Gp,Oo.prototype);Gp.isPureReactComponent=!0;var fy=Array.isArray,fw=Object.prototype.hasOwnProperty,Kp={current:null},pw={key:!0,ref:!0,__self:!0,__source:!0};function mw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)fw.call(e,r)&&!pw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Tl,type:t,key:i,ref:o,props:s,_owner:Kp.current}}function xC(t,e){return{$$typeof:Tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tl}function RC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var py=/\/+/g;function Rd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?RC(""+t.key):e.toString(36)}function zu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tl:case _C:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Rd(o,0):r,fy(s)?(n="",t!=null&&(n=t.replace(py,"$&/")+"/"),zu(s,e,n,"",function(c){return c})):s!=null&&(Qp(s)&&(s=xC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(py,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",fy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Rd(i,a);o+=zu(i,e,n,l,s)}else if(l=kC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Rd(i,a++),o+=zu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mu(t,e,n){if(t==null)return t;var r=[],s=0;return zu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function NC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},Wu={transition:null},PC={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Wu,ReactCurrentOwner:Kp};function gw(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:mu,forEach:function(t,e,n){mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mu(t,function(){e++}),e},toArray:function(t){return mu(t,function(e){return e})||[]},only:function(t){if(!Qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Oo;de.Fragment=yC;de.Profiler=wC;de.PureComponent=Hp;de.StrictMode=vC;de.Suspense=SC;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PC;de.act=gw;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Kp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fw.call(e,l)&&!pw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Tl,type:t.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:EC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TC,_context:t},t.Consumer=t};de.createElement=mw;de.createFactory=function(t){var e=mw.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:IC,render:t}};de.isValidElement=Qp;de.lazy=function(t){return{$$typeof:AC,_payload:{_status:-1,_result:t},_init:NC}};de.memo=function(t,e){return{$$typeof:CC,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Wu.transition;Wu.transition={};try{t()}finally{Wu.transition=e}};de.unstable_act=gw;de.useCallback=function(t,e){return Ht.current.useCallback(t,e)};de.useContext=function(t){return Ht.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};de.useEffect=function(t,e){return Ht.current.useEffect(t,e)};de.useId=function(){return Ht.current.useId()};de.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Ht.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};de.useRef=function(t){return Ht.current.useRef(t)};de.useState=function(t){return Ht.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Ht.current.useTransition()};de.version="18.3.1";lw.exports=de;var X=lw.exports;const bC=gC(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC=X,DC=Symbol.for("react.element"),MC=Symbol.for("react.fragment"),VC=Object.prototype.hasOwnProperty,LC=OC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FC={key:!0,ref:!0,__self:!0,__source:!0};function _w(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VC.call(e,r)&&!FC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:DC,type:t,key:i,ref:o,props:s,_owner:LC.current}}uh.Fragment=MC;uh.jsx=_w;uh.jsxs=_w;aw.exports=uh;var x=aw.exports,gf={},yw={exports:{}},mn={},vw={exports:{}},ww={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,U){var z=F.length;F.push(U);e:for(;0<z;){var H=z-1>>>1,ee=F[H];if(0<s(ee,U))F[H]=U,F[z]=ee,z=H;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],z=F.pop();if(z!==U){F[0]=z;e:for(var H=0,ee=F.length,me=ee>>>1;H<me;){var Be=2*(H+1)-1,ie=F[Be],_e=Be+1,Pe=F[_e];if(0>s(ie,z))_e<ee&&0>s(Pe,ie)?(F[H]=Pe,F[_e]=z,H=_e):(F[H]=ie,F[Be]=z,H=Be);else if(_e<ee&&0>s(Pe,z))F[H]=Pe,F[_e]=z,H=_e;else break e}}return U}function s(F,U){var z=F.sortIndex-U.sortIndex;return z!==0?z:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(F){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=F)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function O(F){if(w=!1,I(F),!y)if(n(l)!==null)y=!0,Q(N);else{var U=n(c);U!==null&&K(O,U.startTime-F)}}function N(F,U){y=!1,w&&(w=!1,v(_),_=-1),g=!0;var z=p;try{for(I(U),d=n(l);d!==null&&(!(d.expirationTime>U)||F&&!P());){var H=d.callback;if(typeof H=="function"){d.callback=null,p=d.priorityLevel;var ee=H(d.expirationTime<=U);U=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&r(l),I(U)}else r(l);d=n(l)}if(d!==null)var me=!0;else{var Be=n(c);Be!==null&&K(O,Be.startTime-U),me=!1}return me}finally{d=null,p=z,g=!1}}var D=!1,E=null,_=-1,S=5,A=-1;function P(){return!(t.unstable_now()-A<S)}function b(){if(E!==null){var F=t.unstable_now();A=F;var U=!0;try{U=E(!0,F)}finally{U?R():(D=!1,E=null)}}else D=!1}var R;if(typeof T=="function")R=function(){T(b)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Z=q.port2;q.port1.onmessage=b,R=function(){Z.postMessage(null)}}else R=function(){C(b,0)};function Q(F){E=F,D||(D=!0,R())}function K(F,U){_=C(function(){F(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Q(N))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var z=p;p=U;try{return F()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=p;p=F;try{return U()}finally{p=z}},t.unstable_scheduleCallback=function(F,U,z){var H=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,F){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=z+ee,F={id:h++,callback:U,priorityLevel:F,startTime:z,expirationTime:ee,sortIndex:-1},z>H?(F.sortIndex=z,e(c,F),n(l)===null&&F===n(c)&&(w?(v(_),_=-1):w=!0,K(O,z-H))):(F.sortIndex=ee,e(l,F),y||g||(y=!0,Q(N))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var U=p;return function(){var z=p;p=U;try{return F.apply(this,arguments)}finally{p=z}}}})(ww);vw.exports=ww;var jC=vw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC=X,fn=jC;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tw=new Set,qa={};function _i(t,e){lo(t,e),lo(t+"Capture",e)}function lo(t,e){for(qa[t]=e,t=0;t<e.length;t++)Tw.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_f=Object.prototype.hasOwnProperty,BC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,my={},gy={};function zC(t){return _f.call(gy,t)?!0:_f.call(my,t)?!1:BC.test(t)?gy[t]=!0:(my[t]=!0,!1)}function WC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qC(t,e,n,r){if(e===null||typeof e>"u"||WC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yp=/[\-:]([a-z])/g;function Xp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yp,Xp);St[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yp,Xp);St[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yp,Xp);St[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jp(t,e,n,r){var s=St.hasOwnProperty(e)?St[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qC(e,n,s,r)&&(n=null),r||s===null?zC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vr=UC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gu=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),yf=Symbol.for("react.profiler"),Ew=Symbol.for("react.provider"),Iw=Symbol.for("react.context"),em=Symbol.for("react.forward_ref"),vf=Symbol.for("react.suspense"),wf=Symbol.for("react.suspense_list"),tm=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),Sw=Symbol.for("react.offscreen"),_y=Symbol.iterator;function ca(t){return t===null||typeof t!="object"?null:(t=_y&&t[_y]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,Nd;function va(t){if(Nd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nd=e&&e[1]||""}return`
`+Nd+t}var Pd=!1;function bd(t,e){if(!t||Pd)return"";Pd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?va(t):""}function $C(t){switch(t.tag){case 5:return va(t.type);case 16:return va("Lazy");case 13:return va("Suspense");case 19:return va("SuspenseList");case 0:case 2:case 15:return t=bd(t.type,!1),t;case 11:return t=bd(t.type.render,!1),t;case 1:return t=bd(t.type,!0),t;default:return""}}function Tf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mi:return"Fragment";case Di:return"Portal";case yf:return"Profiler";case Zp:return"StrictMode";case vf:return"Suspense";case wf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Iw:return(t.displayName||"Context")+".Consumer";case Ew:return(t._context.displayName||"Context")+".Provider";case em:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tm:return e=t.displayName||null,e!==null?e:Tf(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return Tf(t(e))}catch{}}return null}function HC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tf(e);case 8:return e===Zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GC(t){var e=Cw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _u(t){t._valueTracker||(t._valueTracker=GC(t))}function Aw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Cw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ef(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kw(t,e){e=e.checked,e!=null&&Jp(t,"checked",e,!1)}function If(t,e){kw(t,e);var n=vs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sf(t,e.type,vs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sf(t,e,n){(e!=="number"||hc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wa=Array.isArray;function Yi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Cf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(wa(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vs(n)}}function xw(t,e){var n=vs(e.value),r=vs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ty(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Af(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yu,Nw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yu=yu||document.createElement("div"),yu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KC=["Webkit","ms","Moz","O"];Object.keys(Ra).forEach(function(t){KC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ra[e]=Ra[t]})});function Pw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ra.hasOwnProperty(t)&&Ra[t]?(""+e).trim():e+"px"}function bw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Pw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var QC=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kf(t,e){if(e){if(QC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function xf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rf=null;function nm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nf=null,Xi=null,Ji=null;function Ey(t){if(t=Sl(t)){if(typeof Nf!="function")throw Error(B(280));var e=t.stateNode;e&&(e=ph(e),Nf(t.stateNode,t.type,e))}}function Ow(t){Xi?Ji?Ji.push(t):Ji=[t]:Xi=t}function Dw(){if(Xi){var t=Xi,e=Ji;if(Ji=Xi=null,Ey(t),e)for(t=0;t<e.length;t++)Ey(e[t])}}function Mw(t,e){return t(e)}function Vw(){}var Od=!1;function Lw(t,e,n){if(Od)return t(e,n);Od=!0;try{return Mw(t,e,n)}finally{Od=!1,(Xi!==null||Ji!==null)&&(Vw(),Dw())}}function Ha(t,e){var n=t.stateNode;if(n===null)return null;var r=ph(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Pf=!1;if(kr)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{Pf=!1}function YC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Na=!1,dc=null,fc=!1,bf=null,XC={onError:function(t){Na=!0,dc=t}};function JC(t,e,n,r,s,i,o,a,l){Na=!1,dc=null,YC.apply(XC,arguments)}function ZC(t,e,n,r,s,i,o,a,l){if(JC.apply(this,arguments),Na){if(Na){var c=dc;Na=!1,dc=null}else throw Error(B(198));fc||(fc=!0,bf=c)}}function yi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Iy(t){if(yi(t)!==t)throw Error(B(188))}function eA(t){var e=t.alternate;if(!e){if(e=yi(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Iy(s),t;if(i===r)return Iy(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function jw(t){return t=eA(t),t!==null?Uw(t):null}function Uw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Uw(t);if(e!==null)return e;t=t.sibling}return null}var Bw=fn.unstable_scheduleCallback,Sy=fn.unstable_cancelCallback,tA=fn.unstable_shouldYield,nA=fn.unstable_requestPaint,Ze=fn.unstable_now,rA=fn.unstable_getCurrentPriorityLevel,rm=fn.unstable_ImmediatePriority,zw=fn.unstable_UserBlockingPriority,pc=fn.unstable_NormalPriority,sA=fn.unstable_LowPriority,Ww=fn.unstable_IdlePriority,ch=null,tr=null;function iA(t){if(tr&&typeof tr.onCommitFiberRoot=="function")try{tr.onCommitFiberRoot(ch,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:lA,oA=Math.log,aA=Math.LN2;function lA(t){return t>>>=0,t===0?32:31-(oA(t)/aA|0)|0}var vu=64,wu=4194304;function Ta(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ta(a):(i&=o,i!==0&&(r=Ta(i)))}else o=n&~s,o!==0?r=Ta(o):i!==0&&(r=Ta(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ln(e),s=1<<n,r|=t[n],e&=~s;return r}function uA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ln(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=uA(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Of(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qw(){var t=vu;return vu<<=1,!(vu&4194240)&&(vu=64),t}function Dd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function El(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function hA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function $w(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hw,im,Gw,Kw,Qw,Df=!1,Tu=[],is=null,os=null,as=null,Ga=new Map,Ka=new Map,Yr=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cy(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(e.pointerId)}}function da(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Sl(e),e!==null&&im(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function fA(t,e,n,r,s){switch(e){case"focusin":return is=da(is,t,e,n,r,s),!0;case"dragenter":return os=da(os,t,e,n,r,s),!0;case"mouseover":return as=da(as,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ga.set(i,da(Ga.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ka.set(i,da(Ka.get(i)||null,t,e,n,r,s)),!0}return!1}function Yw(t){var e=Gs(t.target);if(e!==null){var n=yi(e);if(n!==null){if(e=n.tag,e===13){if(e=Fw(n),e!==null){t.blockedOn=e,Qw(t.priority,function(){Gw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rf=r,n.target.dispatchEvent(r),Rf=null}else return e=Sl(n),e!==null&&im(e),t.blockedOn=n,!1;e.shift()}return!0}function Ay(t,e,n){qu(t)&&n.delete(e)}function pA(){Df=!1,is!==null&&qu(is)&&(is=null),os!==null&&qu(os)&&(os=null),as!==null&&qu(as)&&(as=null),Ga.forEach(Ay),Ka.forEach(Ay)}function fa(t,e){t.blockedOn===e&&(t.blockedOn=null,Df||(Df=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,pA)))}function Qa(t){function e(s){return fa(s,t)}if(0<Tu.length){fa(Tu[0],t);for(var n=1;n<Tu.length;n++){var r=Tu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(is!==null&&fa(is,t),os!==null&&fa(os,t),as!==null&&fa(as,t),Ga.forEach(e),Ka.forEach(e),n=0;n<Yr.length;n++)r=Yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yr.length&&(n=Yr[0],n.blockedOn===null);)Yw(n),n.blockedOn===null&&Yr.shift()}var Zi=Vr.ReactCurrentBatchConfig,gc=!0;function mA(t,e,n,r){var s=Ie,i=Zi.transition;Zi.transition=null;try{Ie=1,om(t,e,n,r)}finally{Ie=s,Zi.transition=i}}function gA(t,e,n,r){var s=Ie,i=Zi.transition;Zi.transition=null;try{Ie=4,om(t,e,n,r)}finally{Ie=s,Zi.transition=i}}function om(t,e,n,r){if(gc){var s=Mf(t,e,n,r);if(s===null)qd(t,e,r,_c,n),Cy(t,r);else if(fA(s,t,e,n,r))r.stopPropagation();else if(Cy(t,r),e&4&&-1<dA.indexOf(t)){for(;s!==null;){var i=Sl(s);if(i!==null&&Hw(i),i=Mf(t,e,n,r),i===null&&qd(t,e,r,_c,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qd(t,e,r,null,n)}}var _c=null;function Mf(t,e,n,r){if(_c=null,t=nm(r),t=Gs(t),t!==null)if(e=yi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _c=t,null}function Xw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rA()){case rm:return 1;case zw:return 4;case pc:case sA:return 16;case Ww:return 536870912;default:return 16}default:return 16}}var ns=null,am=null,$u=null;function Jw(){if($u)return $u;var t,e=am,n=e.length,r,s="value"in ns?ns.value:ns.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $u=s.slice(t,1<r?1-r:void 0)}function Hu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Eu(){return!0}function ky(){return!1}function gn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Eu:ky,this.isPropagationStopped=ky,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Eu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Eu)},persist:function(){},isPersistent:Eu}),e}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lm=gn(Do),Il=$e({},Do,{view:0,detail:0}),_A=gn(Il),Md,Vd,pa,hh=$e({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:um,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pa&&(pa&&t.type==="mousemove"?(Md=t.screenX-pa.screenX,Vd=t.screenY-pa.screenY):Vd=Md=0,pa=t),Md)},movementY:function(t){return"movementY"in t?t.movementY:Vd}}),xy=gn(hh),yA=$e({},hh,{dataTransfer:0}),vA=gn(yA),wA=$e({},Il,{relatedTarget:0}),Ld=gn(wA),TA=$e({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),EA=gn(TA),IA=$e({},Do,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SA=gn(IA),CA=$e({},Do,{data:0}),Ry=gn(CA),AA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xA[t])?!!e[t]:!1}function um(){return RA}var NA=$e({},Il,{key:function(t){if(t.key){var e=AA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:um,charCode:function(t){return t.type==="keypress"?Hu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PA=gn(NA),bA=$e({},hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ny=gn(bA),OA=$e({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:um}),DA=gn(OA),MA=$e({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),VA=gn(MA),LA=$e({},hh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FA=gn(LA),jA=[9,13,27,32],cm=kr&&"CompositionEvent"in window,Pa=null;kr&&"documentMode"in document&&(Pa=document.documentMode);var UA=kr&&"TextEvent"in window&&!Pa,Zw=kr&&(!cm||Pa&&8<Pa&&11>=Pa),Py=" ",by=!1;function eT(t,e){switch(t){case"keyup":return jA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vi=!1;function BA(t,e){switch(t){case"compositionend":return tT(e);case"keypress":return e.which!==32?null:(by=!0,Py);case"textInput":return t=e.data,t===Py&&by?null:t;default:return null}}function zA(t,e){if(Vi)return t==="compositionend"||!cm&&eT(t,e)?(t=Jw(),$u=am=ns=null,Vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zw&&e.locale!=="ko"?null:e.data;default:return null}}var WA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WA[t.type]:e==="textarea"}function nT(t,e,n,r){Ow(r),e=yc(e,"onChange"),0<e.length&&(n=new lm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ba=null,Ya=null;function qA(t){fT(t,0)}function dh(t){var e=ji(t);if(Aw(e))return t}function $A(t,e){if(t==="change")return e}var rT=!1;if(kr){var Fd;if(kr){var jd="oninput"in document;if(!jd){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),jd=typeof Dy.oninput=="function"}Fd=jd}else Fd=!1;rT=Fd&&(!document.documentMode||9<document.documentMode)}function My(){ba&&(ba.detachEvent("onpropertychange",sT),Ya=ba=null)}function sT(t){if(t.propertyName==="value"&&dh(Ya)){var e=[];nT(e,Ya,t,nm(t)),Lw(qA,e)}}function HA(t,e,n){t==="focusin"?(My(),ba=e,Ya=n,ba.attachEvent("onpropertychange",sT)):t==="focusout"&&My()}function GA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dh(Ya)}function KA(t,e){if(t==="click")return dh(e)}function QA(t,e){if(t==="input"||t==="change")return dh(e)}function YA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bn=typeof Object.is=="function"?Object.is:YA;function Xa(t,e){if(Bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_f.call(e,s)||!Bn(t[s],e[s]))return!1}return!0}function Vy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ly(t,e){var n=Vy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vy(n)}}function iT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oT(){for(var t=window,e=hc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hc(t.document)}return e}function hm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XA(t){var e=oT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iT(n.ownerDocument.documentElement,n)){if(r!==null&&hm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ly(n,i);var o=Ly(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JA=kr&&"documentMode"in document&&11>=document.documentMode,Li=null,Vf=null,Oa=null,Lf=!1;function Fy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lf||Li==null||Li!==hc(r)||(r=Li,"selectionStart"in r&&hm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oa&&Xa(Oa,r)||(Oa=r,r=yc(Vf,"onSelect"),0<r.length&&(e=new lm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Li)))}function Iu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fi={animationend:Iu("Animation","AnimationEnd"),animationiteration:Iu("Animation","AnimationIteration"),animationstart:Iu("Animation","AnimationStart"),transitionend:Iu("Transition","TransitionEnd")},Ud={},aT={};kr&&(aT=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function fh(t){if(Ud[t])return Ud[t];if(!Fi[t])return t;var e=Fi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aT)return Ud[t]=e[n];return t}var lT=fh("animationend"),uT=fh("animationiteration"),cT=fh("animationstart"),hT=fh("transitionend"),dT=new Map,jy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,e){dT.set(t,e),_i(e,[t])}for(var Bd=0;Bd<jy.length;Bd++){var zd=jy[Bd],ZA=zd.toLowerCase(),ek=zd[0].toUpperCase()+zd.slice(1);xs(ZA,"on"+ek)}xs(lT,"onAnimationEnd");xs(uT,"onAnimationIteration");xs(cT,"onAnimationStart");xs("dblclick","onDoubleClick");xs("focusin","onFocus");xs("focusout","onBlur");xs(hT,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function Uy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ZC(r,e,void 0,t),t.currentTarget=null}function fT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Uy(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Uy(s,a,c),i=l}}}if(fc)throw t=bf,fc=!1,bf=null,t}function De(t,e){var n=e[zf];n===void 0&&(n=e[zf]=new Set);var r=t+"__bubble";n.has(r)||(pT(e,t,2,!1),n.add(r))}function Wd(t,e,n){var r=0;e&&(r|=4),pT(n,t,r,e)}var Su="_reactListening"+Math.random().toString(36).slice(2);function Ja(t){if(!t[Su]){t[Su]=!0,Tw.forEach(function(n){n!=="selectionchange"&&(tk.has(n)||Wd(n,!1,t),Wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Su]||(e[Su]=!0,Wd("selectionchange",!1,e))}}function pT(t,e,n,r){switch(Xw(e)){case 1:var s=mA;break;case 4:s=gA;break;default:s=om}n=s.bind(null,e,n,t),s=void 0,!Pf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Gs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Lw(function(){var c=i,h=nm(n),d=[];e:{var p=dT.get(t);if(p!==void 0){var g=lm,y=t;switch(t){case"keypress":if(Hu(n)===0)break e;case"keydown":case"keyup":g=PA;break;case"focusin":y="focus",g=Ld;break;case"focusout":y="blur",g=Ld;break;case"beforeblur":case"afterblur":g=Ld;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=xy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=vA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=DA;break;case lT:case uT:case cT:g=EA;break;case hT:g=VA;break;case"scroll":g=_A;break;case"wheel":g=FA;break;case"copy":case"cut":case"paste":g=SA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ny}var w=(e&4)!==0,C=!w&&t==="scroll",v=w?p!==null?p+"Capture":null:p;w=[];for(var T=c,I;T!==null;){I=T;var O=I.stateNode;if(I.tag===5&&O!==null&&(I=O,v!==null&&(O=Ha(T,v),O!=null&&w.push(Za(T,O,I)))),C)break;T=T.return}0<w.length&&(p=new g(p,y,null,n,h),d.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Rf&&(y=n.relatedTarget||n.fromElement)&&(Gs(y)||y[xr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?Gs(y):null,y!==null&&(C=yi(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(w=xy,O="onMouseLeave",v="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(w=Ny,O="onPointerLeave",v="onPointerEnter",T="pointer"),C=g==null?p:ji(g),I=y==null?p:ji(y),p=new w(O,T+"leave",g,n,h),p.target=C,p.relatedTarget=I,O=null,Gs(h)===c&&(w=new w(v,T+"enter",y,n,h),w.target=I,w.relatedTarget=C,O=w),C=O,g&&y)t:{for(w=g,v=y,T=0,I=w;I;I=Ri(I))T++;for(I=0,O=v;O;O=Ri(O))I++;for(;0<T-I;)w=Ri(w),T--;for(;0<I-T;)v=Ri(v),I--;for(;T--;){if(w===v||v!==null&&w===v.alternate)break t;w=Ri(w),v=Ri(v)}w=null}else w=null;g!==null&&By(d,p,g,w,!1),y!==null&&C!==null&&By(d,C,y,w,!0)}}e:{if(p=c?ji(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var N=$A;else if(Oy(p))if(rT)N=QA;else{N=GA;var D=HA}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=KA);if(N&&(N=N(t,c))){nT(d,N,n,h);break e}D&&D(t,p,c),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&Sf(p,"number",p.value)}switch(D=c?ji(c):window,t){case"focusin":(Oy(D)||D.contentEditable==="true")&&(Li=D,Vf=c,Oa=null);break;case"focusout":Oa=Vf=Li=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,Fy(d,n,h);break;case"selectionchange":if(JA)break;case"keydown":case"keyup":Fy(d,n,h)}var E;if(cm)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vi?eT(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Zw&&n.locale!=="ko"&&(Vi||_!=="onCompositionStart"?_==="onCompositionEnd"&&Vi&&(E=Jw()):(ns=h,am="value"in ns?ns.value:ns.textContent,Vi=!0)),D=yc(c,_),0<D.length&&(_=new Ry(_,t,null,n,h),d.push({event:_,listeners:D}),E?_.data=E:(E=tT(n),E!==null&&(_.data=E)))),(E=UA?BA(t,n):zA(t,n))&&(c=yc(c,"onBeforeInput"),0<c.length&&(h=new Ry("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=E))}fT(d,e)})}function Za(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ha(t,n),i!=null&&r.unshift(Za(t,i,s)),i=Ha(t,e),i!=null&&r.push(Za(t,i,s))),t=t.return}return r}function Ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function By(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ha(n,i),l!=null&&o.unshift(Za(n,l,a))):s||(l=Ha(n,i),l!=null&&o.push(Za(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nk=/\r\n?/g,rk=/\u0000|\uFFFD/g;function zy(t){return(typeof t=="string"?t:""+t).replace(nk,`
`).replace(rk,"")}function Cu(t,e,n){if(e=zy(e),zy(t)!==e&&n)throw Error(B(425))}function vc(){}var Ff=null,jf=null;function Uf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bf=typeof setTimeout=="function"?setTimeout:void 0,sk=typeof clearTimeout=="function"?clearTimeout:void 0,Wy=typeof Promise=="function"?Promise:void 0,ik=typeof queueMicrotask=="function"?queueMicrotask:typeof Wy<"u"?function(t){return Wy.resolve(null).then(t).catch(ok)}:Bf;function ok(t){setTimeout(function(){throw t})}function $d(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Qa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Qa(e)}function ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Mo,el="__reactProps$"+Mo,xr="__reactContainer$"+Mo,zf="__reactEvents$"+Mo,ak="__reactListeners$"+Mo,lk="__reactHandles$"+Mo;function Gs(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xr]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qy(t);t!==null;){if(n=t[Jn])return n;t=qy(t)}return e}t=n,n=t.parentNode}return null}function Sl(t){return t=t[Jn]||t[xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ji(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function ph(t){return t[el]||null}var Wf=[],Ui=-1;function Rs(t){return{current:t}}function Ve(t){0>Ui||(t.current=Wf[Ui],Wf[Ui]=null,Ui--)}function Re(t,e){Ui++,Wf[Ui]=t.current,t.current=e}var ws={},Vt=Rs(ws),Zt=Rs(!1),ri=ws;function uo(t,e){var n=t.type.contextTypes;if(!n)return ws;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function en(t){return t=t.childContextTypes,t!=null}function wc(){Ve(Zt),Ve(Vt)}function $y(t,e,n){if(Vt.current!==ws)throw Error(B(168));Re(Vt,e),Re(Zt,n)}function mT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,HC(t)||"Unknown",s));return $e({},n,r)}function Tc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ws,ri=Vt.current,Re(Vt,t),Re(Zt,Zt.current),!0}function Hy(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=mT(t,e,ri),r.__reactInternalMemoizedMergedChildContext=t,Ve(Zt),Ve(Vt),Re(Vt,t)):Ve(Zt),Re(Zt,n)}var yr=null,mh=!1,Hd=!1;function gT(t){yr===null?yr=[t]:yr.push(t)}function uk(t){mh=!0,gT(t)}function Ns(){if(!Hd&&yr!==null){Hd=!0;var t=0,e=Ie;try{var n=yr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yr=null,mh=!1}catch(s){throw yr!==null&&(yr=yr.slice(t+1)),Bw(rm,Ns),s}finally{Ie=e,Hd=!1}}return null}var Bi=[],zi=0,Ec=null,Ic=0,yn=[],vn=0,si=null,vr=1,wr="";function qs(t,e){Bi[zi++]=Ic,Bi[zi++]=Ec,Ec=t,Ic=e}function _T(t,e,n){yn[vn++]=vr,yn[vn++]=wr,yn[vn++]=si,si=t;var r=vr;t=wr;var s=32-Ln(r)-1;r&=~(1<<s),n+=1;var i=32-Ln(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,vr=1<<32-Ln(e)+s|n<<s|r,wr=i+t}else vr=1<<i|n<<s|r,wr=t}function dm(t){t.return!==null&&(qs(t,1),_T(t,1,0))}function fm(t){for(;t===Ec;)Ec=Bi[--zi],Bi[zi]=null,Ic=Bi[--zi],Bi[zi]=null;for(;t===si;)si=yn[--vn],yn[vn]=null,wr=yn[--vn],yn[vn]=null,vr=yn[--vn],yn[vn]=null}var dn=null,cn=null,Ue=!1,On=null;function yT(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,cn=ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=si!==null?{id:vr,overflow:wr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,cn=null,!0):!1;default:return!1}}function qf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $f(t){if(Ue){var e=cn;if(e){var n=e;if(!Gy(t,e)){if(qf(t))throw Error(B(418));e=ls(n.nextSibling);var r=dn;e&&Gy(t,e)?yT(r,n):(t.flags=t.flags&-4097|2,Ue=!1,dn=t)}}else{if(qf(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ue=!1,dn=t}}}function Ky(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function Au(t){if(t!==dn)return!1;if(!Ue)return Ky(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uf(t.type,t.memoizedProps)),e&&(e=cn)){if(qf(t))throw vT(),Error(B(418));for(;e;)yT(t,e),e=ls(e.nextSibling)}if(Ky(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){cn=ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}cn=null}}else cn=dn?ls(t.stateNode.nextSibling):null;return!0}function vT(){for(var t=cn;t;)t=ls(t.nextSibling)}function co(){cn=dn=null,Ue=!1}function pm(t){On===null?On=[t]:On.push(t)}var ck=Vr.ReactCurrentBatchConfig;function ma(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function ku(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qy(t){var e=t._init;return e(t._payload)}function wT(t){function e(v,T){if(t){var I=v.deletions;I===null?(v.deletions=[T],v.flags|=16):I.push(T)}}function n(v,T){if(!t)return null;for(;T!==null;)e(v,T),T=T.sibling;return null}function r(v,T){for(v=new Map;T!==null;)T.key!==null?v.set(T.key,T):v.set(T.index,T),T=T.sibling;return v}function s(v,T){return v=ds(v,T),v.index=0,v.sibling=null,v}function i(v,T,I){return v.index=I,t?(I=v.alternate,I!==null?(I=I.index,I<T?(v.flags|=2,T):I):(v.flags|=2,T)):(v.flags|=1048576,T)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,T,I,O){return T===null||T.tag!==6?(T=Zd(I,v.mode,O),T.return=v,T):(T=s(T,I),T.return=v,T)}function l(v,T,I,O){var N=I.type;return N===Mi?h(v,T,I.props.children,O,I.key):T!==null&&(T.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gr&&Qy(N)===T.type)?(O=s(T,I.props),O.ref=ma(v,T,I),O.return=v,O):(O=Zu(I.type,I.key,I.props,null,v.mode,O),O.ref=ma(v,T,I),O.return=v,O)}function c(v,T,I,O){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=ef(I,v.mode,O),T.return=v,T):(T=s(T,I.children||[]),T.return=v,T)}function h(v,T,I,O,N){return T===null||T.tag!==7?(T=Zs(I,v.mode,O,N),T.return=v,T):(T=s(T,I),T.return=v,T)}function d(v,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Zd(""+T,v.mode,I),T.return=v,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case gu:return I=Zu(T.type,T.key,T.props,null,v.mode,I),I.ref=ma(v,null,T),I.return=v,I;case Di:return T=ef(T,v.mode,I),T.return=v,T;case Gr:var O=T._init;return d(v,O(T._payload),I)}if(wa(T)||ca(T))return T=Zs(T,v.mode,I,null),T.return=v,T;ku(v,T)}return null}function p(v,T,I,O){var N=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return N!==null?null:a(v,T,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case gu:return I.key===N?l(v,T,I,O):null;case Di:return I.key===N?c(v,T,I,O):null;case Gr:return N=I._init,p(v,T,N(I._payload),O)}if(wa(I)||ca(I))return N!==null?null:h(v,T,I,O,null);ku(v,I)}return null}function g(v,T,I,O,N){if(typeof O=="string"&&O!==""||typeof O=="number")return v=v.get(I)||null,a(T,v,""+O,N);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case gu:return v=v.get(O.key===null?I:O.key)||null,l(T,v,O,N);case Di:return v=v.get(O.key===null?I:O.key)||null,c(T,v,O,N);case Gr:var D=O._init;return g(v,T,I,D(O._payload),N)}if(wa(O)||ca(O))return v=v.get(I)||null,h(T,v,O,N,null);ku(T,O)}return null}function y(v,T,I,O){for(var N=null,D=null,E=T,_=T=0,S=null;E!==null&&_<I.length;_++){E.index>_?(S=E,E=null):S=E.sibling;var A=p(v,E,I[_],O);if(A===null){E===null&&(E=S);break}t&&E&&A.alternate===null&&e(v,E),T=i(A,T,_),D===null?N=A:D.sibling=A,D=A,E=S}if(_===I.length)return n(v,E),Ue&&qs(v,_),N;if(E===null){for(;_<I.length;_++)E=d(v,I[_],O),E!==null&&(T=i(E,T,_),D===null?N=E:D.sibling=E,D=E);return Ue&&qs(v,_),N}for(E=r(v,E);_<I.length;_++)S=g(E,v,_,I[_],O),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?_:S.key),T=i(S,T,_),D===null?N=S:D.sibling=S,D=S);return t&&E.forEach(function(P){return e(v,P)}),Ue&&qs(v,_),N}function w(v,T,I,O){var N=ca(I);if(typeof N!="function")throw Error(B(150));if(I=N.call(I),I==null)throw Error(B(151));for(var D=N=null,E=T,_=T=0,S=null,A=I.next();E!==null&&!A.done;_++,A=I.next()){E.index>_?(S=E,E=null):S=E.sibling;var P=p(v,E,A.value,O);if(P===null){E===null&&(E=S);break}t&&E&&P.alternate===null&&e(v,E),T=i(P,T,_),D===null?N=P:D.sibling=P,D=P,E=S}if(A.done)return n(v,E),Ue&&qs(v,_),N;if(E===null){for(;!A.done;_++,A=I.next())A=d(v,A.value,O),A!==null&&(T=i(A,T,_),D===null?N=A:D.sibling=A,D=A);return Ue&&qs(v,_),N}for(E=r(v,E);!A.done;_++,A=I.next())A=g(E,v,_,A.value,O),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?_:A.key),T=i(A,T,_),D===null?N=A:D.sibling=A,D=A);return t&&E.forEach(function(b){return e(v,b)}),Ue&&qs(v,_),N}function C(v,T,I,O){if(typeof I=="object"&&I!==null&&I.type===Mi&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case gu:e:{for(var N=I.key,D=T;D!==null;){if(D.key===N){if(N=I.type,N===Mi){if(D.tag===7){n(v,D.sibling),T=s(D,I.props.children),T.return=v,v=T;break e}}else if(D.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gr&&Qy(N)===D.type){n(v,D.sibling),T=s(D,I.props),T.ref=ma(v,D,I),T.return=v,v=T;break e}n(v,D);break}else e(v,D);D=D.sibling}I.type===Mi?(T=Zs(I.props.children,v.mode,O,I.key),T.return=v,v=T):(O=Zu(I.type,I.key,I.props,null,v.mode,O),O.ref=ma(v,T,I),O.return=v,v=O)}return o(v);case Di:e:{for(D=I.key;T!==null;){if(T.key===D)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){n(v,T.sibling),T=s(T,I.children||[]),T.return=v,v=T;break e}else{n(v,T);break}else e(v,T);T=T.sibling}T=ef(I,v.mode,O),T.return=v,v=T}return o(v);case Gr:return D=I._init,C(v,T,D(I._payload),O)}if(wa(I))return y(v,T,I,O);if(ca(I))return w(v,T,I,O);ku(v,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(n(v,T.sibling),T=s(T,I),T.return=v,v=T):(n(v,T),T=Zd(I,v.mode,O),T.return=v,v=T),o(v)):n(v,T)}return C}var ho=wT(!0),TT=wT(!1),Sc=Rs(null),Cc=null,Wi=null,mm=null;function gm(){mm=Wi=Cc=null}function _m(t){var e=Sc.current;Ve(Sc),t._currentValue=e}function Hf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function eo(t,e){Cc=t,mm=Wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jt=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(mm!==t)if(t={context:t,memoizedValue:e,next:null},Wi===null){if(Cc===null)throw Error(B(308));Wi=t,Cc.dependencies={lanes:0,firstContext:t}}else Wi=Wi.next=t;return e}var Ks=null;function ym(t){Ks===null?Ks=[t]:Ks.push(t)}function ET(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ym(e)):(n.next=s.next,s.next=n),e.interleaved=n,Rr(t,r)}function Rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kr=!1;function vm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function us(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Rr(t,n)}return s=r.interleaved,s===null?(e.next=e,ym(r)):(e.next=s.next,s.next=e),r.interleaved=e,Rr(t,n)}function Gu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sm(t,n)}}function Yy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ac(t,e,n,r){var s=t.updateQueue;Kr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(p=e,g=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){d=y.call(g,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,p=typeof y=="function"?y.call(g,d,p):y,p==null)break e;d=$e({},d,p);break e;case 2:Kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);oi|=o,t.lanes=o,t.memoizedState=d}}function Xy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Cl={},nr=Rs(Cl),tl=Rs(Cl),nl=Rs(Cl);function Qs(t){if(t===Cl)throw Error(B(174));return t}function wm(t,e){switch(Re(nl,e),Re(tl,t),Re(nr,Cl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Af(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Af(e,t)}Ve(nr),Re(nr,e)}function fo(){Ve(nr),Ve(tl),Ve(nl)}function ST(t){Qs(nl.current);var e=Qs(nr.current),n=Af(e,t.type);e!==n&&(Re(tl,t),Re(nr,n))}function Tm(t){tl.current===t&&(Ve(nr),Ve(tl))}var We=Rs(0);function kc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gd=[];function Em(){for(var t=0;t<Gd.length;t++)Gd[t]._workInProgressVersionPrimary=null;Gd.length=0}var Ku=Vr.ReactCurrentDispatcher,Kd=Vr.ReactCurrentBatchConfig,ii=0,qe=null,lt=null,pt=null,xc=!1,Da=!1,rl=0,hk=0;function Rt(){throw Error(B(321))}function Im(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bn(t[n],e[n]))return!1;return!0}function Sm(t,e,n,r,s,i){if(ii=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ku.current=t===null||t.memoizedState===null?mk:gk,t=n(r,s),Da){i=0;do{if(Da=!1,rl=0,25<=i)throw Error(B(301));i+=1,pt=lt=null,e.updateQueue=null,Ku.current=_k,t=n(r,s)}while(Da)}if(Ku.current=Rc,e=lt!==null&&lt.next!==null,ii=0,pt=lt=qe=null,xc=!1,e)throw Error(B(300));return t}function Cm(){var t=rl!==0;return rl=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?qe.memoizedState=pt=t:pt=pt.next=t,pt}function kn(){if(lt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=pt===null?qe.memoizedState:pt.next;if(e!==null)pt=e,lt=t;else{if(t===null)throw Error(B(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},pt===null?qe.memoizedState=pt=t:pt=pt.next=t}return pt}function sl(t,e){return typeof e=="function"?e(t):e}function Qd(t){var e=kn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=lt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((ii&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,qe.lanes|=h,oi|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Bn(r,e.memoizedState)||(Jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,qe.lanes|=i,oi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yd(t){var e=kn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Bn(i,e.memoizedState)||(Jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function CT(){}function AT(t,e){var n=qe,r=kn(),s=e(),i=!Bn(r.memoizedState,s);if(i&&(r.memoizedState=s,Jt=!0),r=r.queue,Am(RT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,il(9,xT.bind(null,n,r,s,e),void 0,null),mt===null)throw Error(B(349));ii&30||kT(n,e,s)}return s}function kT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xT(t,e,n,r){e.value=n,e.getSnapshot=r,NT(e)&&PT(t)}function RT(t,e,n){return n(function(){NT(e)&&PT(t)})}function NT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bn(t,n)}catch{return!0}}function PT(t){var e=Rr(t,1);e!==null&&Fn(e,t,1,-1)}function Jy(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:t},e.queue=t,t=t.dispatch=pk.bind(null,qe,t),[e.memoizedState,t]}function il(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bT(){return kn().memoizedState}function Qu(t,e,n,r){var s=Xn();qe.flags|=t,s.memoizedState=il(1|e,n,void 0,r===void 0?null:r)}function gh(t,e,n,r){var s=kn();r=r===void 0?null:r;var i=void 0;if(lt!==null){var o=lt.memoizedState;if(i=o.destroy,r!==null&&Im(r,o.deps)){s.memoizedState=il(e,n,i,r);return}}qe.flags|=t,s.memoizedState=il(1|e,n,i,r)}function Zy(t,e){return Qu(8390656,8,t,e)}function Am(t,e){return gh(2048,8,t,e)}function OT(t,e){return gh(4,2,t,e)}function DT(t,e){return gh(4,4,t,e)}function MT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VT(t,e,n){return n=n!=null?n.concat([t]):null,gh(4,4,MT.bind(null,e,t),n)}function km(){}function LT(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Im(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function FT(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Im(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jT(t,e,n){return ii&21?(Bn(n,e)||(n=qw(),qe.lanes|=n,oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jt=!0),t.memoizedState=n)}function dk(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Kd.transition;Kd.transition={};try{t(!1),e()}finally{Ie=n,Kd.transition=r}}function UT(){return kn().memoizedState}function fk(t,e,n){var r=hs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BT(t))zT(e,n);else if(n=ET(t,e,n,r),n!==null){var s=$t();Fn(n,t,r,s),WT(n,e,r)}}function pk(t,e,n){var r=hs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BT(t))zT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Bn(a,o)){var l=e.interleaved;l===null?(s.next=s,ym(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=ET(t,e,s,r),n!==null&&(s=$t(),Fn(n,t,r,s),WT(n,e,r))}}function BT(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function zT(t,e){Da=xc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sm(t,n)}}var Rc={readContext:An,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},mk={readContext:An,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:Zy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qu(4194308,4,MT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qu(4,2,t,e)},useMemo:function(t,e){var n=Xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fk.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:Jy,useDebugValue:km,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=Jy(!1),e=t[0];return t=dk.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,s=Xn();if(Ue){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),mt===null)throw Error(B(349));ii&30||kT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Zy(RT.bind(null,r,i,t),[t]),r.flags|=2048,il(9,xT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Xn(),e=mt.identifierPrefix;if(Ue){var n=wr,r=vr;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gk={readContext:An,useCallback:LT,useContext:An,useEffect:Am,useImperativeHandle:VT,useInsertionEffect:OT,useLayoutEffect:DT,useMemo:FT,useReducer:Qd,useRef:bT,useState:function(){return Qd(sl)},useDebugValue:km,useDeferredValue:function(t){var e=kn();return jT(e,lt.memoizedState,t)},useTransition:function(){var t=Qd(sl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:AT,useId:UT,unstable_isNewReconciler:!1},_k={readContext:An,useCallback:LT,useContext:An,useEffect:Am,useImperativeHandle:VT,useInsertionEffect:OT,useLayoutEffect:DT,useMemo:FT,useReducer:Yd,useRef:bT,useState:function(){return Yd(sl)},useDebugValue:km,useDeferredValue:function(t){var e=kn();return lt===null?e.memoizedState=t:jT(e,lt.memoizedState,t)},useTransition:function(){var t=Yd(sl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:AT,useId:UT,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _h={isMounted:function(t){return(t=t._reactInternals)?yi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=hs(t),i=Sr(r,s);i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(Fn(e,t,s,r),Gu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=hs(t),i=Sr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(Fn(e,t,s,r),Gu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=hs(t),s=Sr(n,r);s.tag=2,e!=null&&(s.callback=e),e=us(t,s,r),e!==null&&(Fn(e,t,r,n),Gu(e,t,r))}};function ev(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Xa(n,r)||!Xa(s,i):!0}function qT(t,e,n){var r=!1,s=ws,i=e.contextType;return typeof i=="object"&&i!==null?i=An(i):(s=en(e)?ri:Vt.current,r=e.contextTypes,i=(r=r!=null)?uo(t,s):ws),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_h,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function tv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_h.enqueueReplaceState(e,e.state,null)}function Kf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},vm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=An(i):(i=en(e)?ri:Vt.current,s.context=uo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Gf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_h.enqueueReplaceState(s,s.state,null),Ac(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function po(t,e){try{var n="",r=e;do n+=$C(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yk=typeof WeakMap=="function"?WeakMap:Map;function $T(t,e,n){n=Sr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pc||(Pc=!0,ip=r),Qf(t,e)},n}function HT(t,e,n){n=Sr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qf(t,e),typeof r!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function nv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=bk.bind(null,t,e,n),e.then(t,t))}function rv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sr(-1,1),e.tag=2,us(n,e,1))),n.lanes|=1),t)}var vk=Vr.ReactCurrentOwner,Jt=!1;function zt(t,e,n,r){e.child=t===null?TT(e,null,n,r):ho(e,t.child,n,r)}function iv(t,e,n,r,s){n=n.render;var i=e.ref;return eo(e,s),r=Sm(t,e,n,r,i,s),n=Cm(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nr(t,e,s)):(Ue&&n&&dm(e),e.flags|=1,zt(t,e,r,s),e.child)}function ov(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Mm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,GT(t,e,i,r,s)):(t=Zu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xa,n(o,r)&&t.ref===e.ref)return Nr(t,e,s)}return e.flags|=1,t=ds(i,r),t.ref=e.ref,t.return=e,e.child=t}function GT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Xa(i,r)&&t.ref===e.ref)if(Jt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Jt=!0);else return e.lanes=t.lanes,Nr(t,e,s)}return Yf(t,e,n,r,s)}function KT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re($i,ln),ln|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re($i,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re($i,ln),ln|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Re($i,ln),ln|=r;return zt(t,e,s,n),e.child}function QT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yf(t,e,n,r,s){var i=en(n)?ri:Vt.current;return i=uo(e,i),eo(e,s),n=Sm(t,e,n,r,i,s),r=Cm(),t!==null&&!Jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nr(t,e,s)):(Ue&&r&&dm(e),e.flags|=1,zt(t,e,n,s),e.child)}function av(t,e,n,r,s){if(en(n)){var i=!0;Tc(e)}else i=!1;if(eo(e,s),e.stateNode===null)Yu(t,e),qT(e,n,r),Kf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=An(c):(c=en(n)?ri:Vt.current,c=uo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&tv(e,o,r,c),Kr=!1;var p=e.memoizedState;o.state=p,Ac(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Zt.current||Kr?(typeof h=="function"&&(Gf(e,n,h,r),l=e.memoizedState),(a=Kr||ev(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,IT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Pn(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=An(l):(l=en(n)?ri:Vt.current,l=uo(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&tv(e,o,r,l),Kr=!1,p=e.memoizedState,o.state=p,Ac(e,r,o,s);var y=e.memoizedState;a!==d||p!==y||Zt.current||Kr?(typeof g=="function"&&(Gf(e,n,g,r),y=e.memoizedState),(c=Kr||ev(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Xf(t,e,n,r,i,s)}function Xf(t,e,n,r,s,i){QT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Hy(e,n,!1),Nr(t,e,i);r=e.stateNode,vk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ho(e,t.child,null,i),e.child=ho(e,null,a,i)):zt(t,e,a,i),e.memoizedState=r.state,s&&Hy(e,n,!0),e.child}function YT(t){var e=t.stateNode;e.pendingContext?$y(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$y(t,e.context,!1),wm(t,e.containerInfo)}function lv(t,e,n,r,s){return co(),pm(s),e.flags|=256,zt(t,e,n,r),e.child}var Jf={dehydrated:null,treeContext:null,retryLane:0};function Zf(t){return{baseLanes:t,cachePool:null,transitions:null}}function XT(t,e,n){var r=e.pendingProps,s=We.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Re(We,s&1),t===null)return $f(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wh(o,r,0,null),t=Zs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Zf(n),e.memoizedState=Jf,t):xm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return wk(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ds(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ds(a,i):(i=Zs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Zf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Jf,r}return i=t.child,t=i.sibling,r=ds(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xm(t,e){return e=wh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xu(t,e,n,r){return r!==null&&pm(r),ho(e,t.child,null,n),t=xm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Xd(Error(B(422))),xu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wh({mode:"visible",children:r.children},s,0,null),i=Zs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ho(e,t.child,null,o),e.child.memoizedState=Zf(o),e.memoizedState=Jf,i);if(!(e.mode&1))return xu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=Xd(i,r,void 0),xu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Jt||a){if(r=mt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Rr(t,s),Fn(r,t,s,-1))}return Dm(),r=Xd(Error(B(421))),xu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ok.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,cn=ls(s.nextSibling),dn=e,Ue=!0,On=null,t!==null&&(yn[vn++]=vr,yn[vn++]=wr,yn[vn++]=si,vr=t.id,wr=t.overflow,si=e),e=xm(e,r.children),e.flags|=4096,e)}function uv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hf(t.return,e,n)}function Jd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function JT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(zt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uv(t,n,e);else if(t.tag===19)uv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(We,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&kc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jd(e,!0,n,null,i);break;case"together":Jd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ds(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ds(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Tk(t,e,n){switch(e.tag){case 3:YT(e),co();break;case 5:ST(e);break;case 1:en(e.type)&&Tc(e);break;case 4:wm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Re(Sc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?XT(t,e,n):(Re(We,We.current&1),t=Nr(t,e,n),t!==null?t.sibling:null);Re(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,KT(t,e,n)}return Nr(t,e,n)}var ZT,ep,eE,tE;ZT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ep=function(){};eE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Qs(nr.current);var i=null;switch(n){case"input":s=Ef(t,s),r=Ef(t,r),i=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":s=Cf(t,s),r=Cf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vc)}kf(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s?.[c],r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&De("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};tE=function(t,e,n,r){n!==r&&(e.flags|=4)};function ga(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ek(t,e,n){var r=e.pendingProps;switch(fm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return en(e.type)&&wc(),Nt(e),null;case 3:return r=e.stateNode,fo(),Ve(Zt),Ve(Vt),Em(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(lp(On),On=null))),ep(t,e),Nt(e),null;case 5:Tm(e);var s=Qs(nl.current);if(n=e.type,t!==null&&e.stateNode!=null)eE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Nt(e),null}if(t=Qs(nr.current),Au(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Jn]=e,r[el]=i,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<Ea.length;s++)De(Ea[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":yy(r,i),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},De("invalid",r);break;case"textarea":wy(r,i),De("invalid",r)}kf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Cu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Cu(r.textContent,a,t),s=["children",""+a]):qa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":_u(r),vy(r,i,!0);break;case"textarea":_u(r),Ty(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=vc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jn]=e,t[el]=r,ZT(t,e,!1,!1),e.stateNode=t;e:{switch(o=xf(n,r),n){case"dialog":De("cancel",t),De("close",t),s=r;break;case"iframe":case"object":case"embed":De("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ea.length;s++)De(Ea[s],t);s=r;break;case"source":De("error",t),s=r;break;case"img":case"image":case"link":De("error",t),De("load",t),s=r;break;case"details":De("toggle",t),s=r;break;case"input":yy(t,r),s=Ef(t,r),De("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),De("invalid",t);break;case"textarea":wy(t,r),s=Cf(t,r),De("invalid",t);break;default:s=r}kf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?bw(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Nw(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&$a(t,l):typeof l=="number"&&$a(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&De("scroll",t):l!=null&&Jp(t,i,l,o))}switch(n){case"input":_u(t),vy(t,r,!1);break;case"textarea":_u(t),Ty(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Yi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Yi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)tE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Qs(nl.current),Qs(nr.current),Au(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jn]=e,(i=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:Cu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=e,e.stateNode=r}return Nt(e),null;case 13:if(Ve(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&cn!==null&&e.mode&1&&!(e.flags&128))vT(),co(),e.flags|=98560,i=!1;else if(i=Au(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Jn]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),i=!1}else On!==null&&(lp(On),On=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?ut===0&&(ut=3):Dm())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return fo(),ep(t,e),t===null&&Ja(e.stateNode.containerInfo),Nt(e),null;case 10:return _m(e.type._context),Nt(e),null;case 17:return en(e.type)&&wc(),Nt(e),null;case 19:if(Ve(We),i=e.memoizedState,i===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ga(i,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kc(t),o!==null){for(e.flags|=128,ga(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(We,We.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ze()>mo&&(e.flags|=128,r=!0,ga(i,!1),e.lanes=4194304)}else{if(!r)if(t=kc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ga(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ue)return Nt(e),null}else 2*Ze()-i.renderingStartTime>mo&&n!==1073741824&&(e.flags|=128,r=!0,ga(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ze(),e.sibling=null,n=We.current,Re(We,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return Om(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ln&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function Ik(t,e){switch(fm(e),e.tag){case 1:return en(e.type)&&wc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fo(),Ve(Zt),Ve(Vt),Em(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tm(e),null;case 13:if(Ve(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(We),null;case 4:return fo(),null;case 10:return _m(e.type._context),null;case 22:case 23:return Om(),null;case 24:return null;default:return null}}var Ru=!1,Ot=!1,Sk=typeof WeakSet=="function"?WeakSet:Set,Y=null;function qi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function tp(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var cv=!1;function Ck(t,e){if(Ff=gc,t=oT(),hm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(jf={focusedElem:t,selectionRange:n},gc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,C=y.memoizedState,v=e.stateNode,T=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Pn(e.type,w),C);v.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(O){Ke(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return y=cv,cv=!1,y}function Ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&tp(e,n,i)}s=s.next}while(s!==r)}}function yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function np(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nE(t){var e=t.alternate;e!==null&&(t.alternate=null,nE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[el],delete e[zf],delete e[ak],delete e[lk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rE(t){return t.tag===5||t.tag===3||t.tag===4}function hv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vc));else if(r!==4&&(t=t.child,t!==null))for(rp(t,e,n),t=t.sibling;t!==null;)rp(t,e,n),t=t.sibling}function sp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sp(t,e,n),t=t.sibling;t!==null;)sp(t,e,n),t=t.sibling}var vt=null,bn=!1;function qr(t,e,n){for(n=n.child;n!==null;)sE(t,e,n),n=n.sibling}function sE(t,e,n){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(ch,n)}catch{}switch(n.tag){case 5:Ot||qi(n,e);case 6:var r=vt,s=bn;vt=null,qr(t,e,n),vt=r,bn=s,vt!==null&&(bn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(bn?(t=vt,n=n.stateNode,t.nodeType===8?$d(t.parentNode,n):t.nodeType===1&&$d(t,n),Qa(t)):$d(vt,n.stateNode));break;case 4:r=vt,s=bn,vt=n.stateNode.containerInfo,bn=!0,qr(t,e,n),vt=r,bn=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&tp(n,e,o),s=s.next}while(s!==r)}qr(t,e,n);break;case 1:if(!Ot&&(qi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,e,a)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,qr(t,e,n),Ot=r):qr(t,e,n);break;default:qr(t,e,n)}}function dv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Sk),e.forEach(function(r){var s=Dk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,bn=!1;break e;case 3:vt=a.stateNode.containerInfo,bn=!0;break e;case 4:vt=a.stateNode.containerInfo,bn=!0;break e}a=a.return}if(vt===null)throw Error(B(160));sE(i,o,s),vt=null,bn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ke(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iE(e,t),e=e.sibling}function iE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),Yn(t),r&4){try{Ma(3,t,t.return),yh(3,t)}catch(w){Ke(t,t.return,w)}try{Ma(5,t,t.return)}catch(w){Ke(t,t.return,w)}}break;case 1:Nn(e,t),Yn(t),r&512&&n!==null&&qi(n,n.return);break;case 5:if(Nn(e,t),Yn(t),r&512&&n!==null&&qi(n,n.return),t.flags&32){var s=t.stateNode;try{$a(s,"")}catch(w){Ke(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&kw(s,i),xf(a,o);var c=xf(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?bw(s,d):h==="dangerouslySetInnerHTML"?Nw(s,d):h==="children"?$a(s,d):Jp(s,h,d,c)}switch(a){case"input":If(s,i);break;case"textarea":xw(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Yi(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Yi(s,!!i.multiple,i.defaultValue,!0):Yi(s,!!i.multiple,i.multiple?[]:"",!1))}s[el]=i}catch(w){Ke(t,t.return,w)}}break;case 6:if(Nn(e,t),Yn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Ke(t,t.return,w)}}break;case 3:if(Nn(e,t),Yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qa(e.containerInfo)}catch(w){Ke(t,t.return,w)}break;case 4:Nn(e,t),Yn(t);break;case 13:Nn(e,t),Yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pm=Ze())),r&4&&dv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(c=Ot)||h,Nn(e,t),Ot=c):Nn(e,t),Yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Y=t,h=t.child;h!==null;){for(d=Y=h;Y!==null;){switch(p=Y,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ma(4,p,p.return);break;case 1:qi(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Ke(r,n,w)}}break;case 5:qi(p,p.return);break;case 22:if(p.memoizedState!==null){pv(d);continue}}g!==null?(g.return=p,Y=g):pv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Pw("display",o))}catch(w){Ke(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){Ke(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Nn(e,t),Yn(t),r&4&&dv(t);break;case 21:break;default:Nn(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rE(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($a(s,""),r.flags&=-33);var i=hv(t);sp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hv(t);rp(t,a,o);break;default:throw Error(B(161))}}catch(l){Ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ak(t,e,n){Y=t,oE(t)}function oE(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ru;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ot;a=Ru;var c=Ot;if(Ru=o,(Ot=l)&&!c)for(Y=s;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?mv(s):l!==null?(l.return=o,Y=l):mv(s);for(;i!==null;)Y=i,oE(i),i=i.sibling;Y=s,Ru=a,Ot=c}fv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):fv(t)}}function fv(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||yh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Xy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Qa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ot||e.flags&512&&np(e)}catch(p){Ke(e,e.return,p)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function pv(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function mv(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yh(4,e)}catch(l){Ke(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ke(e,s,l)}}var i=e.return;try{np(e)}catch(l){Ke(e,i,l)}break;case 5:var o=e.return;try{np(e)}catch(l){Ke(e,o,l)}}}catch(l){Ke(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var kk=Math.ceil,Nc=Vr.ReactCurrentDispatcher,Rm=Vr.ReactCurrentOwner,En=Vr.ReactCurrentBatchConfig,we=0,mt=null,st=null,Et=0,ln=0,$i=Rs(0),ut=0,ol=null,oi=0,vh=0,Nm=0,Va=null,Qt=null,Pm=0,mo=1/0,gr=null,Pc=!1,ip=null,cs=null,Nu=!1,rs=null,bc=0,La=0,op=null,Xu=-1,Ju=0;function $t(){return we&6?Ze():Xu!==-1?Xu:Xu=Ze()}function hs(t){return t.mode&1?we&2&&Et!==0?Et&-Et:ck.transition!==null?(Ju===0&&(Ju=qw()),Ju):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:Xw(t.type)),t):1}function Fn(t,e,n,r){if(50<La)throw La=0,op=null,Error(B(185));El(t,n,r),(!(we&2)||t!==mt)&&(t===mt&&(!(we&2)&&(vh|=n),ut===4&&Xr(t,Et)),tn(t,r),n===1&&we===0&&!(e.mode&1)&&(mo=Ze()+500,mh&&Ns()))}function tn(t,e){var n=t.callbackNode;cA(t,e);var r=mc(t,t===mt?Et:0);if(r===0)n!==null&&Sy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sy(n),e===1)t.tag===0?uk(gv.bind(null,t)):gT(gv.bind(null,t)),ik(function(){!(we&6)&&Ns()}),n=null;else{switch($w(r)){case 1:n=rm;break;case 4:n=zw;break;case 16:n=pc;break;case 536870912:n=Ww;break;default:n=pc}n=pE(n,aE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aE(t,e){if(Xu=-1,Ju=0,we&6)throw Error(B(327));var n=t.callbackNode;if(to()&&t.callbackNode!==n)return null;var r=mc(t,t===mt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Oc(t,r);else{e=r;var s=we;we|=2;var i=uE();(mt!==t||Et!==e)&&(gr=null,mo=Ze()+500,Js(t,e));do try{Nk();break}catch(a){lE(t,a)}while(!0);gm(),Nc.current=i,we=s,st!==null?e=0:(mt=null,Et=0,e=ut)}if(e!==0){if(e===2&&(s=Of(t),s!==0&&(r=s,e=ap(t,s))),e===1)throw n=ol,Js(t,0),Xr(t,r),tn(t,Ze()),n;if(e===6)Xr(t,r);else{if(s=t.current.alternate,!(r&30)&&!xk(s)&&(e=Oc(t,r),e===2&&(i=Of(t),i!==0&&(r=i,e=ap(t,i))),e===1))throw n=ol,Js(t,0),Xr(t,r),tn(t,Ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:$s(t,Qt,gr);break;case 3:if(Xr(t,r),(r&130023424)===r&&(e=Pm+500-Ze(),10<e)){if(mc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bf($s.bind(null,t,Qt,gr),e);break}$s(t,Qt,gr);break;case 4:if(Xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ln(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kk(r/1960))-r,10<r){t.timeoutHandle=Bf($s.bind(null,t,Qt,gr),r);break}$s(t,Qt,gr);break;case 5:$s(t,Qt,gr);break;default:throw Error(B(329))}}}return tn(t,Ze()),t.callbackNode===n?aE.bind(null,t):null}function ap(t,e){var n=Va;return t.current.memoizedState.isDehydrated&&(Js(t,e).flags|=256),t=Oc(t,e),t!==2&&(e=Qt,Qt=n,e!==null&&lp(e)),t}function lp(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function xk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Bn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xr(t,e){for(e&=~Nm,e&=~vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),r=1<<n;t[n]=-1,e&=~r}}function gv(t){if(we&6)throw Error(B(327));to();var e=mc(t,0);if(!(e&1))return tn(t,Ze()),null;var n=Oc(t,e);if(t.tag!==0&&n===2){var r=Of(t);r!==0&&(e=r,n=ap(t,r))}if(n===1)throw n=ol,Js(t,0),Xr(t,e),tn(t,Ze()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,Qt,gr),tn(t,Ze()),null}function bm(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(mo=Ze()+500,mh&&Ns())}}function ai(t){rs!==null&&rs.tag===0&&!(we&6)&&to();var e=we;we|=1;var n=En.transition,r=Ie;try{if(En.transition=null,Ie=1,t)return t()}finally{Ie=r,En.transition=n,we=e,!(we&6)&&Ns()}}function Om(){ln=$i.current,Ve($i)}function Js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sk(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(fm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wc();break;case 3:fo(),Ve(Zt),Ve(Vt),Em();break;case 5:Tm(r);break;case 4:fo();break;case 13:Ve(We);break;case 19:Ve(We);break;case 10:_m(r.type._context);break;case 22:case 23:Om()}n=n.return}if(mt=t,st=t=ds(t.current,null),Et=ln=e,ut=0,ol=null,Nm=vh=oi=0,Qt=Va=null,Ks!==null){for(e=0;e<Ks.length;e++)if(n=Ks[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ks=null}return t}function lE(t,e){do{var n=st;try{if(gm(),Ku.current=Rc,xc){for(var r=qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xc=!1}if(ii=0,pt=lt=qe=null,Da=!1,rl=0,Rm.current=null,n===null||n.return===null){ut=1,ol=e,st=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=rv(o);if(g!==null){g.flags&=-257,sv(g,o,a,i,e),g.mode&1&&nv(i,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){nv(i,c,e),Dm();break e}l=Error(B(426))}}else if(Ue&&a.mode&1){var C=rv(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),sv(C,o,a,i,e),pm(po(l,a));break e}}i=l=po(l,a),ut!==4&&(ut=2),Va===null?Va=[i]:Va.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=$T(i,l,e);Yy(i,v);break e;case 1:a=l;var T=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(cs===null||!cs.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=HT(i,a,e);Yy(i,O);break e}}i=i.return}while(i!==null)}hE(n)}catch(N){e=N,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function uE(){var t=Nc.current;return Nc.current=Rc,t===null?Rc:t}function Dm(){(ut===0||ut===3||ut===2)&&(ut=4),mt===null||!(oi&268435455)&&!(vh&268435455)||Xr(mt,Et)}function Oc(t,e){var n=we;we|=2;var r=uE();(mt!==t||Et!==e)&&(gr=null,Js(t,e));do try{Rk();break}catch(s){lE(t,s)}while(!0);if(gm(),we=n,Nc.current=r,st!==null)throw Error(B(261));return mt=null,Et=0,ut}function Rk(){for(;st!==null;)cE(st)}function Nk(){for(;st!==null&&!tA();)cE(st)}function cE(t){var e=fE(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?hE(t):st=e,Rm.current=null}function hE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ik(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,st=null;return}}else if(n=Ek(n,e,ln),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ut===0&&(ut=5)}function $s(t,e,n){var r=Ie,s=En.transition;try{En.transition=null,Ie=1,Pk(t,e,n,r)}finally{En.transition=s,Ie=r}return null}function Pk(t,e,n,r){do to();while(rs!==null);if(we&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(hA(t,i),t===mt&&(st=mt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nu||(Nu=!0,pE(pc,function(){return to(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=En.transition,En.transition=null;var o=Ie;Ie=1;var a=we;we|=4,Rm.current=null,Ck(t,n),iE(n,t),XA(jf),gc=!!Ff,jf=Ff=null,t.current=n,Ak(n),nA(),we=a,Ie=o,En.transition=i}else t.current=n;if(Nu&&(Nu=!1,rs=t,bc=s),i=t.pendingLanes,i===0&&(cs=null),iA(n.stateNode),tn(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pc)throw Pc=!1,t=ip,ip=null,t;return bc&1&&t.tag!==0&&to(),i=t.pendingLanes,i&1?t===op?La++:(La=0,op=t):La=0,Ns(),null}function to(){if(rs!==null){var t=$w(bc),e=En.transition,n=Ie;try{if(En.transition=null,Ie=16>t?16:t,rs===null)var r=!1;else{if(t=rs,rs=null,bc=0,we&6)throw Error(B(331));var s=we;for(we|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:Ma(8,h,i)}var d=h.child;if(d!==null)d.return=h,Y=d;else for(;Y!==null;){h=Y;var p=h.sibling,g=h.return;if(nE(h),h===c){Y=null;break}if(p!==null){p.return=g,Y=p;break}Y=g}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ma(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Y=v;break e}Y=i.return}}var T=t.current;for(Y=T;Y!==null;){o=Y;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Y=I;else e:for(o=T;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yh(9,a)}}catch(N){Ke(a,a.return,N)}if(a===o){Y=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,Y=O;break e}Y=a.return}}if(we=s,Ns(),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(ch,t)}catch{}r=!0}return r}finally{Ie=n,En.transition=e}}return!1}function _v(t,e,n){e=po(n,e),e=$T(t,e,1),t=us(t,e,1),e=$t(),t!==null&&(El(t,1,e),tn(t,e))}function Ke(t,e,n){if(t.tag===3)_v(t,t,n);else for(;e!==null;){if(e.tag===3){_v(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cs===null||!cs.has(r))){t=po(n,t),t=HT(e,t,1),e=us(e,t,1),t=$t(),e!==null&&(El(e,1,t),tn(e,t));break}}e=e.return}}function bk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(Et&n)===n&&(ut===4||ut===3&&(Et&130023424)===Et&&500>Ze()-Pm?Js(t,0):Nm|=n),tn(t,e)}function dE(t,e){e===0&&(t.mode&1?(e=wu,wu<<=1,!(wu&130023424)&&(wu=4194304)):e=1);var n=$t();t=Rr(t,e),t!==null&&(El(t,e,n),tn(t,n))}function Ok(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dE(t,n)}function Dk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),dE(t,n)}var fE;fE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zt.current)Jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jt=!1,Tk(t,e,n);Jt=!!(t.flags&131072)}else Jt=!1,Ue&&e.flags&1048576&&_T(e,Ic,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yu(t,e),t=e.pendingProps;var s=uo(e,Vt.current);eo(e,n),s=Sm(null,e,r,t,s,n);var i=Cm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,en(r)?(i=!0,Tc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vm(e),s.updater=_h,e.stateNode=s,s._reactInternals=e,Kf(e,r,t,n),e=Xf(null,e,r,!0,i,n)):(e.tag=0,Ue&&i&&dm(e),zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Vk(r),t=Pn(r,t),s){case 0:e=Yf(null,e,r,t,n);break e;case 1:e=av(null,e,r,t,n);break e;case 11:e=iv(null,e,r,t,n);break e;case 14:e=ov(null,e,r,Pn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),Yf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),av(t,e,r,s,n);case 3:e:{if(YT(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,IT(t,e),Ac(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=po(Error(B(423)),e),e=lv(t,e,r,n,s);break e}else if(r!==s){s=po(Error(B(424)),e),e=lv(t,e,r,n,s);break e}else for(cn=ls(e.stateNode.containerInfo.firstChild),dn=e,Ue=!0,On=null,n=TT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(co(),r===s){e=Nr(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return ST(e),t===null&&$f(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Uf(r,s)?o=null:i!==null&&Uf(r,i)&&(e.flags|=32),QT(t,e),zt(t,e,o,n),e.child;case 6:return t===null&&$f(e),null;case 13:return XT(t,e,n);case 4:return wm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ho(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),iv(t,e,r,s,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Re(Sc,r._currentValue),r._currentValue=o,i!==null)if(Bn(i.value,o)){if(i.children===s.children&&!Zt.current){e=Nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Sr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Hf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Hf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,eo(e,n),s=An(s),r=r(s),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,s=Pn(r,e.pendingProps),s=Pn(r.type,s),ov(t,e,r,s,n);case 15:return GT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),Yu(t,e),e.tag=1,en(r)?(t=!0,Tc(e)):t=!1,eo(e,n),qT(e,r,s),Kf(e,r,s,n),Xf(null,e,r,!0,t,n);case 19:return JT(t,e,n);case 22:return KT(t,e,n)}throw Error(B(156,e.tag))};function pE(t,e){return Bw(t,e)}function Mk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new Mk(t,e,n,r)}function Mm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vk(t){if(typeof t=="function")return Mm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===em)return 11;if(t===tm)return 14}return 2}function ds(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Mm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mi:return Zs(n.children,s,i,e);case Zp:o=8,s|=8;break;case yf:return t=wn(12,n,e,s|2),t.elementType=yf,t.lanes=i,t;case vf:return t=wn(13,n,e,s),t.elementType=vf,t.lanes=i,t;case wf:return t=wn(19,n,e,s),t.elementType=wf,t.lanes=i,t;case Sw:return wh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ew:o=10;break e;case Iw:o=9;break e;case em:o=11;break e;case tm:o=14;break e;case Gr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=wn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Zs(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function wh(t,e,n,r){return t=wn(22,t,r,e),t.elementType=Sw,t.lanes=n,t.stateNode={isHidden:!1},t}function Zd(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function ef(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dd(0),this.expirationTimes=Dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vm(t,e,n,r,s,i,o,a,l){return t=new Lk(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vm(i),t}function Fk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mE(t){if(!t)return ws;t=t._reactInternals;e:{if(yi(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(en(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(en(n))return mT(t,n,e)}return e}function gE(t,e,n,r,s,i,o,a,l){return t=Vm(n,r,!0,t,s,i,o,a,l),t.context=mE(null),n=t.current,r=$t(),s=hs(n),i=Sr(r,s),i.callback=e??null,us(n,i,s),t.current.lanes=s,El(t,s,r),tn(t,r),t}function Th(t,e,n,r){var s=e.current,i=$t(),o=hs(s);return n=mE(n),e.context===null?e.context=n:e.pendingContext=n,e=Sr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=us(s,e,o),t!==null&&(Fn(t,s,o,i),Gu(t,s,o)),o}function Dc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lm(t,e){yv(t,e),(t=t.alternate)&&yv(t,e)}function jk(){return null}var _E=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fm(t){this._internalRoot=t}Eh.prototype.render=Fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Th(t,e,null,null)};Eh.prototype.unmount=Fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ai(function(){Th(null,t,null,null)}),e[xr]=null}};function Eh(t){this._internalRoot=t}Eh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yr.length&&e!==0&&e<Yr[n].priority;n++);Yr.splice(n,0,t),n===0&&Yw(t)}};function jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ih(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vv(){}function Uk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Dc(o);i.call(c)}}var o=gE(e,r,t,0,null,!1,!1,"",vv);return t._reactRootContainer=o,t[xr]=o.current,Ja(t.nodeType===8?t.parentNode:t),ai(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Dc(l);a.call(c)}}var l=Vm(t,0,!1,null,null,!1,!1,"",vv);return t._reactRootContainer=l,t[xr]=l.current,Ja(t.nodeType===8?t.parentNode:t),ai(function(){Th(e,l,n,r)}),l}function Sh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Dc(o);a.call(l)}}Th(e,o,t,s)}else o=Uk(n,e,t,s,r);return Dc(o)}Hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ta(e.pendingLanes);n!==0&&(sm(e,n|1),tn(e,Ze()),!(we&6)&&(mo=Ze()+500,Ns()))}break;case 13:ai(function(){var r=Rr(t,1);if(r!==null){var s=$t();Fn(r,t,1,s)}}),Lm(t,1)}};im=function(t){if(t.tag===13){var e=Rr(t,134217728);if(e!==null){var n=$t();Fn(e,t,134217728,n)}Lm(t,134217728)}};Gw=function(t){if(t.tag===13){var e=hs(t),n=Rr(t,e);if(n!==null){var r=$t();Fn(n,t,e,r)}Lm(t,e)}};Kw=function(){return Ie};Qw=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Nf=function(t,e,n){switch(e){case"input":if(If(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ph(r);if(!s)throw Error(B(90));Aw(r),If(r,s)}}}break;case"textarea":xw(t,n);break;case"select":e=n.value,e!=null&&Yi(t,!!n.multiple,e,!1)}};Mw=bm;Vw=ai;var Bk={usingClientEntryPoint:!1,Events:[Sl,ji,ph,Ow,Dw,bm]},_a={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zk={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jw(t),t===null?null:t.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||jk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pu.isDisabled&&Pu.supportsFiber)try{ch=Pu.inject(zk),tr=Pu}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bk;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jm(e))throw Error(B(200));return Fk(t,e,null,n)};mn.createRoot=function(t,e){if(!jm(t))throw Error(B(299));var n=!1,r="",s=_E;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Vm(t,1,!1,null,null,n,!1,r,s),t[xr]=e.current,Ja(t.nodeType===8?t.parentNode:t),new Fm(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=jw(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return ai(t)};mn.hydrate=function(t,e,n){if(!Ih(e))throw Error(B(200));return Sh(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!jm(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=_E;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gE(e,null,t,1,n??null,s,!1,i,o),t[xr]=e.current,Ja(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Eh(e)};mn.render=function(t,e,n){if(!Ih(e))throw Error(B(200));return Sh(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!Ih(t))throw Error(B(40));return t._reactRootContainer?(ai(function(){Sh(null,null,t,!1,function(){t._reactRootContainer=null,t[xr]=null})}),!0):!1};mn.unstable_batchedUpdates=bm;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ih(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Sh(t,e,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function yE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yE)}catch(t){console.error(t)}}yE(),yw.exports=mn;var Wk=yw.exports,wv=Wk;gf.createRoot=wv.createRoot,gf.hydrateRoot=wv.hydrateRoot;var Tv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},qk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},wE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new $k;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hk=function(t){const e=vE(t);return wE.encodeByteArray(e,!0)},Mc=function(t){return Hk(t).replace(/\./g,"")},TE=function(t){try{return wE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=()=>Gk().__FIREBASE_DEFAULTS__,Qk=()=>{if(typeof process>"u"||typeof Tv>"u")return;const t=Tv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Yk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TE(t[1]);return e&&JSON.parse(e)},Ch=()=>{try{return Kk()||Qk()||Yk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},EE=t=>{var e,n;return(n=(e=Ch())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Xk=t=>{const e=EE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},IE=()=>{var t;return(t=Ch())===null||t===void 0?void 0:t.config},SE=t=>{var e;return(e=Ch())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Mc(JSON.stringify(n)),Mc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ex(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function tx(){var t;const e=(t=Ch())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ix(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ox(){return!tx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ax(){try{return typeof indexedDB=="object"}catch{return!1}}function lx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="FirebaseError";class Lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ux,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?cx(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Lr(s,a,r)}}function cx(t,e){return t.replace(hx,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hx=/\{\$([^}]+)}/g;function dx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ev(i)&&Ev(o)){if(!Vc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ev(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ia(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Sa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fx(t,e){const n=new px(t,e);return n.subscribe.bind(n)}class px{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mx(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=tf),s.error===void 0&&(s.error=tf),s.complete===void 0&&(s.complete=tf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function tf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class li{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Jk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yx(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_x(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _x(t){return t===Hs?void 0:t}function yx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const wx={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},Tx=ge.INFO,Ex={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},Ix=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Ex[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=Tx,this._logHandler=Ix,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const Sx=(t,e)=>e.some(n=>t instanceof n);let Iv,Sv;function Cx(){return Iv||(Iv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ax(){return Sv||(Sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CE=new WeakMap,up=new WeakMap,AE=new WeakMap,nf=new WeakMap,Bm=new WeakMap;function kx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(fs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&CE.set(n,t)}).catch(()=>{}),Bm.set(e,t),e}function xx(t){if(up.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});up.set(t,e)}let cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return up.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Rx(t){cp=t(cp)}function Nx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rf(this),e,...n);return AE.set(r,e.sort?e.sort():[e]),fs(r)}:Ax().includes(t)?function(...e){return t.apply(rf(this),e),fs(CE.get(this))}:function(...e){return fs(t.apply(rf(this),e))}}function Px(t){return typeof t=="function"?Nx(t):(t instanceof IDBTransaction&&xx(t),Sx(t,Cx())?new Proxy(t,cp):t)}function fs(t){if(t instanceof IDBRequest)return kx(t);if(nf.has(t))return nf.get(t);const e=Px(t);return e!==t&&(nf.set(t,e),Bm.set(e,t)),e}const rf=t=>Bm.get(t);function bx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=fs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(fs(o.result),l.oldVersion,l.newVersion,fs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Ox=["get","getKey","getAll","getAllKeys","count"],Dx=["put","add","delete","clear"],sf=new Map;function Cv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sf.get(e))return sf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Dx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ox.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return sf.set(e,i),i}Rx(t=>({...t,get:(e,n,r)=>Cv(e,n)||t.get(e,n,r),has:(e,n)=>!!Cv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Vx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Vx(t){const e=t.getComponent();return e?.type==="VERSION"}const hp="@firebase/app",Av="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Um("@firebase/app"),Lx="@firebase/app-compat",Fx="@firebase/analytics-compat",jx="@firebase/analytics",Ux="@firebase/app-check-compat",Bx="@firebase/app-check",zx="@firebase/auth",Wx="@firebase/auth-compat",qx="@firebase/database",$x="@firebase/data-connect",Hx="@firebase/database-compat",Gx="@firebase/functions",Kx="@firebase/functions-compat",Qx="@firebase/installations",Yx="@firebase/installations-compat",Xx="@firebase/messaging",Jx="@firebase/messaging-compat",Zx="@firebase/performance",eR="@firebase/performance-compat",tR="@firebase/remote-config",nR="@firebase/remote-config-compat",rR="@firebase/storage",sR="@firebase/storage-compat",iR="@firebase/firestore",oR="@firebase/vertexai-preview",aR="@firebase/firestore-compat",lR="firebase",uR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="[DEFAULT]",cR={[hp]:"fire-core",[Lx]:"fire-core-compat",[jx]:"fire-analytics",[Fx]:"fire-analytics-compat",[Bx]:"fire-app-check",[Ux]:"fire-app-check-compat",[zx]:"fire-auth",[Wx]:"fire-auth-compat",[qx]:"fire-rtdb",[$x]:"fire-data-connect",[Hx]:"fire-rtdb-compat",[Gx]:"fire-fn",[Kx]:"fire-fn-compat",[Qx]:"fire-iid",[Yx]:"fire-iid-compat",[Xx]:"fire-fcm",[Jx]:"fire-fcm-compat",[Zx]:"fire-perf",[eR]:"fire-perf-compat",[tR]:"fire-rc",[nR]:"fire-rc-compat",[rR]:"fire-gcs",[sR]:"fire-gcs-compat",[iR]:"fire-fst",[aR]:"fire-fst-compat",[oR]:"fire-vertex","fire-js":"fire-js",[lR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,hR=new Map,fp=new Map;function kv(t,e){try{t.container.addComponent(e)}catch(n){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function go(t){const e=t.name;if(fp.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;fp.set(e,t);for(const n of Lc.values())kv(n,t);for(const n of hR.values())kv(n,t);return!0}function zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function er(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new Al("app","Firebase",dR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=uR;function kE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ps.create("bad-app-name",{appName:String(s)});if(n||(n=IE()),!n)throw ps.create("no-options");const i=Lc.get(s);if(i){if(Vc(n,i.options)&&Vc(r,i.config))return i;throw ps.create("duplicate-app",{appName:s})}const o=new vx(s);for(const l of fp.values())o.addComponent(l);const a=new fR(n,r,o);return Lc.set(s,a),a}function xE(t=dp){const e=Lc.get(t);if(!e&&t===dp&&IE())return kE();if(!e)throw ps.create("no-app",{appName:t});return e}function ms(t,e,n){var r;let s=(r=cR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(a.join(" "));return}go(new li(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="firebase-heartbeat-database",mR=1,al="firebase-heartbeat-store";let of=null;function RE(){return of||(of=bx(pR,mR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(al)}catch(n){console.warn(n)}}}}).catch(t=>{throw ps.create("idb-open",{originalErrorMessage:t.message})})),of}async function gR(t){try{const n=(await RE()).transaction(al),r=await n.objectStore(al).get(NE(t));return await n.done,r}catch(e){if(e instanceof Lr)Pr.warn(e.message);else{const n=ps.create("idb-get",{originalErrorMessage:e?.message});Pr.warn(n.message)}}}async function xv(t,e){try{const r=(await RE()).transaction(al,"readwrite");await r.objectStore(al).put(e,NE(t)),await r.done}catch(n){if(n instanceof Lr)Pr.warn(n.message);else{const r=ps.create("idb-set",{originalErrorMessage:n?.message});Pr.warn(r.message)}}}function NE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=1024,yR=30*24*60*60*1e3;class vR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=yR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rv(),{heartbeatsToSend:r,unsentEntries:s}=wR(this._heartbeatsCache.heartbeats),i=Mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Pr.warn(n),""}}}function Rv(){return new Date().toISOString().substring(0,10)}function wR(t,e=_R){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Nv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Nv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ax()?lx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Nv(t){return Mc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){go(new li("platform-logger",e=>new Mx(e),"PRIVATE")),go(new li("heartbeat",e=>new vR(e),"PRIVATE")),ms(hp,Av,t),ms(hp,Av,"esm2017"),ms("fire-js","")}ER("");var IR="firebase",SR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(IR,SR,"app");var Pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ei,PE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function S(){}S.prototype=_.prototype,E.D=_.prototype,E.prototype=new S,E.prototype.constructor=E,E.C=function(A,P,b){for(var R=Array(arguments.length-2),q=2;q<arguments.length;q++)R[q-2]=arguments[q];return _.prototype[P].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,_,S){S||(S=0);var A=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)A[P]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(P=0;16>P;++P)A[P]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=E.g[0],S=E.g[1],P=E.g[2];var b=E.g[3],R=_+(b^S&(P^b))+A[0]+3614090360&4294967295;_=S+(R<<7&4294967295|R>>>25),R=b+(P^_&(S^P))+A[1]+3905402710&4294967295,b=_+(R<<12&4294967295|R>>>20),R=P+(S^b&(_^S))+A[2]+606105819&4294967295,P=b+(R<<17&4294967295|R>>>15),R=S+(_^P&(b^_))+A[3]+3250441966&4294967295,S=P+(R<<22&4294967295|R>>>10),R=_+(b^S&(P^b))+A[4]+4118548399&4294967295,_=S+(R<<7&4294967295|R>>>25),R=b+(P^_&(S^P))+A[5]+1200080426&4294967295,b=_+(R<<12&4294967295|R>>>20),R=P+(S^b&(_^S))+A[6]+2821735955&4294967295,P=b+(R<<17&4294967295|R>>>15),R=S+(_^P&(b^_))+A[7]+4249261313&4294967295,S=P+(R<<22&4294967295|R>>>10),R=_+(b^S&(P^b))+A[8]+1770035416&4294967295,_=S+(R<<7&4294967295|R>>>25),R=b+(P^_&(S^P))+A[9]+2336552879&4294967295,b=_+(R<<12&4294967295|R>>>20),R=P+(S^b&(_^S))+A[10]+4294925233&4294967295,P=b+(R<<17&4294967295|R>>>15),R=S+(_^P&(b^_))+A[11]+2304563134&4294967295,S=P+(R<<22&4294967295|R>>>10),R=_+(b^S&(P^b))+A[12]+1804603682&4294967295,_=S+(R<<7&4294967295|R>>>25),R=b+(P^_&(S^P))+A[13]+4254626195&4294967295,b=_+(R<<12&4294967295|R>>>20),R=P+(S^b&(_^S))+A[14]+2792965006&4294967295,P=b+(R<<17&4294967295|R>>>15),R=S+(_^P&(b^_))+A[15]+1236535329&4294967295,S=P+(R<<22&4294967295|R>>>10),R=_+(P^b&(S^P))+A[1]+4129170786&4294967295,_=S+(R<<5&4294967295|R>>>27),R=b+(S^P&(_^S))+A[6]+3225465664&4294967295,b=_+(R<<9&4294967295|R>>>23),R=P+(_^S&(b^_))+A[11]+643717713&4294967295,P=b+(R<<14&4294967295|R>>>18),R=S+(b^_&(P^b))+A[0]+3921069994&4294967295,S=P+(R<<20&4294967295|R>>>12),R=_+(P^b&(S^P))+A[5]+3593408605&4294967295,_=S+(R<<5&4294967295|R>>>27),R=b+(S^P&(_^S))+A[10]+38016083&4294967295,b=_+(R<<9&4294967295|R>>>23),R=P+(_^S&(b^_))+A[15]+3634488961&4294967295,P=b+(R<<14&4294967295|R>>>18),R=S+(b^_&(P^b))+A[4]+3889429448&4294967295,S=P+(R<<20&4294967295|R>>>12),R=_+(P^b&(S^P))+A[9]+568446438&4294967295,_=S+(R<<5&4294967295|R>>>27),R=b+(S^P&(_^S))+A[14]+3275163606&4294967295,b=_+(R<<9&4294967295|R>>>23),R=P+(_^S&(b^_))+A[3]+4107603335&4294967295,P=b+(R<<14&4294967295|R>>>18),R=S+(b^_&(P^b))+A[8]+1163531501&4294967295,S=P+(R<<20&4294967295|R>>>12),R=_+(P^b&(S^P))+A[13]+2850285829&4294967295,_=S+(R<<5&4294967295|R>>>27),R=b+(S^P&(_^S))+A[2]+4243563512&4294967295,b=_+(R<<9&4294967295|R>>>23),R=P+(_^S&(b^_))+A[7]+1735328473&4294967295,P=b+(R<<14&4294967295|R>>>18),R=S+(b^_&(P^b))+A[12]+2368359562&4294967295,S=P+(R<<20&4294967295|R>>>12),R=_+(S^P^b)+A[5]+4294588738&4294967295,_=S+(R<<4&4294967295|R>>>28),R=b+(_^S^P)+A[8]+2272392833&4294967295,b=_+(R<<11&4294967295|R>>>21),R=P+(b^_^S)+A[11]+1839030562&4294967295,P=b+(R<<16&4294967295|R>>>16),R=S+(P^b^_)+A[14]+4259657740&4294967295,S=P+(R<<23&4294967295|R>>>9),R=_+(S^P^b)+A[1]+2763975236&4294967295,_=S+(R<<4&4294967295|R>>>28),R=b+(_^S^P)+A[4]+1272893353&4294967295,b=_+(R<<11&4294967295|R>>>21),R=P+(b^_^S)+A[7]+4139469664&4294967295,P=b+(R<<16&4294967295|R>>>16),R=S+(P^b^_)+A[10]+3200236656&4294967295,S=P+(R<<23&4294967295|R>>>9),R=_+(S^P^b)+A[13]+681279174&4294967295,_=S+(R<<4&4294967295|R>>>28),R=b+(_^S^P)+A[0]+3936430074&4294967295,b=_+(R<<11&4294967295|R>>>21),R=P+(b^_^S)+A[3]+3572445317&4294967295,P=b+(R<<16&4294967295|R>>>16),R=S+(P^b^_)+A[6]+76029189&4294967295,S=P+(R<<23&4294967295|R>>>9),R=_+(S^P^b)+A[9]+3654602809&4294967295,_=S+(R<<4&4294967295|R>>>28),R=b+(_^S^P)+A[12]+3873151461&4294967295,b=_+(R<<11&4294967295|R>>>21),R=P+(b^_^S)+A[15]+530742520&4294967295,P=b+(R<<16&4294967295|R>>>16),R=S+(P^b^_)+A[2]+3299628645&4294967295,S=P+(R<<23&4294967295|R>>>9),R=_+(P^(S|~b))+A[0]+4096336452&4294967295,_=S+(R<<6&4294967295|R>>>26),R=b+(S^(_|~P))+A[7]+1126891415&4294967295,b=_+(R<<10&4294967295|R>>>22),R=P+(_^(b|~S))+A[14]+2878612391&4294967295,P=b+(R<<15&4294967295|R>>>17),R=S+(b^(P|~_))+A[5]+4237533241&4294967295,S=P+(R<<21&4294967295|R>>>11),R=_+(P^(S|~b))+A[12]+1700485571&4294967295,_=S+(R<<6&4294967295|R>>>26),R=b+(S^(_|~P))+A[3]+2399980690&4294967295,b=_+(R<<10&4294967295|R>>>22),R=P+(_^(b|~S))+A[10]+4293915773&4294967295,P=b+(R<<15&4294967295|R>>>17),R=S+(b^(P|~_))+A[1]+2240044497&4294967295,S=P+(R<<21&4294967295|R>>>11),R=_+(P^(S|~b))+A[8]+1873313359&4294967295,_=S+(R<<6&4294967295|R>>>26),R=b+(S^(_|~P))+A[15]+4264355552&4294967295,b=_+(R<<10&4294967295|R>>>22),R=P+(_^(b|~S))+A[6]+2734768916&4294967295,P=b+(R<<15&4294967295|R>>>17),R=S+(b^(P|~_))+A[13]+1309151649&4294967295,S=P+(R<<21&4294967295|R>>>11),R=_+(P^(S|~b))+A[4]+4149444226&4294967295,_=S+(R<<6&4294967295|R>>>26),R=b+(S^(_|~P))+A[11]+3174756917&4294967295,b=_+(R<<10&4294967295|R>>>22),R=P+(_^(b|~S))+A[2]+718787259&4294967295,P=b+(R<<15&4294967295|R>>>17),R=S+(b^(P|~_))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var S=_-this.blockSize,A=this.B,P=this.h,b=0;b<_;){if(P==0)for(;b<=S;)s(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<_;)if(A[P++]=E.charCodeAt(b++),P==this.blockSize){s(this,A),P=0;break}}else for(;b<_;)if(A[P++]=E[b++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var S=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=S&255,S/=256;for(this.u(E),E=Array(16),_=S=0;4>_;++_)for(var A=0;32>A;A+=8)E[S++]=this.g[_]>>>A&255;return E};function i(E,_){var S=a;return Object.prototype.hasOwnProperty.call(S,E)?S[E]:S[E]=_(E)}function o(E,_){this.h=_;for(var S=[],A=!0,P=E.length-1;0<=P;P--){var b=E[P]|0;A&&b==_||(S[P]=b,A=!1)}this.g=S}var a={};function l(E){return-128<=E&&128>E?i(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return d;if(0>E)return C(c(-E));for(var _=[],S=1,A=0;E>=S;A++)_[A]=E/S|0,S*=4294967296;return new o(_,0)}function h(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return C(h(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(_,8)),A=d,P=0;P<E.length;P+=8){var b=Math.min(8,E.length-P),R=parseInt(E.substring(P,P+b),_);8>b?(b=c(Math.pow(_,b)),A=A.j(b).add(c(R))):(A=A.j(S),A=A.add(c(R)))}return A}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-C(this).m();for(var E=0,_=1,S=0;S<this.g.length;S++){var A=this.i(S);E+=(0<=A?A:4294967296+A)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(y(this))return"0";if(w(this))return"-"+C(this).toString(E);for(var _=c(Math.pow(E,6)),S=this,A="";;){var P=O(S,_).g;S=v(S,P.j(_));var b=((0<S.g.length?S.g[0]:S.h)>>>0).toString(E);if(S=P,y(S))return b+A;for(;6>b.length;)b="0"+b;A=b+A}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function y(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function w(E){return E.h==-1}t.l=function(E){return E=v(this,E),w(E)?-1:y(E)?0:1};function C(E){for(var _=E.g.length,S=[],A=0;A<_;A++)S[A]=~E.g[A];return new o(S,~E.h).add(p)}t.abs=function(){return w(this)?C(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),S=[],A=0,P=0;P<=_;P++){var b=A+(this.i(P)&65535)+(E.i(P)&65535),R=(b>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);A=R>>>16,b&=65535,R&=65535,S[P]=R<<16|b}return new o(S,S[S.length-1]&-2147483648?-1:0)};function v(E,_){return E.add(C(_))}t.j=function(E){if(y(this)||y(E))return d;if(w(this))return w(E)?C(this).j(C(E)):C(C(this).j(E));if(w(E))return C(this.j(C(E)));if(0>this.l(g)&&0>E.l(g))return c(this.m()*E.m());for(var _=this.g.length+E.g.length,S=[],A=0;A<2*_;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<E.g.length;P++){var b=this.i(A)>>>16,R=this.i(A)&65535,q=E.i(P)>>>16,Z=E.i(P)&65535;S[2*A+2*P]+=R*Z,T(S,2*A+2*P),S[2*A+2*P+1]+=b*Z,T(S,2*A+2*P+1),S[2*A+2*P+1]+=R*q,T(S,2*A+2*P+1),S[2*A+2*P+2]+=b*q,T(S,2*A+2*P+2)}for(A=0;A<_;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=_;A<2*_;A++)S[A]=0;return new o(S,0)};function T(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function I(E,_){this.g=E,this.h=_}function O(E,_){if(y(_))throw Error("division by zero");if(y(E))return new I(d,d);if(w(E))return _=O(C(E),_),new I(C(_.g),C(_.h));if(w(_))return _=O(E,C(_)),new I(C(_.g),_.h);if(30<E.g.length){if(w(E)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var S=p,A=_;0>=A.l(E);)S=N(S),A=N(A);var P=D(S,1),b=D(A,1);for(A=D(A,2),S=D(S,2);!y(A);){var R=b.add(A);0>=R.l(E)&&(P=P.add(S),b=R),A=D(A,1),S=D(S,1)}return _=v(E,P.j(_)),new I(P,_)}for(P=d;0<=E.l(_);){for(S=Math.max(1,Math.floor(E.m()/_.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),b=c(S),R=b.j(_);w(R)||0<R.l(E);)S-=A,b=c(S),R=b.j(_);y(b)&&(b=p),P=P.add(b),E=v(E,R)}return new I(P,E)}t.A=function(E){return O(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),S=[],A=0;A<_;A++)S[A]=this.i(A)&E.i(A);return new o(S,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),S=[],A=0;A<_;A++)S[A]=this.i(A)|E.i(A);return new o(S,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),S=[],A=0;A<_;A++)S[A]=this.i(A)^E.i(A);return new o(S,this.h^E.h)};function N(E){for(var _=E.g.length+1,S=[],A=0;A<_;A++)S[A]=E.i(A)<<1|E.i(A-1)>>>31;return new o(S,E.h)}function D(E,_){var S=_>>5;_%=32;for(var A=E.g.length-S,P=[],b=0;b<A;b++)P[b]=0<_?E.i(b+S)>>>_|E.i(b+S+1)<<32-_:E.i(b+S);return new o(P,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ei=o}).apply(typeof Pv<"u"?Pv:typeof self<"u"?self:typeof window<"u"?window:{});var bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bE,Ca,OE,ec,pp,DE,ME,VE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof bu=="object"&&bu];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(u,f){if(f)e:{var m=r;u=u.split(".");for(var k=0;k<u.length-1;k++){var M=u[k];if(!(M in m))break e;m=m[M]}u=u[u.length-1],k=m[u],f=f(k),f!=k&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function i(u,f){u instanceof String&&(u+="");var m=0,k=!1,M={next:function(){if(!k&&m<u.length){var V=m++;return{value:f(V,u[V]),done:!1}}return k=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(u){return u||function(){return i(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,k),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var k=m.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(k,M,V){for(var W=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)W[ke-2]=arguments[ke];return f.prototype[M].apply(k,W)}}function w(u){const f=u.length;if(0<f){const m=Array(f);for(let k=0;k<f;k++)m[k]=u[k];return m}return[]}function C(u,f){for(let m=1;m<arguments.length;m++){const k=arguments[m];if(l(k)){const M=u.length||0,V=k.length||0;u.length=M+V;for(let W=0;W<V;W++)u[M+W]=k[W]}else u.push(k)}}class v{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function O(u){return O[" "](u),u}O[" "]=function(){};var N=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function D(u,f,m){for(const k in u)f.call(m,u[k],k,u)}function E(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function _(u){const f={};for(const m in u)f[m]=u[m];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let m,k;for(let M=1;M<arguments.length;M++){k=arguments[M];for(m in k)u[m]=k[m];for(let V=0;V<S.length;V++)m=S[V],Object.prototype.hasOwnProperty.call(k,m)&&(u[m]=k[m])}}function P(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function b(u){a.setTimeout(()=>{throw u},0)}function R(){var u=U;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class q{constructor(){this.h=this.g=null}add(f,m){const k=Z.get();k.set(f,m),this.h?this.h.next=k:this.g=k,this.h=k}}var Z=new v(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let K,F=!1,U=new q,z=()=>{const u=a.Promise.resolve(void 0);K=()=>{u.then(H)}};var H=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(m){b(m)}var f=Z;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}F=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Be=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function ie(u,f){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(N){e:{try{O(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:_e[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ie.aa.h.call(this)}}y(ie,me);var _e={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),te=0;function dr(u,f,m,k,M){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!k,this.ha=M,this.key=++te,this.da=this.fa=!1}function _n(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xn(u){this.src=u,this.g={},this.h=0}xn.prototype.add=function(u,f,m,k,M){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var W=Qo(u,f,k,M);return-1<W?(f=u[W],m||(f.fa=!1)):(f=new dr(f,this.src,V,!!k,M),f.fa=m,u.push(f)),f};function Kn(u,f){var m=f.type;if(m in u.g){var k=u.g[m],M=Array.prototype.indexOf.call(k,f,void 0),V;(V=0<=M)&&Array.prototype.splice.call(k,M,1),V&&(_n(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Qo(u,f,m,k){for(var M=0;M<u.length;++M){var V=u[M];if(!V.da&&V.listener==f&&V.capture==!!m&&V.ha==k)return M}return-1}var Yo="closure_lm_"+(1e6*Math.random()|0),$={};function re(u,f,m,k,M){if(Array.isArray(f)){for(var V=0;V<f.length;V++)re(u,f[V],m,k,M);return null}return m=Jl(m),u&&u[Pe]?u.K(f,m,c(k)?!!k.capture:!1,M):Xe(u,f,m,!1,k,M)}function Xe(u,f,m,k,M,V){if(!f)throw Error("Invalid event type");var W=c(M)?!!M.capture:!!M,ke=fr(u);if(ke||(u[Yo]=ke=new xn(u)),m=ke.add(f,m,k,W,V),m.proxy)return m;if(k=be(),m.proxy=k,k.src=u,k.listener=m,u.addEventListener)Be||(M=W),M===void 0&&(M=!1),u.addEventListener(f.toString(),k,M);else if(u.attachEvent)u.attachEvent(jt(f.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return m}function be(){function u(m){return f.call(u.src,u.listener,m)}const f=Qn;return u}function ye(u,f,m,k,M){if(Array.isArray(f))for(var V=0;V<f.length;V++)ye(u,f[V],m,k,M);else k=c(k)?!!k.capture:!!k,m=Jl(m),u&&u[Pe]?(u=u.i,f=String(f).toString(),f in u.g&&(V=u.g[f],m=Qo(V,m,k,M),-1<m&&(_n(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete u.g[f],u.h--)))):u&&(u=fr(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Qo(f,m,k,M)),(m=-1<u?f[u]:null)&&xe(m))}function xe(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Pe])Kn(f.i,u);else{var m=u.type,k=u.proxy;f.removeEventListener?f.removeEventListener(m,k,u.capture):f.detachEvent?f.detachEvent(jt(m),k):f.addListener&&f.removeListener&&f.removeListener(k),(m=fr(f))?(Kn(m,u),m.h==0&&(m.src=null,f[Yo]=null)):_n(u)}}}function jt(u){return u in $?$[u]:$[u]="on"+u}function Qn(u,f){if(u.da)u=!0;else{f=new ie(f,this);var m=u.listener,k=u.ha||u.src;u.fa&&xe(u),u=m.call(k,f)}return u}function fr(u){return u=u[Yo],u instanceof xn?u:null}var Fs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jl(u){return typeof u=="function"?u:(u[Fs]||(u[Fs]=function(f){return u.handleEvent(f)}),u[Fs])}function dt(){ee.call(this),this.i=new xn(this),this.M=this,this.F=null}y(dt,ee),dt.prototype[Pe]=!0,dt.prototype.removeEventListener=function(u,f,m,k){ye(this,u,f,m,k)};function Ut(u,f){var m,k=u.F;if(k)for(m=[];k;k=k.F)m.push(k);if(u=u.M,k=f.type||f,typeof f=="string")f=new me(f,u);else if(f instanceof me)f.target=f.target||u;else{var M=f;f=new me(k,u),A(f,M)}if(M=!0,m)for(var V=m.length-1;0<=V;V--){var W=f.g=m[V];M=Zl(W,k,!0,f)&&M}if(W=f.g=u,M=Zl(W,k,!0,f)&&M,M=Zl(W,k,!1,f)&&M,m)for(V=0;V<m.length;V++)W=f.g=m[V],M=Zl(W,k,!1,f)&&M}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],k=0;k<m.length;k++)_n(m[k]);delete u.g[f],u.h--}}this.F=null},dt.prototype.K=function(u,f,m,k){return this.i.add(String(u),f,!1,m,k)},dt.prototype.L=function(u,f,m,k){return this.i.add(String(u),f,!0,m,k)};function Zl(u,f,m,k){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,V=0;V<f.length;++V){var W=f[V];if(W&&!W.da&&W.capture==m){var ke=W.listener,yt=W.ha||W.src;W.fa&&Kn(u.i,W),M=ke.call(yt,k)!==!1&&M}}return M&&!k.defaultPrevented}function __(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function y_(u){u.g=__(()=>{u.g=null,u.i&&(u.i=!1,y_(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class q1 extends ee{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:y_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xo(u){ee.call(this),this.h=u,this.g={}}y(Xo,ee);var v_=[];function w_(u){D(u.g,function(f,m){this.g.hasOwnProperty(m)&&xe(f)},u),u.g={}}Xo.prototype.N=function(){Xo.aa.N.call(this),w_(this)},Xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fd=a.JSON.stringify,$1=a.JSON.parse,H1=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function pd(){}pd.prototype.h=null;function T_(u){return u.h||(u.h=u.i())}function E_(){}var Jo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function md(){me.call(this,"d")}y(md,me);function gd(){me.call(this,"c")}y(gd,me);var js={},I_=null;function eu(){return I_=I_||new dt}js.La="serverreachability";function S_(u){me.call(this,js.La,u)}y(S_,me);function Zo(u){const f=eu();Ut(f,new S_(f))}js.STAT_EVENT="statevent";function C_(u,f){me.call(this,js.STAT_EVENT,u),this.stat=f}y(C_,me);function Bt(u){const f=eu();Ut(f,new C_(f,u))}js.Ma="timingevent";function A_(u,f){me.call(this,js.Ma,u),this.size=f}y(A_,me);function ea(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function ta(){this.g=!0}ta.prototype.xa=function(){this.g=!1};function G1(u,f,m,k,M,V){u.info(function(){if(u.g)if(V)for(var W="",ke=V.split("&"),yt=0;yt<ke.length;yt++){var Te=ke[yt].split("=");if(1<Te.length){var kt=Te[0];Te=Te[1];var xt=kt.split("_");W=2<=xt.length&&xt[1]=="type"?W+(kt+"="+Te+"&"):W+(kt+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+k+") [attempt "+M+"]: "+f+`
`+m+`
`+W})}function K1(u,f,m,k,M,V,W){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+M+"]: "+f+`
`+m+`
`+V+" "+W})}function Ci(u,f,m,k){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Y1(u,m)+(k?" "+k:"")})}function Q1(u,f){u.info(function(){return"TIMEOUT: "+f})}ta.prototype.info=function(){};function Y1(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var k=m[u];if(!(2>k.length)){var M=k[1];if(Array.isArray(M)&&!(1>M.length)){var V=M[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return fd(m)}catch{return f}}var tu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},k_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_d;function nu(){}y(nu,pd),nu.prototype.g=function(){return new XMLHttpRequest},nu.prototype.i=function(){return{}},_d=new nu;function Br(u,f,m,k){this.j=u,this.i=f,this.l=m,this.R=k||1,this.U=new Xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new x_}function x_(){this.i=null,this.g="",this.h=!1}var R_={},yd={};function vd(u,f,m){u.L=1,u.v=ou(pr(f)),u.m=m,u.P=!0,N_(u,null)}function N_(u,f){u.F=Date.now(),ru(u),u.A=pr(u.v);var m=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),q_(m.i,"t",k),u.C=0,m=u.j.J,u.h=new x_,u.g=ly(u.j,m?f:null,!u.m),0<u.O&&(u.M=new q1(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,k=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(v_[0]=M.toString()),M=v_);for(var V=0;V<M.length;V++){var W=re(m,M[V],k||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Zo(),G1(u.i,u.u,u.A,u.l,u.R,u.m)}Br.prototype.ca=function(u){u=u.target;const f=this.M;f&&mr(u)==3?f.j():this.Y(u)},Br.prototype.Y=function(u){try{if(u==this.g)e:{const xt=mr(this.g);var f=this.g.Ba();const xi=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||X_(this.g)))){this.J||xt!=4||f==7||(f==8||0>=xi?Zo(3):Zo(2)),wd(this);var m=this.g.Z();this.X=m;t:if(P_(this)){var k=X_(this.g);u="";var M=k.length,V=mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Us(this),na(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(k[f],{stream:!(V&&f==M-1)});k.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,K1(this.i,this.u,this.A,this.l,this.R,xt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,yt=this.g;if((ke=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(ke)){var Te=ke;break t}}Te=null}if(m=Te)Ci(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Td(this,m);else{this.o=!1,this.s=3,Bt(12),Us(this),na(this);break e}}if(this.P){m=!0;let Rn;for(;!this.J&&this.C<W.length;)if(Rn=X1(this,W),Rn==yd){xt==4&&(this.s=4,Bt(14),m=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==R_){this.s=4,Bt(15),Ci(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else Ci(this.i,this.l,Rn,null),Td(this,Rn);if(P_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||W.length!=0||this.h.h||(this.s=1,Bt(16),m=!1),this.o=this.o&&m,!m)Ci(this.i,this.l,W,"[Invalid Chunked Response]"),Us(this),na(this);else if(0<W.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),kd(kt),kt.M=!0,Bt(11))}}else Ci(this.i,this.l,W,null),Td(this,W);xt==4&&Us(this),this.o&&!this.J&&(xt==4?sy(this.j,this):(this.o=!1,ru(this)))}else pC(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Us(this),na(this)}}}catch{}finally{}};function P_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function X1(u,f){var m=u.C,k=f.indexOf(`
`,m);return k==-1?yd:(m=Number(f.substring(m,k)),isNaN(m)?R_:(k+=1,k+m>f.length?yd:(f=f.slice(k,k+m),u.C=k+m,f)))}Br.prototype.cancel=function(){this.J=!0,Us(this)};function ru(u){u.S=Date.now()+u.I,b_(u,u.I)}function b_(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ea(p(u.ba,u),f)}function wd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Br.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Q1(this.i,this.A),this.L!=2&&(Zo(),Bt(17)),Us(this),this.s=2,na(this)):b_(this,this.S-u)};function na(u){u.j.G==0||u.J||sy(u.j,u)}function Us(u){wd(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,w_(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Td(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Ed(m.h,u))){if(!u.K&&Ed(m.h,u)&&m.G==3){try{var k=m.Da.g.parse(f)}catch{k=null}if(Array.isArray(k)&&k.length==3){var M=k;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)du(m),cu(m);else break e;Ad(m),Bt(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=ea(p(m.Za,m),6e3));if(1>=M_(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else zs(m,11)}else if((u.K||m.g==u)&&du(m),!T(f))for(M=m.Da.g.parse(f),f=0;f<M.length;f++){let Te=M[f];if(m.T=Te[0],Te=Te[1],m.G==2)if(Te[0]=="c"){m.K=Te[1],m.ia=Te[2];const kt=Te[3];kt!=null&&(m.la=kt,m.j.info("VER="+m.la));const xt=Te[4];xt!=null&&(m.Aa=xt,m.j.info("SVER="+m.Aa));const xi=Te[5];xi!=null&&typeof xi=="number"&&0<xi&&(k=1.5*xi,m.L=k,m.j.info("backChannelRequestTimeoutMs_="+k)),k=m;const Rn=u.g;if(Rn){const pu=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pu){var V=k.h;V.g||pu.indexOf("spdy")==-1&&pu.indexOf("quic")==-1&&pu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Id(V,V.h),V.h=null))}if(k.D){const xd=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;xd&&(k.ya=xd,Oe(k.I,k.D,xd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),k=m;var W=u;if(k.qa=ay(k,k.J?k.ia:null,k.W),W.K){V_(k.h,W);var ke=W,yt=k.L;yt&&(ke.I=yt),ke.B&&(wd(ke),ru(ke)),k.g=W}else ny(k);0<m.i.length&&hu(m)}else Te[0]!="stop"&&Te[0]!="close"||zs(m,7);else m.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?zs(m,7):Cd(m):Te[0]!="noop"&&m.l&&m.l.ta(Te),m.v=0)}}Zo(4)}catch{}}var J1=class{constructor(u,f){this.g=u,this.map=f}};function O_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function D_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function M_(u){return u.h?1:u.g?u.g.size:0}function Ed(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Id(u,f){u.g?u.g.add(f):u.h=f}function V_(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}O_.prototype.cancel=function(){if(this.i=L_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function L_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return w(u.i)}function Z1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,k=0;k<m;k++)f.push(u[k]);return f}f=[],m=0;for(k in u)f[m++]=u[k];return f}function eC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const k in u)f[m++]=k;return f}}}function F_(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=eC(u),k=Z1(u),M=k.length,V=0;V<M;V++)f.call(void 0,k[V],m&&m[V],u)}var j_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tC(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var k=u[m].indexOf("="),M=null;if(0<=k){var V=u[m].substring(0,k);M=u[m].substring(k+1)}else V=u[m];f(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Bs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Bs){this.h=u.h,su(this,u.j),this.o=u.o,this.g=u.g,iu(this,u.s),this.l=u.l;var f=u.i,m=new ia;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),U_(this,m),this.m=u.m}else u&&(f=String(u).match(j_))?(this.h=!1,su(this,f[1]||"",!0),this.o=ra(f[2]||""),this.g=ra(f[3]||"",!0),iu(this,f[4]),this.l=ra(f[5]||"",!0),U_(this,f[6]||"",!0),this.m=ra(f[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}Bs.prototype.toString=function(){var u=[],f=this.j;f&&u.push(sa(f,B_,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(sa(f,B_,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(sa(m,m.charAt(0)=="/"?sC:rC,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",sa(m,oC)),u.join("")};function pr(u){return new Bs(u)}function su(u,f,m){u.j=m?ra(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function iu(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function U_(u,f,m){f instanceof ia?(u.i=f,aC(u.i,u.h)):(m||(f=sa(f,iC)),u.i=new ia(f,u.h))}function Oe(u,f,m){u.i.set(f,m)}function ou(u){return Oe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ra(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function sa(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,nC),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var B_=/[#\/\?@]/g,rC=/[#\?:]/g,sC=/[#\?]/g,iC=/[#\?@]/g,oC=/#/g;function ia(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function zr(u){u.g||(u.g=new Map,u.h=0,u.i&&tC(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=ia.prototype,t.add=function(u,f){zr(this),this.i=null,u=Ai(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function z_(u,f){zr(u),f=Ai(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function W_(u,f){return zr(u),f=Ai(u,f),u.g.has(f)}t.forEach=function(u,f){zr(this),this.g.forEach(function(m,k){m.forEach(function(M){u.call(f,M,k,this)},this)},this)},t.na=function(){zr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let k=0;k<f.length;k++){const M=u[k];for(let V=0;V<M.length;V++)m.push(f[k])}return m},t.V=function(u){zr(this);let f=[];if(typeof u=="string")W_(this,u)&&(f=f.concat(this.g.get(Ai(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return zr(this),this.i=null,u=Ai(this,u),W_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function q_(u,f,m){z_(u,f),0<m.length&&(u.i=null,u.g.set(Ai(u,f),w(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var k=f[m];const V=encodeURIComponent(String(k)),W=this.V(k);for(k=0;k<W.length;k++){var M=V;W[k]!==""&&(M+="="+encodeURIComponent(String(W[k]))),u.push(M)}}return this.i=u.join("&")};function Ai(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function aC(u,f){f&&!u.j&&(zr(u),u.i=null,u.g.forEach(function(m,k){var M=k.toLowerCase();k!=M&&(z_(this,k),q_(this,M,m))},u)),u.j=f}function lC(u,f){const m=new ta;if(a.Image){const k=new Image;k.onload=g(Wr,m,"TestLoadImage: loaded",!0,f,k),k.onerror=g(Wr,m,"TestLoadImage: error",!1,f,k),k.onabort=g(Wr,m,"TestLoadImage: abort",!1,f,k),k.ontimeout=g(Wr,m,"TestLoadImage: timeout",!1,f,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else f(!1)}function uC(u,f){const m=new ta,k=new AbortController,M=setTimeout(()=>{k.abort(),Wr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:k.signal}).then(V=>{clearTimeout(M),V.ok?Wr(m,"TestPingServer: ok",!0,f):Wr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Wr(m,"TestPingServer: error",!1,f)})}function Wr(u,f,m,k,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),k(m)}catch{}}function cC(){this.g=new H1}function hC(u,f,m){const k=m||"";try{F_(u,function(M,V){let W=M;c(M)&&(W=fd(M)),f.push(k+V+"="+encodeURIComponent(W))})}catch(M){throw f.push(k+"type="+encodeURIComponent("_badmap")),M}}function au(u){this.l=u.Ub||null,this.j=u.eb||!1}y(au,pd),au.prototype.g=function(){return new lu(this.l,this.j)},au.prototype.i=function(u){return function(){return u}}({});function lu(u,f){dt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(lu,dt),t=lu.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,aa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?oa(this):aa(this),this.readyState==3&&$_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,oa(this))},t.Qa=function(u){this.g&&(this.response=u,oa(this))},t.ga=function(){this.g&&oa(this)};function oa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,aa(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function aa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(lu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function H_(u){let f="";return D(u,function(m,k){f+=k,f+=":",f+=m,f+=`\r
`}),f}function Sd(u,f,m){e:{for(k in m){var k=!1;break e}k=!0}k||(m=H_(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Oe(u,f,m))}function Ge(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ge,dt);var dC=/^https?$/i,fC=["POST","PUT"];t=Ge.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_d.g(),this.v=this.o?T_(this.o):T_(_d),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(V){G_(this,V);return}if(u=m||"",m=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var M in k)m.set(M,k[M]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const V of k.keys())m.set(V,k.get(V));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fC,f,void 0))||k||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of m)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Y_(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){G_(this,V)}};function G_(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,K_(u),uu(u)}function K_(u){u.A||(u.A=!0,Ut(u,"complete"),Ut(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ut(this,"complete"),Ut(this,"abort"),uu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uu(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Q_(this):this.bb())},t.bb=function(){Q_(this)};function Q_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||mr(u)!=4||u.Z()!=2)){if(u.u&&mr(u)==4)__(u.Ea,0,u);else if(Ut(u,"readystatechange"),mr(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var k;if(k=W===0){var M=String(u.D).match(j_)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),k=!dC.test(M?M.toLowerCase():"")}m=k}if(m)Ut(u,"complete"),Ut(u,"success");else{u.m=6;try{var V=2<mr(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",K_(u)}}finally{uu(u)}}}}function uu(u,f){if(u.g){Y_(u);const m=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Ut(u,"ready");try{m.onreadystatechange=k}catch{}}}function Y_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function mr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<mr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),$1(f)}};function X_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pC(u){const f={};u=(u.g&&2<=mr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(T(u[k]))continue;var m=P(u[k]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=f[M]||[];f[M]=V,V.push(m)}E(f,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function J_(u){this.Aa=0,this.i=[],this.j=new ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=la("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=la("baseRetryDelayMs",5e3,u),this.cb=la("retryDelaySeedMs",1e4,u),this.Wa=la("forwardChannelMaxRetries",2,u),this.wa=la("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new O_(u&&u.concurrentRequestLimit),this.Da=new cC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=J_.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,k){Bt(0),this.W=u,this.H=f||{},m&&k!==void 0&&(this.H.OSID=m,this.H.OAID=k),this.F=this.X,this.I=ay(this,null,this.W),hu(this)};function Cd(u){if(Z_(u),u.G==3){var f=u.U++,m=pr(u.I);if(Oe(m,"SID",u.K),Oe(m,"RID",f),Oe(m,"TYPE","terminate"),ua(u,m),f=new Br(u,u.j,f),f.L=2,f.v=ou(pr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=ly(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ru(f)}oy(u)}function cu(u){u.g&&(kd(u),u.g.cancel(),u.g=null)}function Z_(u){cu(u),u.u&&(a.clearTimeout(u.u),u.u=null),du(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function hu(u){if(!D_(u.h)&&!u.s){u.s=!0;var f=u.Ga;K||z(),F||(K(),F=!0),U.add(f,u),u.B=0}}function mC(u,f){return M_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ea(p(u.Ga,u,f),iy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Br(this,this.j,u);let V=this.o;if(this.S&&(V?(V=_(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(M.H=V,V=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var k=this.i[m];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(f+=k,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=ty(this,M,f),m=pr(this.I),Oe(m,"RID",u),Oe(m,"CVER",22),this.D&&Oe(m,"X-HTTP-Session-Id",this.D),ua(this,m),V&&(this.O?f="headers="+encodeURIComponent(String(H_(V)))+"&"+f:this.m&&Sd(m,this.m,V)),Id(this.h,M),this.Ua&&Oe(m,"TYPE","init"),this.P?(Oe(m,"$req",f),Oe(m,"SID","null"),M.T=!0,vd(M,m,null)):vd(M,m,f),this.G=2}}else this.G==3&&(u?ey(this,u):this.i.length==0||D_(this.h)||ey(this))};function ey(u,f){var m;f?m=f.l:m=u.U++;const k=pr(u.I);Oe(k,"SID",u.K),Oe(k,"RID",m),Oe(k,"AID",u.T),ua(u,k),u.m&&u.o&&Sd(k,u.m,u.o),m=new Br(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=ty(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Id(u.h,m),vd(m,k,f)}function ua(u,f){u.H&&D(u.H,function(m,k){Oe(f,k,m)}),u.l&&F_({},function(m,k){Oe(f,k,m)})}function ty(u,f,m){m=Math.min(u.i.length,m);var k=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let V=-1;for(;;){const W=["count="+m];V==-1?0<m?(V=M[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let ke=!0;for(let yt=0;yt<m;yt++){let Te=M[yt].g;const kt=M[yt].map;if(Te-=V,0>Te)V=Math.max(0,M[yt].g-100),ke=!1;else try{hC(kt,W,"req"+Te+"_")}catch{k&&k(kt)}}if(ke){k=W.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,k}function ny(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;K||z(),F||(K(),F=!0),U.add(f,u),u.v=0}}function Ad(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ea(p(u.Fa,u),iy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,ry(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ea(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),cu(this),ry(this))};function kd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function ry(u){u.g=new Br(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=pr(u.qa);Oe(f,"RID","rpc"),Oe(f,"SID",u.K),Oe(f,"AID",u.T),Oe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Oe(f,"TO",u.ja),Oe(f,"TYPE","xmlhttp"),ua(u,f),u.m&&u.o&&Sd(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=ou(pr(f)),m.m=null,m.P=!0,N_(m,u)}t.Za=function(){this.C!=null&&(this.C=null,cu(this),Ad(this),Bt(19))};function du(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function sy(u,f){var m=null;if(u.g==f){du(u),kd(u),u.g=null;var k=2}else if(Ed(u.h,f))m=f.D,V_(u.h,f),k=1;else return;if(u.G!=0){if(f.o)if(k==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;k=eu(),Ut(k,new A_(k,m)),hu(u)}else ny(u);else if(M=f.s,M==3||M==0&&0<f.X||!(k==1&&mC(u,f)||k==2&&Ad(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),M){case 1:zs(u,5);break;case 4:zs(u,10);break;case 3:zs(u,6);break;default:zs(u,2)}}}function iy(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function zs(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),k=u.Xa;const M=!k;k=new Bs(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||su(k,"https"),ou(k),M?lC(k.toString(),m):uC(k.toString(),m)}else Bt(2);u.G=0,u.l&&u.l.sa(f),oy(u),Z_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function oy(u){if(u.G=0,u.ka=[],u.l){const f=L_(u.h);(f.length!=0||u.i.length!=0)&&(C(u.ka,f),C(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function ay(u,f,m){var k=m instanceof Bs?pr(m):new Bs(m);if(k.g!="")f&&(k.g=f+"."+k.g),iu(k,k.s);else{var M=a.location;k=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var V=new Bs(null);k&&su(V,k),f&&(V.g=f),M&&iu(V,M),m&&(V.l=m),k=V}return m=u.D,f=u.ya,m&&f&&Oe(k,m,f),Oe(k,"VER",u.la),ua(u,k),k}function ly(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ge(new au({eb:m})):new Ge(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uy(){}t=uy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fu(){}fu.prototype.g=function(u,f){return new an(u,f)};function an(u,f){dt.call(this),this.g=new J_(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!T(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ki(this)}y(an,dt),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Cd(this.g)},an.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=fd(u),u=m);f.i.push(new J1(f.Ya++,u)),f.G==3&&hu(f)},an.prototype.N=function(){this.g.l=null,delete this.j,Cd(this.g),delete this.g,an.aa.N.call(this)};function cy(u){md.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(cy,md);function hy(){gd.call(this),this.status=1}y(hy,gd);function ki(u){this.g=u}y(ki,uy),ki.prototype.ua=function(){Ut(this.g,"a")},ki.prototype.ta=function(u){Ut(this.g,new cy(u))},ki.prototype.sa=function(u){Ut(this.g,new hy)},ki.prototype.ra=function(){Ut(this.g,"b")},fu.prototype.createWebChannel=fu.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,VE=function(){return new fu},ME=function(){return eu()},DE=js,pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tu.NO_ERROR=0,tu.TIMEOUT=8,tu.HTTP_ERROR=6,ec=tu,k_.COMPLETE="complete",OE=k_,E_.EventType=Jo,Jo.OPEN="a",Jo.CLOSE="b",Jo.ERROR="c",Jo.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ca=E_,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,bE=Ge}).apply(typeof bu<"u"?bu:typeof self<"u"?self:typeof window<"u"?window:{});const bv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new Um("@firebase/firestore");function ya(){return ui.logLevel}function J(t,...e){if(ui.logLevel<=ge.DEBUG){const n=e.map(Wm);ui.debug(`Firestore (${Lo}): ${t}`,...n)}}function br(t,...e){if(ui.logLevel<=ge.ERROR){const n=e.map(Wm);ui.error(`Firestore (${Lo}): ${t}`,...n)}}function _o(t,...e){if(ui.logLevel<=ge.WARN){const n=e.map(Wm);ui.warn(`Firestore (${Lo}): ${t}`,...n)}}function Wm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: `+t;throw br(e),new Error(e)}function Se(t,e){t||oe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class AR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kR{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new LE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new bt(e)}}class xR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Se(this.o===void 0);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string"),this.R=n.token,new NR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=bR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function yo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new ct(0,0))}static max(){return new ae(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ll.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ll?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends ll{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const OR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends ll{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return OR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Me.fromString(e))}static fromName(e){return new ne(Me.fromString(e).popFirst(5))}static empty(){return new ne(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Me(e.slice()))}}function DR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new Ts(s,ne.empty(),e)}function MR(t){return new Ts(t.readTime,t.key,-1)}class Ts{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ts(ae.min(),ne.empty(),-1)}static max(){return new Ts(ae.max(),ne.empty(),-1)}}function VR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==LR)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function jR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}qm.oe=-1;function Ah(t){return t==null}function Fc(t){return t===0&&1/t==-1/0}function UR(t){return typeof t=="number"&&Number.isInteger(t)&&!Fc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ou(this.root,e,this.comparator,!0)}}class Ou{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(e){return new Dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class Dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new hn([])}unionWith(e){let n=new It(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new UE("Invalid base64 string: "+i):i}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const BR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(t){if(Se(!!t),typeof t=="string"){let e=0;const n=BR.exec(t);if(Se(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ci(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hm(t){const e=t.mapValue.fields.__previous_value__;return $m(e)?Hm(e):e}function ul(t){const e=Es(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class cl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du={mapValue:{}};function hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$m(t)?4:qR(t)?9007199254740991:WR(t)?10:11:oe()}function ar(t,e){if(t===e)return!0;const n=hi(t);if(n!==hi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ul(t).isEqual(ul(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Es(s.timestampValue),a=Es(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ci(s.bytesValue).isEqual(ci(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Je(s.geoPointValue.latitude)===Je(i.geoPointValue.latitude)&&Je(s.geoPointValue.longitude)===Je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Je(s.integerValue)===Je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Je(s.doubleValue),a=Je(i.doubleValue);return o===a?Fc(o)===Fc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return yo(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Ov(o)!==Ov(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ar(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function hl(t,e){return(t.values||[]).find(n=>ar(n,e))!==void 0}function vo(t,e){if(t===e)return 0;const n=hi(t),r=hi(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Je(i.integerValue||i.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Mv(t.timestampValue,e.timestampValue);case 4:return Mv(ul(t),ul(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ci(i),l=ci(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Ee(a[c],l[c]);if(h!==0)return h}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(Je(i.latitude),Je(o.latitude));return a!==0?a:Ee(Je(i.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Vv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const d=i.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=Ee(((c=g?.values)===null||c===void 0?void 0:c.length)||0,((h=y?.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:Vv(g,y)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Du.mapValue&&o===Du.mapValue)return 0;if(i===Du.mapValue)return 1;if(o===Du.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Ee(l[d],h[d]);if(p!==0)return p;const g=vo(a[l[d]],c[h[d]]);if(g!==0)return g}return Ee(l.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function Mv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Es(t),r=Es(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function Vv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=vo(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function wo(t){return mp(t)}function mp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Es(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ci(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=mp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${mp(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function Lv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gp(t){return!!t&&"integerValue"in t}function Gm(t){return!!t&&"arrayValue"in t}function Fv(t){return!!t&&"nullValue"in t}function jv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tc(t){return!!t&&"mapValue"in t}function WR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Fa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fa(n)}setAll(e){let n=Tt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Fa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];tc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Xt(Fa(this.value))}}function BE(t){const e=[];return vi(t.fields,(n,r)=>{const s=new Tt([n]);if(tc(r)){const i=BE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dt(e,0,ae.min(),ae.min(),ae.min(),Xt.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,ae.min(),ae.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ae.min(),ae.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.position=e,this.inclusive=n}}function Uv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=vo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n="asc"){this.field=e,this.dir=n}}function $R(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{}class it extends zE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GR(e,n,r):n==="array-contains"?new YR(e,r):n==="in"?new XR(e,r):n==="not-in"?new JR(e,r):n==="array-contains-any"?new ZR(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KR(e,r):new QR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vo(n,this.value)):n!==null&&hi(this.value)===hi(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends zE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new zn(e,n)}matches(e){return WE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function WE(t){return t.op==="and"}function qE(t){return HR(t)&&WE(t)}function HR(t){for(const e of t.filters)if(e instanceof zn)return!1;return!0}function _p(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+wo(t.value);if(qE(t))return t.filters.map(e=>_p(e)).join(",");{const e=t.filters.map(n=>_p(n)).join(",");return`${t.op}(${e})`}}function $E(t,e){return t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&ar(r.value,s.value)}(t,e):t instanceof zn?function(r,s){return s instanceof zn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&$E(o,s.filters[a]),!0):!1}(t,e):void oe()}function HE(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`}(t):t instanceof zn?function(n){return n.op.toString()+" {"+n.getFilters().map(HE).join(" ,")+"}"}(t):"Filter"}class GR extends it{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class KR extends it{constructor(e,n){super(e,"in",n),this.keys=GE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QR extends it{constructor(e,n){super(e,"not-in",n),this.keys=GE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function GE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class YR extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gm(n)&&hl(n.arrayValue,this.value)}}class XR extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hl(this.value.arrayValue,n)}}class JR extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!hl(this.value.arrayValue,n)}}class ZR extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function zv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new eN(t,e,n,r,s,i,o)}function Km(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_p(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wo(r)).join(",")),e.ue=n}return e.ue}function Qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$R(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$E(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bv(t.startAt,e.startAt)&&Bv(t.endAt,e.endAt)}function yp(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tN(t,e,n,r,s,i,o,a){return new Fo(t,e,n,r,s,i,o,a)}function Ym(t){return new Fo(t)}function Wv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KE(t){return t.collectionGroup!==null}function ja(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(Tt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new dl(i,r))}),n.has(Tt.keyField().canonicalString())||e.ce.push(new dl(Tt.keyField(),r))}return e.ce}function rr(t){const e=le(t);return e.le||(e.le=nN(e,ja(t))),e.le}function nN(t,e){if(t.limitType==="F")return zv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new dl(s.field,i)});const n=t.endAt?new jc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new jc(t.startAt.position,t.startAt.inclusive):null;return zv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vp(t,e){const n=t.filters.concat([e]);return new Fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wp(t,e,n){return new Fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kh(t,e){return Qm(rr(t),rr(e))&&t.limitType===e.limitType}function QE(t){return`${Km(rr(t))}|lt:${t.limitType}`}function Ni(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>HE(s)).join(", ")}]`),Ah(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>wo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>wo(s)).join(",")),`Target(${r})`}(rr(t))}; limitType=${t.limitType})`}function xh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ja(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Uv(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ja(r),s)||r.endAt&&!function(o,a,l){const c=Uv(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ja(r),s))}(t,e)}function rN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YE(t){return(e,n)=>{let r=!1;for(const s of ja(t)){const i=sN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sN(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?vo(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new He(ne.comparator);function Or(){return iN}const XE=new He(ne.comparator);function Aa(...t){let e=XE;for(const n of t)e=e.insert(n.key,n);return e}function JE(t){let e=XE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ys(){return Ua()}function ZE(){return Ua()}function Ua(){return new jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const oN=new He(ne.comparator),aN=new It(ne.comparator);function pe(...t){let e=aN;for(const n of t)e=e.add(n);return e}const lN=new It(Ee);function uN(){return lN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function eI(t){return{integerValue:""+t}}function cN(t,e){return UR(e)?eI(e):Xm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this._=void 0}}function hN(t,e,n){return t instanceof Uc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$m(i)&&(i=Hm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof fl?nI(t,e):t instanceof pl?rI(t,e):function(s,i){const o=tI(s,i),a=qv(o)+qv(s.Pe);return gp(o)&&gp(s.Pe)?eI(a):Xm(s.serializer,a)}(t,e)}function dN(t,e,n){return t instanceof fl?nI(t,e):t instanceof pl?rI(t,e):n}function tI(t,e){return t instanceof Bc?function(r){return gp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Uc extends Rh{}class fl extends Rh{constructor(e){super(),this.elements=e}}function nI(t,e){const n=sI(e);for(const r of t.elements)n.some(s=>ar(s,r))||n.push(r);return{arrayValue:{values:n}}}class pl extends Rh{constructor(e){super(),this.elements=e}}function rI(t,e){let n=sI(e);for(const r of t.elements)n=n.filter(s=>!ar(s,r));return{arrayValue:{values:n}}}class Bc extends Rh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function qv(t){return Je(t.integerValue||t.doubleValue)}function sI(t){return Gm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof fl&&s instanceof fl||r instanceof pl&&s instanceof pl?yo(r.elements,s.elements,ar):r instanceof Bc&&s instanceof Bc?ar(r.Pe,s.Pe):r instanceof Uc&&s instanceof Uc}(t.transform,e.transform)}class pN{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nh{}function iI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ph(t.key,nn.none()):new Nl(t.key,t.data,nn.none());{const n=t.data,r=Xt.empty();let s=new It(Tt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ps(t.key,r,new hn(s.toArray()),nn.none())}}function mN(t,e,n){t instanceof Nl?function(s,i,o){const a=s.value.clone(),l=Hv(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ps?function(s,i,o){if(!nc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Hv(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(oI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ba(t,e,n,r){return t instanceof Nl?function(i,o,a,l){if(!nc(i.precondition,o))return a;const c=i.value.clone(),h=Gv(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ps?function(i,o,a,l){if(!nc(i.precondition,o))return a;const c=Gv(i.fieldTransforms,l,o),h=o.data;return h.setAll(oI(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return nc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function gN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=tI(r.transform,s||null);i!=null&&(n===null&&(n=Xt.empty()),n.set(r.field,i))}return n||null}function $v(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&yo(r,s,(i,o)=>fN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nl extends Nh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ps extends Nh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function oI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Hv(t,e,n){const r=new Map;Se(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,dN(o,a,n[s]))}return r}function Gv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,hN(i,o,e))}return r}class Ph extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _N extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&mN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ba(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ba(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=iI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,(n,r)=>$v(n,r))&&yo(this.baseMutations,e.baseMutations,(n,r)=>$v(n,r))}}class Jm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Se(e.mutations.length===r.length);let s=function(){return oN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Jm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,ve;function TN(t){switch(t){default:return oe();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function aI(t){if(t===void 0)return br("GRPC error has no .code"),L.UNKNOWN;switch(t){case tt.OK:return L.OK;case tt.CANCELLED:return L.CANCELLED;case tt.UNKNOWN:return L.UNKNOWN;case tt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case tt.INTERNAL:return L.INTERNAL;case tt.UNAVAILABLE:return L.UNAVAILABLE;case tt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case tt.NOT_FOUND:return L.NOT_FOUND;case tt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case tt.ABORTED:return L.ABORTED;case tt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case tt.DATA_LOSS:return L.DATA_LOSS;default:return oe()}}(ve=tt||(tt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=new ei([4294967295,4294967295],0);function Kv(t){const e=EN().encode(t),n=new PE;return n.update(e),new Uint8Array(n.digest())}function Qv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ei([n,r],0),new ei([s,i],0)]}class Zm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ka(`Invalid padding: ${n}`);if(r<0)throw new ka(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ka(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ka(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ei.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ei.fromNumber(r)));return s.compare(IN)===1&&(s=new ei([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Kv(e),[r,s]=Qv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Zm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Kv(e),[r,s]=Qv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bh(ae.min(),s,new He(Ee),Or(),pe())}}class Pl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pl(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class lI{constructor(e,n){this.targetId=e,this.me=n}}class uI{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Yv{constructor(){this.fe=0,this.ge=Jv(),this.pe=Ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new Pl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Jv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Or(),this.qe=Xv(),this.Qe=new He(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(yp(i))if(r===0){const o=new ne(i.path);this.Ue(n,o,Dt.newNoDocument(o,ae.min()))}else Se(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ci(r).toUint8Array()}catch(l){if(l instanceof UE)return _o("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Zm(o,s,i)}catch(l){return _o(l instanceof ka?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&yp(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Dt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=pe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new bh(e,n,this.Qe,this.ke,r);return this.ke=Or(),this.qe=Xv(),this.Qe=new He(Ee),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Yv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new It(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Xv(){return new He(ne.comparator)}function Jv(){return new He(ne.comparator)}const CN={asc:"ASCENDING",desc:"DESCENDING"},AN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kN={and:"AND",or:"OR"};class xN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tp(t,e){return t.useProto3Json||Ah(e)?e:{value:e}}function zc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RN(t,e){return zc(t,e.toTimestamp())}function sr(t){return Se(!!t),ae.fromTimestamp(function(n){const r=Es(n);return new ct(r.seconds,r.nanos)}(t))}function eg(t,e){return Ep(t,e).canonicalString()}function Ep(t,e){const n=function(s){return new Me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hI(t){const e=Me.fromString(t);return Se(gI(e)),e}function Ip(t,e){return eg(t.databaseId,e.path)}function af(t,e){const n=hI(e);if(n.get(1)!==t.databaseId.projectId)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(fI(n))}function dI(t,e){return eg(t.databaseId,e)}function NN(t){const e=hI(t);return e.length===4?Me.emptyPath():fI(e)}function Sp(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fI(t){return Se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Zv(t,e,n){return{name:Ip(t,e),fields:n.value.mapValue.fields}}function PN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(Se(h===void 0||typeof h=="string"),Ct.fromBase64String(h||"")):(Se(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?L.UNKNOWN:aI(c.code);return new G(h,c.message||"")}(o);n=new uI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=af(t,r.document.name),i=sr(r.document.updateTime),o=r.document.createTime?sr(r.document.createTime):ae.min(),a=new Xt({mapValue:{fields:r.document.fields}}),l=Dt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new rc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=af(t,r.document),i=r.readTime?sr(r.readTime):ae.min(),o=Dt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new rc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=af(t,r.document),i=r.removedTargetIds||[];n=new rc([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new wN(s,i),a=r.targetId;n=new lI(a,o)}}return n}function bN(t,e){let n;if(e instanceof Nl)n={update:Zv(t,e.key,e.value)};else if(e instanceof Ph)n={delete:Ip(t,e.key)};else if(e instanceof Ps)n={update:Zv(t,e.key,e.data),updateMask:BN(e.fieldMask)};else{if(!(e instanceof _N))return oe();n={verify:Ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Uc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:RN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function ON(t,e){return t&&t.length>0?(Se(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?sr(s.updateTime):sr(i);return o.isEqual(ae.min())&&(o=sr(i)),new pN(o,s.transformResults||[])}(n,e))):[]}function DN(t,e){return{documents:[dI(t,e.path)]}}function MN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dI(t,s);const i=function(c){if(c.length!==0)return mI(zn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Pi(p.field),direction:FN(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Tp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function VN(t){let e=NN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Se(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const p=pI(d);return p instanceof zn&&qE(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new dl(bi(y.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Ah(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new jc(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new jc(g,p)}(n.endAt)),tN(e,s,o,i,a,"F",l,c)}function LN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bi(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bi(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bi(n.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bi(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return it.create(bi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zn.create(n.compositeFilter.filters.map(r=>pI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function FN(t){return CN[t]}function jN(t){return AN[t]}function UN(t){return kN[t]}function Pi(t){return{fieldPath:t.canonicalString()}}function bi(t){return Tt.fromServerFormat(t.fieldPath)}function mI(t){return t instanceof it?function(n){if(n.op==="=="){if(jv(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NAN"}};if(Fv(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jv(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NOT_NAN"}};if(Fv(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pi(n.field),op:jN(n.op),value:n.value}}}(t):t instanceof zn?function(n){const r=n.getFilters().map(s=>mI(s));return r.length===1?r[0]:{compositeFilter:{op:UN(n.op),filters:r}}}(t):oe()}function BN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,s,i=ae.min(),o=ae.min(),a=Ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.ct=e}}function WN(t){const e=VN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.un=new $N}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Ts.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class $N{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(Me.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new To(0)}static kn(){return new To(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.changes=new jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ba(r.mutation,s,hn.empty(),ct.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=Ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Aa();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Or();const o=Ua(),a=function(){return Ua()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ps)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ba(h.mutation,c,h.mutation.getFieldMask(),ct.now())):o.set(c.key,hn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new GN(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ua();let s=new He((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||hn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=ZE();h.forEach(p=>{if(!i.has(p)){const g=iI(n.get(p),r.get(p));g!==null&&d.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(Ys());let a=-1,l=i;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,pe())).next(h=>({batchId:a,changes:JE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=Aa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Aa();return this.indexManager.getCollectionParents(e,i).next(a=>j.forEach(a,l=>{const c=function(d,p){return new Fo(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Dt.newInvalidDocument(h)))});let a=Aa();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&Ba(h.mutation,c,hn.empty(),ct.now()),xh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:sr(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:WN(s.bundledQuery),readTime:sr(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.overlays=new He(ne.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ys();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=Ys(),i=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new He((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Ys(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ys(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return j.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vN(n,r));let i=this.Ir.get(n);i===void 0&&(i=pe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this.Tr=new It(ft.Er),this.dr=new It(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ne(new Me([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new Me([])),r=new ft(n,e),s=new ft(n,e+1);let i=pe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new It(ft.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yN(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ee);return n.forEach(s=>{const i=new ft(s,0),o=new ft(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new ft(new ne(i),0);let a=new It(Ee);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),s=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.Mr=e,this.docs=function(){return new He(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Or();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||VR(MR(h),r)<=0||(s.has(h.key)||xh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eP(this)}getSize(e){return j.resolve(this.size)}}class eP extends HN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.persistence=e,this.Nr=new jo(n=>Km(n),Qm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new tg,this.targetCount=0,this.kr=To.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new To(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new qm(0),this.Kr=!1,this.Kr=!0,this.$r=new XN,this.referenceDelegate=e(this),this.Ur=new tP(this),this.indexManager=new qN,this.remoteDocumentCache=function(s){return new ZN(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zN(n),this.Gr=new QN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new JN(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new rP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class rP extends FR{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Jr=new tg,this.Yr=null}static Zr(e){return new ng(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const s=ne.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new rg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ox()?8:jR(Lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new sP;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ya()<=ge.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ni(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(ya()<=ge.DEBUG&&J("QueryEngine","Query:",Ni(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ya()<=ge.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ni(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):j.resolve())}Yi(e,n){if(Wv(n))return j.resolve(null);let r=rr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=wp(n,null,"F"),r=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,wp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return Wv(n)||s.isEqual(ae.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?j.resolve(null):(ya()<=ge.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ni(n)),this.rs(e,o,n,DR(s,-1)).next(a=>a))})}ts(e,n){let r=new It(YE(e));return n.forEach((s,i)=>{xh(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ya()<=ge.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ni(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ts.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new He(Ee),this._s=new jo(i=>Km(i),Qm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function aP(t,e,n,r){return new oP(t,e,n,r)}async function _I(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=pe();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function lP(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=j.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(w=>{const C=c.docVersions.get(y);Se(C!==null),w.version.compareTo(C)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function yI(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function uP(t,e){const n=le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=s.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,d)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Ct.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(d,g),function(w,C,v){return w.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(i,g))});let l=Or(),c=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(cP(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ae.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function cP(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Or();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function hP(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dP(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ss(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cp(t,e,n){const r=le(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Rl(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function e0(t,e,n){const r=le(t);let s=ae.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=le(l),p=d._s.get(h);return p!==void 0?j.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,rr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:pe())).next(a=>(fP(r,rN(e),a),{documents:a,Ts:i})))}function fP(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class t0{constructor(){this.activeTargetIds=uN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pP{constructor(){this.so=new t0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new t0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu=null;function lf(){return Mu===null?Mu=function(){return 268435456+Math.round(2147483648*Math.random())}():Mu++,"0x"+Mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class yP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=lf(),l=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(J("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw _o("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=gP[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=lf();return new Promise((o,a)=>{const l=new bE;l.setWithCredentials(!0),l.listenOnce(OE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ec.NO_ERROR:const h=l.getResponseJson();J(Pt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case ec.TIMEOUT:J(Pt,`RPC '${e}' ${i} timed out`),a(new G(L.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:const d=l.getStatus();if(J(Pt,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p?.error;if(g&&g.status&&g.message){const y=function(C){const v=C.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(g.status);a(new G(y,g.message))}else a(new G(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(L.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{J(Pt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);J(Pt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=lf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VE(),a=ME(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");J(Pt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const y=new _P({Io:C=>{g?J(Pt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(J(Pt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),J(Pt,`RPC '${e}' stream ${s} sending:`,C),d.send(C))},To:()=>d.close()}),w=(C,v,T)=>{C.listen(v,I=>{try{T(I)}catch(O){setTimeout(()=>{throw O},0)}})};return w(d,Ca.EventType.OPEN,()=>{g||(J(Pt,`RPC '${e}' stream ${s} transport opened.`),y.yo())}),w(d,Ca.EventType.CLOSE,()=>{g||(g=!0,J(Pt,`RPC '${e}' stream ${s} transport closed`),y.So())}),w(d,Ca.EventType.ERROR,C=>{g||(g=!0,_o(Pt,`RPC '${e}' stream ${s} transport errored:`,C),y.So(new G(L.UNAVAILABLE,"The operation could not be completed")))}),w(d,Ca.EventType.MESSAGE,C=>{var v;if(!g){const T=C.data[0];Se(!!T);const I=T,O=I.error||((v=I[0])===null||v===void 0?void 0:v.error);if(O){J(Pt,`RPC '${e}' stream ${s} received error:`,O);const N=O.status;let D=function(S){const A=tt[S];if(A!==void 0)return aI(A)}(N),E=O.message;D===void 0&&(D=L.INTERNAL,E="Unknown error status: "+N+" with message "+O.message),g=!0,y.So(new G(D,E)),d.close()}else J(Pt,`RPC '${e}' stream ${s} received:`,T),y.bo(T)}}),w(a,DE.STAT_EVENT,C=>{C.stat===pp.PROXY?J(Pt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===pp.NOPROXY&&J(Pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t){return new xN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(br(n.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vP extends wI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=PN(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?sr(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Sp(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=yp(l)?{documents:DN(i,l)}:{query:MN(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cI(i,o.resumeToken);const c=Tp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=zc(i,o.snapshotVersion.toTimestamp());const c=Tp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=LN(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Sp(this.serializer),n.removeTarget=e,this.a_(n)}}class wP extends wI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ON(e.writeResults,e.commitTime),r=sr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Sp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bN(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ep(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ep(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class EP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(br(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{wi(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=le(l);c.L_.add(4),await bl(c),c.q_.set("Unknown"),c.L_.delete(4),await Dh(c)}(this))})}),this.q_=new EP(r,s)}}async function Dh(t){if(wi(t))for(const e of t.B_)await e(!0)}async function bl(t){for(const e of t.B_)await e(!1)}function TI(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ag(n)?og(n):Uo(n).r_()&&ig(n,e))}function sg(t,e){const n=le(t),r=Uo(n);n.N_.delete(e),r.r_()&&EI(n,e),n.N_.size===0&&(r.r_()?r.o_():wi(n)&&n.q_.set("Unknown"))}function ig(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uo(t).A_(e)}function EI(t,e){t.Q_.xe(e),Uo(t).R_(e)}function og(t){t.Q_=new SN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Uo(t).start(),t.q_.v_()}function ag(t){return wi(t)&&!Uo(t).n_()&&t.N_.size>0}function wi(t){return le(t).L_.size===0}function II(t){t.Q_=void 0}async function SP(t){t.q_.set("Online")}async function CP(t){t.N_.forEach((e,n)=>{ig(t,e)})}async function AP(t,e){II(t),ag(t)?(t.q_.M_(e),og(t)):t.q_.set("Unknown")}async function kP(t,e,n){if(t.q_.set("Online"),e instanceof uI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wc(t,r)}else if(e instanceof rc?t.Q_.Ke(e):e instanceof lI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await yI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(Ct.EMPTY_BYTE_STRING,h.snapshotVersion)),EI(i,l);const d=new ss(h.target,l,c,h.sequenceNumber);ig(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Wc(t,r)}}async function Wc(t,e,n){if(!Rl(e))throw e;t.L_.add(1),await bl(t),t.q_.set("Offline"),n||(n=()=>yI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Dh(t)})}function SI(t,e){return e().catch(n=>Wc(t,n,e))}async function Mh(t){const e=le(t),n=Is(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xP(e);)try{const s=await hP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,RP(e,s)}catch(s){await Wc(e,s)}CI(e)&&AI(e)}function xP(t){return wi(t)&&t.O_.length<10}function RP(t,e){t.O_.push(e);const n=Is(t);n.r_()&&n.V_&&n.m_(e.mutations)}function CI(t){return wi(t)&&!Is(t).n_()&&t.O_.length>0}function AI(t){Is(t).start()}async function NP(t){Is(t).p_()}async function PP(t){const e=Is(t);for(const n of t.O_)e.m_(n.mutations)}async function bP(t,e,n){const r=t.O_.shift(),s=Jm.from(r,e,n);await SI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mh(t)}async function OP(t,e){e&&Is(t).V_&&await async function(r,s){if(function(o){return TN(o)&&o!==L.ABORTED}(s.code)){const i=r.O_.shift();Is(r).s_(),await SI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Mh(r)}}(t,e),CI(t)&&AI(t)}async function r0(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=wi(n);n.L_.add(3),await bl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Dh(n)}async function DP(t,e){const n=le(t);e?(n.L_.delete(2),await Dh(n)):e||(n.L_.add(2),await bl(n),n.q_.set("Unknown"))}function Uo(t){return t.K_||(t.K_=function(n,r,s){const i=le(n);return i.w_(),new vP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:SP.bind(null,t),Ro:CP.bind(null,t),mo:AP.bind(null,t),d_:kP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ag(t)?og(t):t.q_.set("Unknown")):(await t.K_.stop(),II(t))})),t.K_}function Is(t){return t.U_||(t.U_=function(n,r,s){const i=le(n);return i.w_(),new wP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:NP.bind(null,t),mo:OP.bind(null,t),f_:PP.bind(null,t),g_:bP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Mh(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new lg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ug(t,e){if(br("AsyncQueue",`${e}: ${t}`),Rl(t))return new G(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Aa(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new no(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new no;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.W_=new He(ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Eo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Eo(e,n,no.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class VP{constructor(){this.queries=i0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=i0(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new G(L.ABORTED,"Firestore shutting down"))}}function i0(){return new jo(t=>QE(t),kh)}async function kI(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new MP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ug(o,`Initialization of query '${Ni(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&cg(n)}async function xI(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LP(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&cg(n)}function FP(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function cg(t){t.Y_.forEach(e=>{e.next()})}var Ap,o0;(o0=Ap||(Ap={})).ea="default",o0.Cache="cache";class RI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.key=e}}class PI{constructor(e){this.key=e}}class jP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=YE(e),this.Ra=new no(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new s0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const p=s.get(h),g=xh(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?y!==w&&(r.track({type:3,doc:g}),C=!0):this.ga(p,g)||(r.track({type:2,doc:g}),C=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(l||c)&&(a=!0)),C&&(g?(o=o.add(g),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,y){const w=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return w(g)-w(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Eo(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new s0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new PI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new NI(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class UP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BP{constructor(e){this.key=e,this.va=!1}}class zP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new jo(a=>QE(a),kh),this.Ma=new Map,this.xa=new Set,this.Oa=new He(ne.comparator),this.Na=new Map,this.La=new tg,this.Ba={},this.ka=new Map,this.qa=To.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WP(t,e,n=!0){const r=LI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await bI(r,e,n,!0),s}async function qP(t,e){const n=LI(t);await bI(n,e,!0,!1)}async function bI(t,e,n,r){const s=await dP(t.localStore,rr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await $P(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&TI(t.remoteStore,s),a}async function $P(t,e,n,r,s){t.Ka=(d,p,g)=>async function(w,C,v,T){let I=C.view.ma(v);I.ns&&(I=await e0(w.localStore,C.query,!1).then(({documents:E})=>C.view.ma(E,I)));const O=T&&T.targetChanges.get(C.targetId),N=T&&T.targetMismatches.get(C.targetId)!=null,D=C.view.applyChanges(I,w.isPrimaryClient,O,N);return l0(w,C.targetId,D.wa),D.snapshot}(t,d,p,g);const i=await e0(t.localStore,e,!0),o=new jP(e,i.Ts),a=o.ma(i.documents),l=Pl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);l0(t,n,c.wa);const h=new UP(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function HP(t,e,n){const r=le(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!kh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sg(r.remoteStore,s.targetId),kp(r,s.targetId)}).catch(xl)):(kp(r,s.targetId),await Cp(r.localStore,s.targetId,!0))}async function GP(t,e){const n=le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sg(n.remoteStore,r.targetId))}async function KP(t,e,n){const r=tb(t);try{const s=await function(o,a){const l=le(o),c=ct.now(),h=a.reduce((g,y)=>g.add(y.key),pe());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Or(),w=pe();return l.cs.getEntries(g,h).next(C=>{y=C,y.forEach((v,T)=>{T.isValidDocument()||(w=w.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(C=>{d=C;const v=[];for(const T of a){const I=gN(T,d.get(T.key).overlayedDocument);I!=null&&v.push(new Ps(T.key,I,BE(I.value.mapValue),nn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(C=>{p=C;const v=C.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(g,C.batchId,v)})}).then(()=>({batchId:p.batchId,changes:JE(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new He(Ee)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await Ol(r,s.changes),await Mh(r.remoteStore)}catch(s){const i=ug(s,"Failed to persist write");n.reject(i)}}async function OI(t,e){const n=le(t);try{const r=await uP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Se(o.va):s.removedDocuments.size>0&&(Se(o.va),o.va=!1))}),await Ol(n,r,e)}catch(r){await xl(r)}}function a0(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=le(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&cg(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QP(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new He(ne.comparator);o=o.insert(i,Dt.newNoDocument(i,ae.min()));const a=pe().add(i),l=new bh(ae.min(),new Map,new He(Ee),o,a);await OI(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),hg(r)}else await Cp(r.localStore,e,!1).then(()=>kp(r,e,n)).catch(xl)}async function YP(t,e){const n=le(t),r=e.batch.batchId;try{const s=await lP(n.localStore,e);MI(n,r,null),DI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ol(n,s)}catch(s){await xl(s)}}async function XP(t,e,n){const r=le(t);try{const s=await function(o,a){const l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Se(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);MI(r,e,n),DI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ol(r,s)}catch(s){await xl(s)}}function DI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function MI(t,e,n){const r=le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function kp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||VI(t,r)})}function VI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),hg(t))}function l0(t,e,n){for(const r of n)r instanceof NI?(t.La.addReference(r.key,e),JP(t,r)):r instanceof PI?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||VI(t,r.key)):oe()}function JP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),hg(t))}function hg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new BP(n)),t.Oa=t.Oa.insert(n,r),TI(t.remoteStore,new ss(rr(Ym(n.path)),r,"TargetPurposeLimboResolution",qm.oe))}}async function Ol(t,e,n){const r=le(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=rg.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=le(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,p=>j.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>j.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!Rl(d))throw d;J("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),y=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,w)}}}(r.localStore,i))}async function ZP(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await _I(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(L.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ol(n,r.hs)}}function eb(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let s=pe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function LI(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QP.bind(null,e),e.Ca.d_=LP.bind(null,e.eventManager),e.Ca.$a=FP.bind(null,e.eventManager),e}function tb(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XP.bind(null,e),e}class qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return aP(this.persistence,new iP,e.initialUser,this.serializer)}Ga(e){return new nP(ng.Zr,this.serializer)}Wa(e){return new pP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qc.provider={build:()=>new qc};class xp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>a0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZP.bind(null,this.syncEngine),await DP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VP}()}createDatastore(e){const n=Oh(e.databaseInfo.databaseId),r=function(i){return new yP(i)}(e.databaseInfo);return function(i,o,a,l){return new TP(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new IP(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>a0(this.syncEngine,n,0),function(){return n0.D()?new n0:new mP}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const d=new zP(s,i,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);J("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await bl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xp.provider={build:()=>new xp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=FE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ug(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cf(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await _I(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function u0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rb(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>r0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>r0(e.remoteStore,s)),t._onlineComponents=e}async function rb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await cf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await cf(t,new qc)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await cf(t,new qc);return t._offlineComponents}async function jI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await u0(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await u0(t,new xp))),t._onlineComponents}function sb(t){return jI(t).then(e=>e.syncEngine)}async function Rp(t){const e=await jI(t),n=e.eventManager;return n.onListen=WP.bind(null,e.syncEngine),n.onUnlisten=HP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GP.bind(null,e.syncEngine),n}function ib(t,e,n={}){const r=new gs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new FI({next:p=>{h.Za(),o.enqueueAndForget(()=>xI(i,d)),p.fromCache&&l.source==="server"?c.reject(new G(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new RI(a,h,{includeMetadataChanges:!0,_a:!0});return kI(i,d)}(await Rp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e,n){if(!n)throw new G(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ob(t,e,n,r){if(e===!0&&r===!0)throw new G(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h0(t){if(!ne.isDocumentKey(t))throw new G(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d0(t){if(ne.isDocumentKey(t))throw new G(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vh(t);throw new G(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ob("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CR;switch(r.type){case"firstParty":return new RR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=c0.get(n);r&&(J("ComponentProvider","Removing Datastore"),c0.delete(n),r.terminate())}(this),Promise.resolve()}}function ab(t,e,n,r={}){var s;const i=(t=jn(t,Lh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=bt.MOCK_USER;else{a=Zk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new bt(c)}t._authCredentials=new AR(new LE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class _s extends bs{constructor(e,n,r){super(e,n,Ym(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new ne(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function Zn(t,e,...n){if(t=at(t),BI("collection","path",e),t instanceof Lh){const r=Me.fromString(e,...n);return d0(r),new _s(t,null,r)}{if(!(t instanceof rn||t instanceof _s))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return d0(r),new _s(t.firestore,null,r)}}function In(t,e,...n){if(t=at(t),arguments.length===1&&(e=FE.newId()),BI("doc","path",e),t instanceof Lh){const r=Me.fromString(e,...n);return h0(r),new rn(t,null,new ne(r))}{if(!(t instanceof rn||t instanceof _s))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return h0(r),new rn(t.firestore,t instanceof _s?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vI(this,"async_queue_retry"),this.Vu=()=>{const r=uf();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=uf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=uf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new gs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Rl(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw br("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=lg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function m0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ss extends Lh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new p0,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p0(e),this._firestoreClient=void 0,await e}}}function lb(t,e){const n=typeof t=="object"?t:xE(),r=typeof t=="string"?t:"(default)",s=zm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Xk("firestore");i&&ab(s,...i)}return s}function Fh(t){if(t._terminated)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ub(t),t._firestoreClient}function ub(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new zR(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,UI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new nb(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Io(Ct.fromBase64String(e))}catch(n){throw new G(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Io(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=/^__.*__$/;class hb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nl(e,this.data,n,this.fieldTransforms)}}class zI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class mg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new mg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return $c(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(WI(this.Cu)&&cb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class db{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oh(e)}Qu(e,n,r,s=!1){return new mg({Cu:e,methodName:n,qu:r,path:Tt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uh(t){const e=t._freezeSettings(),n=Oh(t._databaseId);return new db(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gg(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);_g("Data must be an object, but it was:",o,r);const a=qI(r,o);let l,c;if(i.merge)l=new hn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=Np(e,d,n);if(!o.contains(p))throw new G(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);HI(h,p)||h.push(p)}l=new hn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new hb(new Xt(a),l,c)}class Bh extends dg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}function fb(t,e,n,r){const s=t.Qu(1,e,n);_g("Data must be an object, but it was:",s,r);const i=[],o=Xt.empty();vi(r,(l,c)=>{const h=yg(e,l,n);c=at(c);const d=s.Nu(h);if(c instanceof Bh)i.push(h);else{const p=Dl(c,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new hn(i);return new zI(o,a,s.fieldTransforms)}function pb(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Np(e,r,n)],l=[s];if(i.length%2!=0)throw new G(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Np(e,i[p])),l.push(i[p+1]);const c=[],h=Xt.empty();for(let p=a.length-1;p>=0;--p)if(!HI(c,a[p])){const g=a[p];let y=l[p];y=at(y);const w=o.Nu(g);if(y instanceof Bh)c.push(g);else{const C=Dl(y,w);C!=null&&(c.push(g),h.set(g,C))}}const d=new hn(c);return new zI(h,d,o.fieldTransforms)}function mb(t,e,n,r=!1){return Dl(n,t.Qu(r?4:3,e))}function Dl(t,e){if($I(t=at(t)))return _g("Unsupported field value:",e,t),qI(t,e);if(t instanceof dg)return function(r,s){if(!WI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Dl(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ct.fromDate(r);return{timestampValue:zc(s.serializer,i)}}if(r instanceof ct){const i=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zc(s.serializer,i)}}if(r instanceof fg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Io)return{bytesValue:cI(s.serializer,r._byteString)};if(r instanceof rn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:eg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Xm(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Vh(r)}`)}(t,e)}function qI(t,e){const n={};return jE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vi(t,(r,s)=>{const i=Dl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $I(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof fg||t instanceof Io||t instanceof rn||t instanceof dg||t instanceof pg)}function _g(t,e,n){if(!$I(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Vh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Np(t,e,n){if((e=at(e))instanceof jh)return e._internalPath;if(typeof e=="string")return yg(t,e);throw $c("Field path arguments must be of type string or ",t,!1,void 0,n)}const gb=new RegExp("[~\\*/\\[\\]]");function yg(t,e,n){if(e.search(gb)>=0)throw $c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jh(...e.split("."))._internalPath}catch{throw $c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $c(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(L.INVALID_ARGUMENT,a+t+l)}function HI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _b(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _b extends GI{data(){return super.data()}}function zh(t,e){return typeof e=="string"?yg(t,e):e instanceof jh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vg{}class QI extends vg{}function ti(t,e,...n){let r=[];e instanceof vg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof wg).length,a=i.filter(l=>l instanceof Wh).length;if(o>1||o>0&&a>0)throw new G(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wh extends QI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wh(e,n,r)}_apply(e){const n=this._parse(e);return YI(e._query,n),new bs(e.firestore,e.converter,vp(e._query,n))}_parse(e){const n=Uh(e.firestore);return function(i,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){y0(d,h);const g=[];for(const y of d)g.push(_0(l,i,y));p={arrayValue:{values:g}}}else p=_0(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||y0(d,h),p=mb(a,o,d,h==="in"||h==="not-in");return it.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function g0(t,e,n){const r=e,s=zh("where",t);return Wh._create(s,r,n)}class wg extends vg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)YI(o,l),o=vp(o,l)}(e._query,n),new bs(e.firestore,e.converter,vp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tg extends QI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dl(i,o)}(e._query,this._field,this._direction);return new bs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Fo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ml(t,e="asc"){const n=e,r=zh("orderBy",t);return Tg._create(r,n)}function _0(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new G(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KE(e)&&n.indexOf("/")!==-1)throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!ne.isDocumentKey(r))throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lv(t,new ne(r))}if(n instanceof rn)return Lv(t,n._key);throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vh(n)}.`)}function y0(t,e){if(!Array.isArray(t)||t.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YI(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yb{convertValue(e,n="none"){switch(hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Je(o.doubleValue));return new pg(i)}convertGeoPoint(e){return new fg(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ul(e));default:return null}}convertTimestamp(e){const n=Es(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Se(gI(r));const s=new cl(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||br(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XI extends GI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sc extends XI{data(e={}){return super.data(e)}}class JI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new xa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sc(this._firestore,this._userDataWriter,r.key,r,new xa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new sc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new xa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new sc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new xa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:vb(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function vb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}class Ig extends yb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function hf(t){t=jn(t,bs);const e=jn(t.firestore,Ss),n=Fh(e),r=new Ig(e);return KI(t._query),ib(n,t._query).then(s=>new JI(e,r,t,s))}function So(t,e,n){t=jn(t,rn);const r=jn(t.firestore,Ss),s=Eg(t.converter,e,n);return qh(r,[gg(Uh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nn.none())])}function Pp(t){return qh(jn(t.firestore,Ss),[new Ph(t._key,nn.none())])}function ZI(t,e){const n=jn(t.firestore,Ss),r=In(t),s=Eg(t.converter,e);return qh(n,[gg(Uh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function di(t,...e){var n,r,s;t=at(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||m0(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(m0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,h;if(t instanceof rn)c=jn(t.firestore,Ss),h=Ym(t._key.path),l={next:d=>{e[o]&&e[o](wb(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=jn(t,bs);c=jn(d.firestore,Ss),h=d._query;const p=new Ig(c);l={next:g=>{e[o]&&e[o](new JI(c,p,d,g))},error:e[o+1],complete:e[o+2]},KI(t._query)}return function(p,g,y,w){const C=new FI(w),v=new RI(g,C,y);return p.asyncQueue.enqueueAndForget(async()=>kI(await Rp(p),v)),()=>{C.Za(),p.asyncQueue.enqueueAndForget(async()=>xI(await Rp(p),v))}}(Fh(c),h,a,l)}function qh(t,e){return function(r,s){const i=new gs;return r.asyncQueue.enqueueAndForget(async()=>KP(await sb(r),s,i)),i.promise}(Fh(t),e)}function wb(t,e,n){const r=n.docs.get(e._key),s=new Ig(t);return new XI(t,s,e._key,r,new xa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Uh(e)}set(e,n,r){this._verifyNotCommitted();const s=df(e,this._firestore),i=Eg(s.converter,n,r),o=gg(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,nn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=df(e,this._firestore);let o;return o=typeof(n=at(n))=="string"||n instanceof jh?pb(this._dataReader,"WriteBatch.update",i._key,n,r,s):fb(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=df(e,this._firestore);return this._mutations=this._mutations.concat(new Ph(n._key,nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function df(t,e){if((t=at(t)).firestore!==e)throw new G(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t){return Fh(t=jn(t,Ss)),new Tb(t,e=>qh(t,e))}(function(e,n=!0){(function(s){Lo=s})(Vo),go(new li("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ss(new kR(r.getProvider("auth-internal")),new PR(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ms(bv,"4.7.3",e),ms(bv,"4.7.3","esm2017")})();function Sg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $n(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function ot(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function eS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ib=eS,tS=new Al("auth","Firebase",eS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Um("@firebase/auth");function Sb(t,...e){Hc.logLevel<=ge.WARN&&Hc.warn(`Auth (${Vo}): ${t}`,...e)}function ic(t,...e){Hc.logLevel<=ge.ERROR&&Hc.error(`Auth (${Vo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,...e){throw Cg(t,...e)}function ir(t,...e){return Cg(t,...e)}function nS(t,e,n){const r=Object.assign(Object.assign({},Ib()),{[e]:n});return new Al("auth","Firebase",r).create(e,{appName:t.name})}function Cr(t){return nS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tS.create(t,...e)}function se(t,e,...n){if(!t)throw Cg(e,...n)}function Tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ic(e),new Error(e)}function Dr(t,e){t||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Cb(){return v0()==="http:"||v0()==="https:"}function v0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cb()||rx()||"connection"in navigator)?navigator.onLine:!0}function kb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dr(n>e,"Short delay should be less than long delay!"),this.isMobile=ex()||sx()}get(){return Ab()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t,e){Dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=new Vl(3e4,6e4);function Os(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ds(t,e,n,r,s={}){return sS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=kl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return nx()||(c.referrerPolicy="no-referrer"),rS.fetch()(iS(t,t.config.apiHost,n,a),c)})}async function sS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xb),e);try{const s=new Pb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Vu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Vu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Vu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw nS(t,h,c);Wn(t,h)}}catch(s){if(s instanceof Lr)throw s;Wn(t,"network-request-failed",{message:String(s)})}}async function Ll(t,e,n,r,s={}){const i=await Ds(t,e,n,r,s);return"mfaPendingCredential"in i&&Wn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function iS(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ag(t.config,s):`${t.config.apiScheme}://${s}`}function Nb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ir(this.auth,"network-request-failed")),Rb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ir(t,e,r);return s.customData._tokenResponse=n,s}function w0(t){return t!==void 0&&t.enterprise!==void 0}class bb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Nb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ob(t,e){return Ds(t,"GET","/v2/recaptchaConfig",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,e){return Ds(t,"POST","/v1/accounts:delete",e)}async function oS(t,e){return Ds(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Mb(t,e=!1){const n=at(t),r=await n.getIdToken(e),s=kg(r);se(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:za(ff(s.auth_time)),issuedAtTime:za(ff(s.iat)),expirationTime:za(ff(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function ff(t){return Number(t)*1e3}function kg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ic("JWT malformed, contained fewer than 3 sections"),null;try{const s=TE(n);return s?JSON.parse(s):(ic("Failed to decode base64 JWT payload"),null)}catch(s){return ic("Caught error parsing JWT payload as JSON",s?.toString()),null}}function T0(t){const e=kg(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Lr&&Vb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Vb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=za(this.lastLoginAt),this.creationTime=za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ml(t,oS(n,{idToken:r}));se(s?.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?aS(i.providerUserInfo):[],a=jb(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!a?.length,h=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Op(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function Fb(t){const e=at(t);await Gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jb(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function aS(t){return t.map(e=>{var{providerId:n}=e,r=Sg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(t,e){const n=await sS(t,{},async()=>{const r=kl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=iS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",rS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Bb(t,e){return Ds(t,"POST","/v2/accounts:revokeToken",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=T0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Ub(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ro;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(se(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(se(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Er{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Sg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Op(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ml(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Mb(this,e)}reload(){return Fb(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await ml(this,Db(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:O,isAnonymous:N,providerData:D,stsTokenManager:E}=n;se(I&&E,e,"internal-error");const _=ro.fromJSON(this.name,E);se(typeof I=="string",e,"internal-error"),$r(d,e.name),$r(p,e.name),se(typeof O=="boolean",e,"internal-error"),se(typeof N=="boolean",e,"internal-error"),$r(g,e.name),$r(y,e.name),$r(w,e.name),$r(C,e.name),$r(v,e.name),$r(T,e.name);const S=new Er({uid:I,auth:e,email:p,emailVerified:O,displayName:d,isAnonymous:N,photoURL:y,phoneNumber:g,tenantId:w,stsTokenManager:_,createdAt:v,lastLoginAt:T});return D&&Array.isArray(D)&&(S.providerData=D.map(A=>Object.assign({},A))),C&&(S._redirectEventId=C),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new ro;s.updateFromServerResponse(n);const i=new Er({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];se(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?aS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new ro;a.updateFromIdToken(r);const l=new Er({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Op(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new Map;function Ir(t){Dr(t instanceof Function,"Expected a class definition");let e=E0.get(t);return e?(Dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lS.type="NONE";const I0=lS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t,e,n){return`firebase:${t}:${e}:${n}`}class so{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=oc(this.userKey,s.apiKey,i),this.fullPersistenceKey=oc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Er._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new so(Ir(I0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Ir(I0);const o=oc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Er._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new so(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new so(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pS(e))return"Blackberry";if(mS(e))return"Webos";if(cS(e))return"Safari";if((e.includes("chrome/")||hS(e))&&!e.includes("edge/"))return"Chrome";if(fS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function uS(t=Lt()){return/firefox\//i.test(t)}function cS(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hS(t=Lt()){return/crios\//i.test(t)}function dS(t=Lt()){return/iemobile/i.test(t)}function fS(t=Lt()){return/android/i.test(t)}function pS(t=Lt()){return/blackberry/i.test(t)}function mS(t=Lt()){return/webos/i.test(t)}function xg(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zb(t=Lt()){var e;return xg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Wb(){return ix()&&document.documentMode===10}function gS(t=Lt()){return xg(t)||fS(t)||mS(t)||pS(t)||/windows phone/i.test(t)||dS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t,e=[]){let n;switch(t){case"Browser":n=S0(Lt());break;case"Worker":n=`${S0(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $b(t,e={}){return Ds(t,"GET","/v2/passwordPolicy",Os(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=6;class Gb{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Hb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C0(this),this.idTokenSubscription=new C0(this),this.beforeStateQueue=new qb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ir(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await oS(this,{idToken:e}),r=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(Cr(this));const n=e?at(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $b(this),n=new Gb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Bb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ir(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[Ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&Sb(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Ti(t){return at(t)}class C0{constructor(e){this.auth=e,this.observer=null,this.addObserver=fx(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qb(t){$h=t}function yS(t){return $h.loadJS(t)}function Yb(){return $h.recaptchaEnterpriseScript}function Xb(){return $h.gapiScript}function Jb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Zb="recaptcha-enterprise",e2="NO_RECAPTCHA";class t2{constructor(e){this.type=Zb,this.auth=Ti(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{Ob(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new bb(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;w0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(e2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&w0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Yb();l.length!==0&&(l+=a),yS(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function A0(t,e,n,r=!1){const s=new t2(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function k0(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await A0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await A0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t,e){const n=zm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Vc(i,e??{}))return s;Wn(s,"already-initialized")}return n.initialize({options:e})}function r2(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ir);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function s2(t,e,n){const r=Ti(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=vS(e),{host:o,port:a}=i2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),o2()}function vS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i2(t){const e=vS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:x0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:x0(o)}}}function x0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,n){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function a2(t,e){return Ds(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e){return Ll(t,"POST","/v1/accounts:signInWithPassword",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t,e){return Ll(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}async function c2(t,e){return Ll(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends Rg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new gl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k0(e,n,"signInWithPassword",l2);case"emailLink":return u2(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return k0(e,r,"signUpPassword",a2);case"emailLink":return c2(e,{idToken:n,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t,e){return Ll(t,"POST","/v1/accounts:signInWithIdp",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="http://localhost";class fi extends Rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Sg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new fi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,io(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:h2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function f2(t){const e=Ia(Sa(t)).link,n=e?Ia(Sa(e)).deep_link_id:null,r=Ia(Sa(t)).deep_link_id;return(r?Ia(Sa(r)).link:null)||r||n||e||t}class Ng{constructor(e){var n,r,s,i,o,a;const l=Ia(Sa(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=d2((s=l.mode)!==null&&s!==void 0?s:null);se(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=f2(e);try{return new Ng(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,n){return gl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ng.parseLink(n);return se(r,"argument-error"),gl._fromEmailAndCode(e,r.code,r.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends wS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Fl{constructor(){super("facebook.com")}static credential(e){return fi._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fi._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.GOOGLE_SIGN_IN_METHOD="google.com";Zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Fl{constructor(){super("github.com")}static credential(e){return fi._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Fl{constructor(){super("twitter.com")}static credential(e,n){return fi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ts.credential(n,r)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e){return Ll(t,"POST","/v1/accounts:signUp",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Er._fromIdTokenResponse(e,r,s),o=R0(r);return new Cs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=R0(r);return new Cs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function R0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(t){var e;if(er(t.app))return Promise.reject(Cr(t));const n=Ti(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Cs({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await p2(n,{returnSecureToken:!0}),s=await Cs._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends Lr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Kc(e,n,r,s)}}function TS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(t,i,e,r):i})}async function g2(t,e,n=!1){const r=await ml(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(t,e,n=!1){const{auth:r}=t;if(er(r.app))return Promise.reject(Cr(r));const s="reauthenticate";try{const i=await ml(t,TS(r,s,e,t),n);se(i.idToken,r,"internal-error");const o=kg(i.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Cs._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Wn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(t,e,n=!1){if(er(t.app))return Promise.reject(Cr(t));const r="signIn",s=await TS(t,r,e),i=await Cs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function y2(t,e){return ES(Ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(t){const e=Ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function w2(t,e,n){return er(t.app)?Promise.reject(Cr(t)):y2(at(t),Bo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&v2(t),r})}function T2(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function E2(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function I2(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function S2(t){return at(t).signOut()}const Qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=1e3,A2=10;class SS extends IS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Wb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,A2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},C2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SS.type="LOCAL";const k2=SS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS extends IS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CS.type="SESSION";const AS=CS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Hh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await x2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Pg("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return window}function N2(t){or().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function P2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b2(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function O2(){return kS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebaseLocalStorageDb",D2=1,Yc="firebaseLocalStorage",RS="fbase_key";class jl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gh(t,e){return t.transaction([Yc],e?"readwrite":"readonly").objectStore(Yc)}function M2(){const t=indexedDB.deleteDatabase(xS);return new jl(t).toPromise()}function Dp(){const t=indexedDB.open(xS,D2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yc,{keyPath:RS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yc)?e(r):(r.close(),await M2(),e(await Dp()))})})}async function N0(t,e,n){const r=Gh(t,!0).put({[RS]:e,value:n});return new jl(r).toPromise()}async function V2(t,e){const n=Gh(t,!1).get(e),r=await new jl(n).toPromise();return r===void 0?null:r.value}function P0(t,e){const n=Gh(t,!0).delete(e);return new jl(n).toPromise()}const L2=800,F2=3;class NS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>F2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hh._getInstance(O2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await P2(),!this.activeServiceWorker)return;this.sender=new R2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||b2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dp();return await N0(e,Qc,"1"),await P0(e,Qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>N0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>V2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>P0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Gh(s,!1).getAll();return new jl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NS.type="LOCAL";const j2=NS;new Vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t,e){return e?Ir(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends Rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B2(t){return ES(t.auth,new bg(t),t.bypassAuthState)}function z2(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),_2(n,new bg(t),t.bypassAuthState)}async function W2(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),g2(n,new bg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B2;case"linkViaPopup":case"linkViaRedirect":return W2;case"reauthViaPopup":case"reauthViaRedirect":return z2;default:Wn(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Vl(2e3,1e4);class Hi extends PS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Hi.currentPopupAction&&Hi.currentPopupAction.cancel(),Hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Dr(this.filter.length===1,"Popup operations only handle one event");const e=Pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q2.get())};e()}}Hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="pendingRedirect",ac=new Map;class H2 extends PS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ac.get(this.auth._key());if(!e){try{const r=await G2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ac.set(this.auth._key(),e)}return this.bypassAuthState||ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G2(t,e){const n=Y2(e),r=Q2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function K2(t,e){ac.set(t._key(),e)}function Q2(t){return Ir(t._redirectPersistence)}function Y2(t){return oc($2,t.config.apiKey,t.name)}async function X2(t,e,n=!1){if(er(t.app))return Promise.reject(Cr(t));const r=Ti(t),s=U2(r,e),o=await new H2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=10*60*1e3;class Z2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!bS(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ir(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J2&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}}function b0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function eO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(t,e={}){return Ds(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rO=/^https?/;async function sO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tO(t);for(const n of e)try{if(iO(n))return}catch{}Wn(t,"unauthorized-domain")}function iO(t){const e=bp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rO.test(n))return!1;if(nO.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=new Vl(3e4,6e4);function O0(){const t=or().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aO(t){return new Promise((e,n)=>{var r,s,i;function o(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),n(ir(t,"network-request-failed"))},timeout:oO.get()})}if(!((s=(r=or().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=or().gapi)===null||i===void 0)&&i.load)o();else{const a=Jb("iframefcb");return or()[a]=()=>{gapi.load?o():n(ir(t,"network-request-failed"))},yS(`${Xb()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw lc=null,e})}let lc=null;function lO(t){return lc=lc||aO(t),lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=new Vl(5e3,15e3),cO="__/auth/iframe",hO="emulator/auth/iframe",dO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pO(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ag(e,hO):`https://${t.config.authDomain}/${cO}`,r={apiKey:e.apiKey,appName:t.name,v:Vo},s=fO.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${kl(r).slice(1)}`}async function mO(t){const e=await lO(t),n=or().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:pO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dO,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ir(t,"network-request-failed"),a=or().setTimeout(()=>{i(o)},uO.get());function l(){or().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_O=500,yO=600,vO="_blank",wO="http://localhost";class D0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TO(t,e,n,r=_O,s=yO){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},gO),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Lt().toLowerCase();n&&(a=hS(c)?vO:n),uS(c)&&(e=e||wO,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(zb(c)&&a!=="_self")return EO(e||"",a),new D0(null);const d=window.open(e||"",a,h);se(d,t,"popup-blocked");try{d.focus()}catch{}return new D0(d)}function EO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="__/auth/handler",SO="emulator/auth/handler",CO=encodeURIComponent("fac");async function M0(t,e,n,r,s,i){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vo,eventId:s};if(e instanceof wS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Fl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${CO}=${encodeURIComponent(l)}`:"";return`${AO(t)}?${kl(a).slice(1)}${c}`}function AO({config:t}){return t.emulator?Ag(t,SO):`https://${t.authDomain}/${IO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="webStorageSupport";class kO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AS,this._completeRedirectFn=X2,this._overrideRedirectResult=K2}async _openPopup(e,n,r,s){var i;Dr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await M0(e,n,r,bp(),s);return TO(e,o,Pg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await M0(e,n,r,bp(),s);return N2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Dr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mO(e),r=new Z2(e);return n.register("authEvent",s=>(se(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pf,{type:pf},s=>{var i;const o=(i=s?.[0])===null||i===void 0?void 0:i[pf];o!==void 0&&n(!!o),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gS()||cS()||xg()}}const xO=kO;var V0="@firebase/auth",L0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PO(t){go(new li("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_S(t)},c=new Kb(r,s,i,l);return r2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),go(new li("auth-internal",e=>{const n=Ti(e.getProvider("auth").getImmediate());return(r=>new RO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(V0,L0,NO(t)),ms(V0,L0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=5*60,OO=SE("authIdTokenMaxAge")||bO;let F0=null;const DO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OO)return;const s=n?.token;F0!==s&&(F0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MO(t=xE()){const e=zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=n2(t,{popupRedirectResolver:xO,persistence:[j2,k2,AS]}),r=SE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=DO(i.toString());E2(n,o,()=>o(n.currentUser)),T2(n,a=>o(a))}}const s=EE("auth");return s&&s2(n,`http://${s}`),n}function VO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Qb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ir("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",VO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PO("Browser");const OS="15.1.22",j0=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),U0=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),Mp=(t,e)=>({startTime:e,type:"setValue",value:t}),DS=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),MS=(t,e,{startTime:n,target:r,timeConstant:s})=>r+(e-r)*Math.exp((n-t)/s),Gi=t=>t.type==="exponentialRampToValue",Xc=t=>t.type==="linearRampToValue",Qr=t=>Gi(t)||Xc(t),Og=t=>t.type==="setValue",_r=t=>t.type==="setValueCurve",Jc=(t,e,n,r)=>{const s=t[e];return s===void 0?r:Qr(s)||Og(s)?s.value:_r(s)?s.values[s.values.length-1]:MS(n,Jc(t,e-1,s.startTime,r),s)},B0=(t,e,n,r,s)=>n===void 0?[r.insertTime,s]:Qr(n)?[n.endTime,n.value]:Og(n)?[n.startTime,n.value]:_r(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Jc(t,e-1,n.startTime,s)],Vp=t=>t.type==="cancelAndHold",Lp=t=>t.type==="cancelScheduledValues",Hr=t=>Vp(t)||Lp(t)?t.cancelTime:Gi(t)||Xc(t)?t.endTime:t.startTime,z0=(t,e,n,{endTime:r,value:s})=>n===s?s:0<n&&0<s||n<0&&s<0?n*(s/n)**((t-e)/(r-e)):0,W0=(t,e,n,{endTime:r,value:s})=>n+(t-e)/(r-e)*(s-n),LO=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},FO=(t,{duration:e,startTime:n,values:r})=>{const s=(t-n)/e*(r.length-1);return LO(r,s)},Lu=t=>t.type==="setTarget";class jO{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Hr(e);if(Vp(e)||Lp(e)){const r=this._automationEvents.findIndex(i=>Lp(e)&&_r(i)?i.startTime+i.duration>=n:Hr(i)>=n),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Vp(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&Qr(s)){if(i!==void 0&&Lu(i))throw new Error("The internal list is malformed.");const o=i===void 0?s.insertTime:_r(i)?i.startTime+i.duration:Hr(i),a=i===void 0?this._defaultValue:_r(i)?i.values[i.values.length-1]:i.value,l=Gi(s)?z0(n,o,a,s):W0(n,o,a,s),c=Gi(s)?j0(l,n,this._currenTime):U0(l,n,this._currenTime);this._automationEvents.push(c)}if(i!==void 0&&Lu(i)&&this._automationEvents.push(Mp(this.getValue(n),n)),i!==void 0&&_r(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,l=Math.max(2,1+Math.ceil(o*a)),c=o/(l-1)*a,h=i.values.slice(0,l);if(c<1)for(let d=1;d<l;d+=1){const p=c*d%1;h[d]=i.values[d-1]*(1-p)+i.values[d]*p}this._automationEvents[this._automationEvents.length-1]=DS(h,i.startTime,o)}}}else{const r=this._automationEvents.findIndex(o=>Hr(o)>n),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&_r(s)&&Hr(s)+s.duration>n)return!1;const i=Gi(e)?j0(e.value,e.endTime,this._currenTime):Xc(e)?U0(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(_r(e)&&n+e.duration>Hr(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Hr(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),s=r[0];Lu(s)&&r.unshift(Mp(Jc(this._automationEvents,n-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Hr(o)>e),r=this._automationEvents[n],s=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(i!==void 0&&Lu(i)&&(r===void 0||!Qr(r)||r.insertTime>e))return MS(e,Jc(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Og(i)&&(r===void 0||!Qr(r)))return i.value;if(i!==void 0&&_r(i)&&(r===void 0||!Qr(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?FO(e,i):i.values[i.values.length-1];if(i!==void 0&&Qr(i)&&(r===void 0||!Qr(r)))return i.value;if(r!==void 0&&Gi(r)){const[o,a]=B0(this._automationEvents,s,i,r,this._defaultValue);return z0(e,o,a,r)}if(r!==void 0&&Xc(r)){const[o,a]=B0(this._automationEvents,s,i,r,this._defaultValue);return W0(e,o,a,r)}return this._defaultValue}}const UO=t=>({cancelTime:t,type:"cancelAndHold"}),BO=t=>({cancelTime:t,type:"cancelScheduledValues"}),zO=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),WO=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),qO=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),$O=()=>new DOMException("","AbortError"),HO=t=>(e,n,[r,s,i],o)=>{t(e[s],[n,r,i],a=>a[0]===n&&a[1]===r,o)},GO=t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},KO=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Co=new WeakSet,VS=new WeakMap,Dg=new WeakMap,LS=new WeakMap,Mg=new WeakMap,Kh=new WeakMap,FS=new WeakMap,Fp=new WeakMap,jp=new WeakMap,Up=new WeakMap,jS={construct(){return jS}},QO=t=>{try{const e=new Proxy(t,jS);new e}catch{return!1}return!0},q0=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,$0=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(q0);for(;s!==null;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(q0)}return[n.join(";"),r]},H0=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},G0=t=>{if(!QO(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},YO=(t,e,n,r,s,i,o,a,l,c,h,d,p)=>{let g=0;return(y,w,C={credentials:"omit"})=>{const v=h.get(y);if(v!==void 0&&v.has(w))return Promise.resolve();const T=c.get(y);if(T!==void 0){const N=T.get(w);if(N!==void 0)return N}const I=i(y),O=I.audioWorklet===void 0?s(w).then(([N,D])=>{const[E,_]=$0(N,D),S=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${_}
})})(window,'_AWGS')`;return n(S)}).then(()=>{const N=p._AWGS.pop();if(N===void 0)throw new SyntaxError;r(I.currentTime,I.sampleRate,()=>N(class{},void 0,(D,E)=>{if(D.trim()==="")throw e();const _=jp.get(I);if(_!==void 0){if(_.has(D))throw e();G0(E),H0(E.parameterDescriptors),_.set(D,E)}else G0(E),H0(E.parameterDescriptors),jp.set(I,new Map([[D,E]]))},I.sampleRate,void 0,void 0))}):Promise.all([s(w),Promise.resolve(t(d,d))]).then(([[N,D],E])=>{const _=g+1;g=_;const[S,A]=$0(N,D),q=`${S};((AudioWorkletProcessor,registerProcessor)=>{${A}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${_}',class extends AudioWorkletProcessor{process(){return !1}})`,Z=new Blob([q],{type:"application/javascript; charset=utf-8"}),Q=URL.createObjectURL(Z);return I.audioWorklet.addModule(Q,C).then(()=>{if(a(I))return I;const K=o(I);return K.audioWorklet.addModule(Q,C).then(()=>K)}).then(K=>{if(l===null)throw new SyntaxError;try{new l(K,`__sac${_}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Q))});return T===void 0?c.set(y,new Map([[w,O]])):T.set(w,O),O.then(()=>{const N=h.get(y);N===void 0?h.set(y,new Set([w])):N.add(w)}).finally(()=>{const N=c.get(y);N!==void 0&&N.delete(w)}),O}},qn=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Qh=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},US=(t,e,n,r)=>{const s=qn(t,e),i=Qh(s,o=>o[0]===n&&o[1]===r);return s.size===0&&t.delete(e),i},Ul=t=>qn(FS,t),Ao=t=>{if(Co.has(t))throw new Error("The AudioNode is already stored.");Co.add(t),Ul(t).forEach(e=>e(!0))},BS=t=>"port"in t,Bl=t=>{if(!Co.has(t))throw new Error("The AudioNode is not stored.");Co.delete(t),Ul(t).forEach(e=>e(!1))},Bp=(t,e)=>{!BS(t)&&e.every(n=>n.size===0)&&Bl(t)},XO=(t,e,n,r,s,i,o,a,l,c,h,d,p)=>{const g=new WeakMap;return(y,w,C,v,T)=>{const{activeInputs:I,passiveInputs:O}=i(w),{outputs:N}=i(y),D=a(y),E=_=>{const S=l(w),A=l(y);if(_){const P=US(O,y,C,v);t(I,y,P,!1),!T&&!d(y)&&n(A,S,C,v),p(w)&&Ao(w)}else{const P=r(I,y,C,v);e(O,v,P,!1),!T&&!d(y)&&s(A,S,C,v);const b=o(w);if(b===0)h(w)&&Bp(w,I);else{const R=g.get(w);R!==void 0&&clearTimeout(R),g.set(w,setTimeout(()=>{h(w)&&Bp(w,I)},b*1e3))}}};return c(N,[w,C,v],_=>_[0]===w&&_[1]===C&&_[2]===v,!0)?(D.add(E),h(y)?t(I,y,[C,v,E],!0):e(O,v,[y,C,E],!0),!0):!1}},JO=t=>(e,n,[r,s,i],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[s,n,i]])):t(a,[s,n,i],l=>l[0]===s&&l[1]===n,o)},ZO=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)},eD=t=>(e,n)=>{t(e).add(n)},tD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},nD=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=s(a),h={...tD,...l},d=r(c,h),p=i(c)?e():null;super(a,!1,d,p),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Ft=(t,e)=>t.context===e,rD=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ft(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,c)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},Zc=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ur=()=>new DOMException("","IndexSizeError"),Vg=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?ur():r}})(t.getChannelData)},sD={numberOfChannels:1},iD=(t,e,n,r,s,i,o,a)=>{let l=null;return class zS{constructor(h){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:p,sampleRate:g}={...sD,...h};l===null&&(l=new s(1,1,44100));const y=r!==null&&e(i,i)?new r({length:d,numberOfChannels:p,sampleRate:g}):l.createBuffer(p,d,g);if(y.numberOfChannels===0)throw n();return typeof y.copyFromChannel!="function"?(o(y),Vg(y)):e(Zc,()=>Zc(y))||a(y),t.add(y),y}static[Symbol.hasInstance](h){return h!==null&&typeof h=="object"&&Object.getPrototypeOf(h)===zS.prototype||t.has(h)}}},Yt=-34028234663852886e22,Wt=-Yt,Ar=t=>Co.has(t),oD={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},aD=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,h){const d=i(c),p={...oD,...h},g=s(d,p),y=o(d),w=y?e():null;super(c,!1,g,w),this._audioBufferSourceNodeRenderer=w,this._isBufferNullified=!1,this._isBufferSet=p.buffer!==null,this._nativeAudioBufferSourceNode=g,this._onended=null,this._playbackRate=n(this,y,g.playbackRate,Wt,Yt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const h=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=h;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===h?c:d}get playbackRate(){return this._playbackRate}start(c=0,h=0,d){if(this._nativeAudioBufferSourceNode.start(c,h,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[c,h]:[c,h,d]),this.context.state!=="closed"){Ao(this);const p=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",p),Ar(this)&&Bl(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",p)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},lD=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,h)=>{let d=n(c);const p=Ft(d,h);if(!p){const g={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(h,g),o!==null&&d.start(...o),a!==null&&d.stop(a)}return i.set(h,d),p?await t(h,c.playbackRate,d.playbackRate):await r(h,c.playbackRate,d.playbackRate),await s(c,h,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(c,h)}}},uD=t=>"playbackRate"in t,cD=t=>"frequency"in t&&"gain"in t,hD=t=>"offset"in t,dD=t=>!("frequency"in t)&&"gain"in t,fD=t=>"detune"in t&&"frequency"in t&&!("gain"in t),pD=t=>"pan"in t,qt=t=>qn(VS,t),zl=t=>qn(LS,t),zp=(t,e)=>{const{activeInputs:n}=qt(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||zp(i,[...e,t])}));const r=uD(t)?[t.playbackRate]:BS(t)?Array.from(t.parameters.values()):cD(t)?[t.Q,t.detune,t.frequency,t.gain]:hD(t)?[t.offset]:dD(t)?[t.gain]:fD(t)?[t.detune,t.frequency]:pD(t)?[t.pan]:[];for(const s of r){const i=zl(s);i!==void 0&&i.activeInputs.forEach(([o])=>zp(o,e))}Ar(t)&&Bl(t)},WS=t=>{zp(t.destination,[])},mD=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),gD=(t,e,n,r,s,i,o,a,l)=>class extends t{constructor(h={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new l(h)}catch(y){throw y.code===12&&y.message==="sampleRate is not in range"?n():y}if(d===null)throw r();if(!mD(h.latencyHint))throw new TypeError(`The provided value '${h.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(h.sampleRate!==void 0&&d.sampleRate!==h.sampleRate)throw n();super(d,2);const{latencyHint:p}=h,{sampleRate:g}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:p==="balanced"?512/g:p==="interactive"||p===void 0?256/g:p==="playback"?1024/g:Math.max(2,Math.min(128,Math.round(p*g/128)))*128/g,this._nativeAudioContext=d,l.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const y=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",y)};d.addEventListener("statechange",y)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),WS(this)}))}createMediaElementSource(h){return new s(this,{mediaElement:h})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(h){return new o(this,{mediaStream:h})}createMediaStreamTrackSource(h){return new a(this,{mediaStreamTrack:h})}resume(){return this._state==="suspended"?new Promise((h,d)=>{const p=()=>{this._nativeAudioContext.removeEventListener("statechange",p),this._nativeAudioContext.state==="running"?h():this.resume().then(h,d)};this._nativeAudioContext.addEventListener("statechange",p)}):this._nativeAudioContext.resume().catch(h=>{throw h===void 0||h.code===15?e():h})}suspend(){return this._nativeAudioContext.suspend().catch(h=>{throw h===void 0?e():h})}},_D=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,h){const d=i(c),p=o(d),g=s(d,h,p),y=p?e(a):null;super(c,!1,g,y),this._isNodeOfNativeOfflineAudioContext=p,this._nativeAudioDestinationNode=g}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},yD=t=>{const e=new WeakMap,n=async(r,s)=>{const i=s.destination;return e.set(s,i),await t(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):n(r,s)}}},vD=(t,e,n,r,s,i,o,a)=>(l,c)=>{const h=c.listener,d=()=>{const N=new Float32Array(1),D=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=o(c);let _=!1,S=[0,0,-1,0,1,0],A=[0,0,0];const P=()=>{if(_)return;_=!0;const Z=r(c,256,9,0);Z.onaudioprocess=({inputBuffer:Q})=>{const K=[i(Q,N,0),i(Q,N,1),i(Q,N,2),i(Q,N,3),i(Q,N,4),i(Q,N,5)];K.some((U,z)=>U!==S[z])&&(h.setOrientation(...K),S=K);const F=[i(Q,N,6),i(Q,N,7),i(Q,N,8)];F.some((U,z)=>U!==A[z])&&(h.setPosition(...F),A=F)},D.connect(Z)},b=Z=>Q=>{Q!==S[Z]&&(S[Z]=Q,h.setOrientation(...S))},R=Z=>Q=>{Q!==A[Z]&&(A[Z]=Q,h.setPosition(...A))},q=(Z,Q,K)=>{const F=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Q});F.connect(D,0,Z),F.start(),Object.defineProperty(F.offset,"defaultValue",{get(){return Q}});const U=t({context:l},E,F.offset,Wt,Yt);return a(U,"value",z=>()=>z.call(U),z=>H=>{try{z.call(U,H)}catch(ee){if(ee.code!==9)throw ee}P(),E&&K(H)}),U.cancelAndHoldAtTime=(z=>E?()=>{throw s()}:(...H)=>{const ee=z.apply(U,H);return P(),ee})(U.cancelAndHoldAtTime),U.cancelScheduledValues=(z=>E?()=>{throw s()}:(...H)=>{const ee=z.apply(U,H);return P(),ee})(U.cancelScheduledValues),U.exponentialRampToValueAtTime=(z=>E?()=>{throw s()}:(...H)=>{const ee=z.apply(U,H);return P(),ee})(U.exponentialRampToValueAtTime),U.linearRampToValueAtTime=(z=>E?()=>{throw s()}:(...H)=>{const ee=z.apply(U,H);return P(),ee})(U.linearRampToValueAtTime),U.setTargetAtTime=(z=>E?()=>{throw s()}:(...H)=>{const ee=z.apply(U,H);return P(),ee})(U.setTargetAtTime),U.setValueAtTime=(z=>E?()=>{throw s()}:(...H)=>{const ee=z.apply(U,H);return P(),ee})(U.setValueAtTime),U.setValueCurveAtTime=(z=>E?()=>{throw s()}:(...H)=>{const ee=z.apply(U,H);return P(),ee})(U.setValueCurveAtTime),U};return{forwardX:q(0,0,b(0)),forwardY:q(1,0,b(1)),forwardZ:q(2,-1,b(2)),positionX:q(6,0,R(0)),positionY:q(7,0,R(1)),positionZ:q(8,0,R(2)),upX:q(3,0,b(3)),upY:q(4,1,b(4)),upZ:q(5,0,b(5))}},{forwardX:p,forwardY:g,forwardZ:y,positionX:w,positionY:C,positionZ:v,upX:T,upY:I,upZ:O}=h.forwardX===void 0?d():h;return{get forwardX(){return p},get forwardY(){return g},get forwardZ(){return y},get positionX(){return w},get positionY(){return C},get positionZ(){return v},get upX(){return T},get upY(){return I},get upZ(){return O}}},eh=t=>"context"in t,Wl=t=>eh(t[0]),Ei=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},K0=(t,e,[n,r],s)=>{Ei(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},Q0=(t,[e,n,r],s)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):Ei(i,[n,r],o=>o[0]===n,s)},zo=t=>"inputs"in t,th=(t,e,n,r)=>{if(zo(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},qS=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},wD=(t,e,n)=>Qh(t,r=>r[0]===e&&r[1]===n),$S=(t,e)=>{if(!Ul(t).delete(e))throw new Error("Missing the expected event listener.")},HS=(t,e,n)=>{const r=qn(t,e),s=Qh(r,i=>i[0]===n);return r.size===0&&t.delete(e),s},nh=(t,e,n,r)=>{zo(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Le=t=>qn(Dg,t),_l=t=>qn(Mg,t),pi=t=>Fp.has(t),uc=t=>!Co.has(t),Y0=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(t.destination),a.connect(s),a.disconnect(s),r.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,h=>h===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),mf=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,i===void 0?1:i+1)}n.forEach((r,s)=>e(s,r))},rh=t=>"context"in t,TD=t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const o=rh(r)?n(r,s,i):n(r,s),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:s}]):a.every(l=>l.input!==i||l.output!==s)&&a.push({input:i,output:s}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const l=a.filter(c=>c.output!==r);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(r))if(s===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(l=>l.output!==s&&(l.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(l=>{rh(o)?t.connect(o,l.output,l.input):t.connect(o,l.output)})})(t.disconnect)},ED=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=zl(e),{outputs:o}=qt(t),a=Ul(t),l=c=>{const h=Le(t),d=_l(e);if(c){const p=HS(i,t,n);K0(s,t,p,!1),!r&&!pi(t)&&h.connect(d,n)}else{const p=wD(s,t,n);Q0(i,p,!1),!r&&!pi(t)&&h.disconnect(d,n)}};return Ei(o,[e,n],c=>c[0]===e&&c[1]===n,!0)?(a.add(l),Ar(t)?K0(s,t,[n,l],!0):Q0(i,[t,n,l],!0),!0):!1},ID=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=qt(e),o=qS(s[r],t,n);return o===null?[US(i,t,n,r)[2],!1]:[o[2],!0]},SD=(t,e,n)=>{const{activeInputs:r,passiveInputs:s}=zl(e),i=qS(r,t,n);return i===null?[HS(s,t,n)[1],!1]:[i[2],!0]},Lg=(t,e,n,r,s)=>{const[i,o]=ID(t,n,r,s);if(i!==null&&($S(t,i),o&&!e&&!pi(t)&&nh(Le(t),Le(n),r,s)),Ar(n)){const{activeInputs:a}=qt(n);Bp(n,a)}},Fg=(t,e,n,r)=>{const[s,i]=SD(t,n,r);s!==null&&($S(t,s),i&&!e&&!pi(t)&&Le(t).disconnect(_l(n),r))},CD=(t,e)=>{const n=qt(t),r=[];for(const s of n.outputs)Wl(s)?Lg(t,e,...s):Fg(t,e,...s),r.push(s[0]);return n.outputs.clear(),r},AD=(t,e,n)=>{const r=qt(t),s=[];for(const i of r.outputs)i[1]===n&&(Wl(i)?Lg(t,e,...i):Fg(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s},kD=(t,e,n,r,s)=>{const i=qt(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(r===void 0||o[1]===r)&&(s===void 0||o[2]===s)).map(o=>(Wl(o)?Lg(t,e,...o):Fg(t,e,...o),i.outputs.delete(o),o[0]))},xD=(t,e,n,r,s,i,o,a,l,c,h,d,p,g,y,w)=>class extends c{constructor(v,T,I,O){super(I),this._context=v,this._nativeAudioNode=I;const N=h(v);d(N)&&n(Y0,()=>Y0(N,w))!==!0&&TD(I),Dg.set(this,I),FS.set(this,new Set),v.state!=="closed"&&T&&Ao(this),t(this,O,I)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,T=0,I=0){if(T<0||T>=this._nativeAudioNode.numberOfOutputs)throw s();const O=h(this._context),N=y(O);if(p(v)||g(v))throw i();if(eh(v)){const _=Le(v);try{const A=th(this._nativeAudioNode,_,T,I),P=uc(this);(N||P)&&this._nativeAudioNode.disconnect(...A),this.context.state!=="closed"&&!P&&uc(v)&&Ao(v)}catch(A){throw A.code===12?i():A}if(e(this,v,T,I,N)){const A=l([this],v);mf(A,r(N))}return v}const D=_l(v);if(D.name==="playbackRate"&&D.maxValue===1024)throw o();try{this._nativeAudioNode.connect(D,T),(N||uc(this))&&this._nativeAudioNode.disconnect(D,T)}catch(_){throw _.code===12?i():_}if(ED(this,v,T,N)){const _=l([this],v);mf(_,r(N))}}disconnect(v,T,I){let O;const N=h(this._context),D=y(N);if(v===void 0)O=CD(this,D);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw s();O=AD(this,D,v)}else{if(T!==void 0&&(T<0||T>=this.numberOfOutputs)||eh(v)&&I!==void 0&&(I<0||I>=v.numberOfInputs))throw s();if(O=kD(this,D,v,T,I),O.length===0)throw i()}for(const E of O){const _=l([this],E);mf(_,a)}}},RD=(t,e,n,r,s,i,o,a,l,c,h,d,p)=>(g,y,w,C=null,v=null)=>{const T=w.value,I=new jO(T),O=y?r(I):null,N={get defaultValue(){return T},get maxValue(){return C===null?w.maxValue:C},get minValue(){return v===null?w.minValue:v},get value(){return w.value},set value(D){w.value=D,N.setValueAtTime(D,g.context.currentTime)},cancelAndHoldAtTime(D){if(typeof w.cancelAndHoldAtTime=="function")O===null&&I.flush(g.context.currentTime),I.add(s(D)),w.cancelAndHoldAtTime(D);else{const E=Array.from(I).pop();O===null&&I.flush(g.context.currentTime),I.add(s(D));const _=Array.from(I).pop();w.cancelScheduledValues(D),E!==_&&_!==void 0&&(_.type==="exponentialRampToValue"?w.exponentialRampToValueAtTime(_.value,_.endTime):_.type==="linearRampToValue"?w.linearRampToValueAtTime(_.value,_.endTime):_.type==="setValue"?w.setValueAtTime(_.value,_.startTime):_.type==="setValueCurve"&&w.setValueCurveAtTime(_.values,_.startTime,_.duration))}return N},cancelScheduledValues(D){return O===null&&I.flush(g.context.currentTime),I.add(i(D)),w.cancelScheduledValues(D),N},exponentialRampToValueAtTime(D,E){if(D===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const _=g.context.currentTime;return O===null&&I.flush(_),Array.from(I).length===0&&(I.add(c(T,_)),w.setValueAtTime(T,_)),I.add(o(D,E)),w.exponentialRampToValueAtTime(D,E),N},linearRampToValueAtTime(D,E){const _=g.context.currentTime;return O===null&&I.flush(_),Array.from(I).length===0&&(I.add(c(T,_)),w.setValueAtTime(T,_)),I.add(a(D,E)),w.linearRampToValueAtTime(D,E),N},setTargetAtTime(D,E,_){return O===null&&I.flush(g.context.currentTime),I.add(l(D,E,_)),w.setTargetAtTime(D,E,_),N},setValueAtTime(D,E){return O===null&&I.flush(g.context.currentTime),I.add(c(D,E)),w.setValueAtTime(D,E),N},setValueCurveAtTime(D,E,_){const S=D instanceof Float32Array?D:new Float32Array(D);if(d!==null&&d.name==="webkitAudioContext"){const A=E+_,P=g.context.sampleRate,b=Math.ceil(E*P),R=Math.floor(A*P),q=R-b,Z=new Float32Array(q);for(let K=0;K<q;K+=1){const F=(S.length-1)/_*((b+K)/P-E),U=Math.floor(F),z=Math.ceil(F);Z[K]=U===z?S[U]:(1-(F-U))*S[U]+(1-(z-F))*S[z]}O===null&&I.flush(g.context.currentTime),I.add(h(Z,E,_)),w.setValueCurveAtTime(Z,E,_);const Q=R/P;Q<A&&p(N,Z[Z.length-1],Q),p(N,S[S.length-1],A)}else O===null&&I.flush(g.context.currentTime),I.add(h(S,E,_)),w.setValueCurveAtTime(S,E,_);return N}};return n.set(N,w),e.set(N,g),t(N,O),N},ND=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if(n.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if(n.type==="setValue"){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class GS{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const PD={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},bD=(t,e,n,r,s,i,o,a,l,c,h,d,p,g)=>class extends e{constructor(w,C,v){var T;const I=a(w),O=l(I),N=h({...PD,...v});p(N);const D=jp.get(I),E=D?.get(C),_=O||I.state!=="closed"?I:(T=o(I))!==null&&T!==void 0?T:I,S=s(_,O?null:w.baseLatency,c,C,E,N),A=O?r(C,N,E):null;super(w,!0,S,A);const P=[];S.parameters.forEach((R,q)=>{const Z=n(this,O,R);P.push([q,Z])}),this._nativeAudioWorkletNode=S,this._onprocessorerror=null,this._parameters=new GS(P),O&&t(I,this);const{activeInputs:b}=i(this);d(S,b)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(w){const C=typeof w=="function"?g(this,w):null;this._nativeAudioWorkletNode.onprocessorerror=C;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===C?w:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function sh(t,e,n,r,s){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const KS=(t,e,n,r,s)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,s):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],s)},ih=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));n.push(s)}return n},OD=(t,e)=>{const n=qn(Up,t),r=Le(e);return qn(n,r)},DD=async(t,e,n,r,s,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,l=r.channelCount*r.numberOfInputs,c=s.reduce((C,v)=>C+v,0),h=c===0?null:n.createBuffer(c,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const d=qt(t),p=await OD(n,t),g=ih(r.numberOfInputs,r.channelCount),y=ih(r.numberOfOutputs,s),w=Array.from(t.parameters.keys()).reduce((C,v)=>({...C,[v]:new Float32Array(128)}),{});for(let C=0;C<a;C+=128){if(r.numberOfInputs>0&&e!==null)for(let v=0;v<r.numberOfInputs;v+=1)for(let T=0;T<r.channelCount;T+=1)sh(e,g[v],T,T,C);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:v},T)=>{sh(e,w,v,l+T,C)});for(let v=0;v<r.numberOfInputs;v+=1)for(let T=0;T<s[v];T+=1)y[v][T].byteLength===0&&(y[v][T]=new Float32Array(128));try{const v=g.map((I,O)=>d.activeInputs[O].size===0?[]:I),T=o(C/n.sampleRate,n.sampleRate,()=>p.process(v,y,w));if(h!==null)for(let I=0,O=0;I<r.numberOfOutputs;I+=1){for(let N=0;N<s[I];N+=1)KS(h,y[I],N,O+N,C);O+=s[I]}if(!T)break}catch(v){t.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return h},MD=(t,e,n,r,s,i,o,a,l,c,h,d,p,g,y,w)=>(C,v,T)=>{const I=new WeakMap;let O=null;const N=async(D,E)=>{let _=h(D),S=null;const A=Ft(_,E),P=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(d===null){const b=P.reduce((Q,K)=>Q+K,0),R=s(E,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),q=[];for(let Q=0;Q<D.numberOfOutputs;Q+=1)q.push(r(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:P[Q]}));const Z=o(E,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});Z.connect=e.bind(null,q),Z.disconnect=l.bind(null,q),S=[R,q,Z]}else A||(_=new d(E,C));if(I.set(E,S===null?_:S[2]),S!==null){if(O===null){if(T===void 0)throw new Error("Missing the processor constructor.");if(p===null)throw new Error("Missing the native OfflineAudioContext constructor.");const K=D.channelCount*D.numberOfInputs,F=T.parameterDescriptors===void 0?0:T.parameterDescriptors.length,U=K+F;O=DD(D,U===0?null:await(async()=>{const H=new p(U,Math.ceil(D.context.length/128)*128,E.sampleRate),ee=[],me=[];for(let _e=0;_e<v.numberOfInputs;_e+=1)ee.push(o(H,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),me.push(s(H,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const Be=await Promise.all(Array.from(D.parameters.values()).map(async _e=>{const Pe=i(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_e.value});return await g(H,_e,Pe.offset),Pe})),ie=r(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,K+F)});for(let _e=0;_e<v.numberOfInputs;_e+=1){ee[_e].connect(me[_e]);for(let Pe=0;Pe<v.channelCount;Pe+=1)me[_e].connect(ie,Pe,_e*v.channelCount+Pe)}for(const[_e,Pe]of Be.entries())Pe.connect(ie,0,K+_e),Pe.start(0);return ie.connect(H.destination),await Promise.all(ee.map(_e=>y(D,H,_e))),w(H)})(),E,v,P,T,c)}const b=await O,R=n(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[q,Z,Q]=S;b!==null&&(R.buffer=b,R.start(0)),R.connect(q);for(let K=0,F=0;K<D.numberOfOutputs;K+=1){const U=Z[K];for(let z=0;z<P[K];z+=1)q.connect(U,F+z,z);F+=P[K]}return Q}if(A)for(const[b,R]of D.parameters.entries())await t(E,R,_.parameters.get(b));else for(const[b,R]of D.parameters.entries())await g(E,R,_.parameters.get(b));return await y(D,E,_),_};return{render(D,E){a(E,D);const _=I.get(E);return _!==void 0?Promise.resolve(_):N(D,E)}}},VD=(t,e,n,r,s,i,o,a,l,c,h,d,p,g,y,w,C,v,T,I)=>class extends y{constructor(N,D){super(N,D),this._nativeContext=N,this._audioWorklet=t===void 0?void 0:{addModule:(E,_)=>t(this,E,_)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(N,D,E){return new n({length:D,numberOfChannels:N,sampleRate:E})}createBufferSource(){return new r(this)}createChannelMerger(N=6){return new i(this,{numberOfInputs:N})}createChannelSplitter(N=6){return new o(this,{numberOfOutputs:N})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(N=1){return new h(this,{maxDelayTime:N})}createDynamicsCompressor(){return new d(this)}createGain(){return new p(this)}createIIRFilter(N,D){return new g(this,{feedback:D,feedforward:N})}createOscillator(){return new w(this)}createPanner(){return new C(this)}createPeriodicWave(N,D,E={disableNormalization:!1}){return new v(this,{...E,imag:D,real:N})}createStereoPanner(){return new T(this)}createWaveShaper(){return new I(this)}decodeAudioData(N,D,E){return c(this._nativeContext,N).then(_=>(typeof D=="function"&&D(_),_),_=>{throw typeof E=="function"&&E(_),_})}},LD={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},FD=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,h){const d=i(c),p={...LD,...h},g=s(d,p),y=o(d),w=y?n():null;super(c,!1,g,w),this._Q=e(this,y,g.Q,Wt,Yt),this._detune=e(this,y,g.detune,1200*Math.log2(Wt),-1200*Math.log2(Wt)),this._frequency=e(this,y,g.frequency,c.sampleRate/2,0),this._gain=e(this,y,g.gain,40*Math.log10(Wt),Yt),this._nativeBiquadFilterNode=g,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,h,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,h,d)}catch(p){throw p.code===11?r():p}if(c.length!==h.length||h.length!==d.length)throw r()}},jD=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const h=Ft(c,l);if(!h){const d={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,d)}return i.set(l,c),h?(await t(l,a.Q,c.Q),await t(l,a.detune,c.detune),await t(l,a.frequency,c.frequency),await t(l,a.gain,c.gain)):(await r(l,a.Q,c.Q),await r(l,a.detune,c.detune),await r(l,a.frequency,c.frequency),await r(l,a.gain,c.gain)),await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},UD=(t,e)=>(n,r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t.get(n);if(i!==void 0)return i;try{const o=r();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},BD={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},zD=(t,e,n,r,s)=>class extends t{constructor(o,a){const l=r(o),c={...BD,...a},h=n(l,c),d=s(l)?e():null;super(o,!1,h,d)}},WD=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ft(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,c)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},qD={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},$D=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=r(a),h=i({...qD,...l}),d=n(c,h),p=s(c)?e():null;super(a,!1,d,p)}},HD=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ft(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,c)}return r.set(o,a),await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},GD=t=>(e,n,r)=>t(n,e,r),KD=t=>(e,n,r=0,s=0)=>{const i=e[r];if(i===void 0)throw t();return rh(n)?i.connect(n,0,s):i.connect(n,0)},QD=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},YD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},XD=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={...YD,...c},p=r(h,d),g=i(h),y=g?n():null;super(l,!1,p,y),this._constantSourceNodeRenderer=y,this._nativeConstantSourceNode=p,this._offset=e(this,g,p.offset,Wt,Yt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=c;const h=this._nativeConstantSourceNode.onended;this._onended=h!==null&&h===c?l:h}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Ao(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),Ar(this)&&Bl(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},JD=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,h)=>{let d=n(c);const p=Ft(d,h);if(!p){const g={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(h,g),o!==null&&d.start(o),a!==null&&d.stop(a)}return i.set(h,d),p?await t(h,c.offset,d.offset):await r(h,c.offset,d.offset),await s(c,h,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(c,h)}}},ZD=t=>e=>(t[0]=e,t[0]),eM={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},tM=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=r(a),h={...eM,...l},d=n(c,h),g=s(c)?e():null;super(a,!1,d,g),this._isBufferNullified=!1,this._nativeConvolverNode=d,h.buffer!==null&&i(this,h.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},nM=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ft(a,o)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,c)}return r.set(o,a),zo(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},rM=(t,e)=>(n,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw i.name==="SyntaxError"?t():i}},sM=()=>new DOMException("","DataCloneError"),X0=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}catch{}finally{s()}})},iM=(t,e,n,r,s,i,o,a,l,c,h)=>(d,p)=>{const g=o(d)?d:i(d);if(s.has(p)){const y=n();return Promise.reject(y)}try{s.add(p)}catch{}return e(l,()=>l(g))?g.decodeAudioData(p).then(y=>(X0(p).catch(()=>{}),e(a,()=>a(y))||h(y),t.add(y),y)):new Promise((y,w)=>{const C=async()=>{try{await X0(p)}catch{}},v=T=>{w(T),C()};try{g.decodeAudioData(p,T=>{typeof T.copyFromChannel!="function"&&(c(T),Vg(T)),t.add(T),C().then(()=>y(T))},T=>{v(T===null?r():T)})}catch(T){v(T)}})},oM=(t,e,n,r,s,i,o,a)=>(l,c)=>{const h=e.get(l);if(h===void 0)throw new Error("Missing the expected cycle count.");const d=i(l.context),p=a(d);if(h===c){if(e.delete(l),!p&&o(l)){const g=r(l),{outputs:y}=n(l);for(const w of y)if(Wl(w)){const C=r(w[0]);t(g,C,w[1],w[2])}else{const C=s(w[0]);g.connect(C,w[1])}}}else e.set(l,h-c)},aM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},lM=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={...aM,...c},p=r(h,d),g=i(h),y=g?n(d.maxDelayTime):null;super(l,!1,p,y),this._delayTime=e(this,g,p.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},uM=(t,e,n,r,s)=>i=>{const o=new WeakMap,a=async(l,c)=>{let h=n(l);const d=Ft(h,c);if(!d){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,delayTime:h.delayTime.value,maxDelayTime:i};h=e(c,p)}return o.set(c,h),d?await t(c,l.delayTime,h.delayTime):await r(c,l.delayTime,h.delayTime),await s(l,c,h),h};return{render(l,c){const h=o.get(c);return h!==void 0?Promise.resolve(h):a(l,c)}}},cM=t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r),hM=t=>(e,n)=>{t(e).delete(n)},dM=t=>"delayTime"in t,fM=(t,e,n)=>function r(s,i){const o=eh(i)?i:n(t,i);if(dM(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>r([...s,o],l[0])).reduce((l,c)=>l.concat(c),[])},Fu=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},pM=t=>(e,n=void 0,r=void 0,s=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?Fu(t,e,n).disconnect():rh(n)?r===void 0?e.forEach(i=>i.disconnect(n)):s===void 0?Fu(t,e,r).disconnect(n,0):Fu(t,e,r).disconnect(n,0,s):r===void 0?e.forEach(i=>i.disconnect(n)):Fu(t,e,r).disconnect(n,0),mM={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},gM=(t,e,n,r,s,i,o,a)=>class extends t{constructor(c,h){const d=i(c),p={...mM,...h},g=r(d,p),y=o(d),w=y?n():null;super(c,!1,g,w),this._attack=e(this,y,g.attack),this._knee=e(this,y,g.knee),this._nativeDynamicsCompressorNode=g,this._ratio=e(this,y,g.ratio),this._release=e(this,y,g.release),this._threshold=e(this,y,g.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const h=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=h,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const h=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=h,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},_M=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const h=Ft(c,l);if(!h){const d={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,d)}return i.set(l,c),h?(await t(l,a.attack,c.attack),await t(l,a.knee,c.knee),await t(l,a.ratio,c.ratio),await t(l,a.release,c.release),await t(l,a.threshold,c.threshold)):(await r(l,a.attack,c.attack),await r(l,a.knee,c.knee),await r(l,a.ratio,c.ratio),await r(l,a.release,c.release),await r(l,a.threshold,c.threshold)),await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},yM=()=>new DOMException("","EncodingError"),vM=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const s=t.document.head;if(s===null)r(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(h,d,p,g,y)=>{if(d===a||d===t.location.href&&p===1&&g===1)return c(),r(y),!1;if(l!==null)return l(h,d,p,g,y)},i.onerror=()=>{c(),r(new SyntaxError)},i.onload=()=>{c(),n()},i.src=a,i.type="module",s.appendChild(i)}}),wM=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,s)}},TM=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},EM=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},IM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},SM=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=s(a),h={...IM,...l},d=r(c,h),p=i(c),g=p?n():null;super(a,!1,d,g),this._gain=e(this,p,d.gain,Wt,Yt)}get gain(){return this._gain}},CM=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const h=Ft(c,l);if(!h){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,d)}return i.set(l,c),h?await t(l,a.gain,c.gain):await r(l,a.gain,c.gain),await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},AM=(t,e)=>n=>e(t,n),kM=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},xM=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},RM=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},NM=t=>e=>t.get(e),gt=()=>new DOMException("","InvalidStateError"),PM=t=>e=>{const n=t.get(e);if(n===void 0)throw gt();return n},bM=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},OM=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Yh=()=>new DOMException("","InvalidAccessError"),DM=t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw Yh();return e.call(t,n,r,s)})(t.getFrequencyResponse)},MM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},VM=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=r(a),h=s(c),d={...MM,...l},p=e(c,h?null:a.baseLatency,d),g=h?n(d.feedback,d.feedforward):null;super(a,!1,p,g),DM(p),this._nativeIIRFilterNode=p,i(this,1)}getFrequencyResponse(a,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,c)}},QS=(t,e,n,r,s,i,o,a,l,c,h)=>{const d=c.length;let p=a;for(let g=0;g<d;g+=1){let y=n[0]*c[g];for(let w=1;w<s;w+=1){const C=p-w&l-1;y+=n[w]*i[C],y-=t[w]*o[C]}for(let w=s;w<r;w+=1)y+=n[w]*i[p-w&l-1];for(let w=s;w<e;w+=1)y-=t[w]*o[p-w&l-1];i[p]=c[g],o[p]=y,p=p+1&l-1,h[g]=y}return p},LM=(t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),o=s.length,a=i.length,l=Math.min(o,a);if(s[0]!==1){for(let y=0;y<o;y+=1)i[y]/=s[0];for(let y=1;y<a;y+=1)s[y]/=s[0]}const c=32,h=new Float32Array(c),d=new Float32Array(c),p=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),g=t.numberOfChannels;for(let y=0;y<g;y+=1){const w=t.getChannelData(y),C=p.getChannelData(y);h.fill(0),d.fill(0),QS(s,o,i,a,l,h,d,0,c,w,C)}return p},FM=(t,e,n,r,s)=>(i,o)=>{const a=new WeakMap;let l=null;const c=async(h,d)=>{let p=null,g=e(h);const y=Ft(g,d);if(d.createIIRFilter===void 0?p=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):y||(g=d.createIIRFilter(o,i)),a.set(d,p===null?g:p),p!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new n(h.context.destination.channelCount,h.context.length,d.sampleRate);l=(async()=>{await r(h,C,C.destination);const v=await s(C);return LM(v,d,i,o)})()}const w=await l;return p.buffer=w,p.start(0),p}return await r(h,d,g),g};return{render(h,d){const p=a.get(d);return p!==void 0?Promise.resolve(p):c(h,d)}}},jM=(t,e,n,r,s,i)=>o=>(a,l)=>{const c=t.get(a);if(c===void 0){if(!o&&i(a)){const h=r(a),{outputs:d}=n(a);for(const p of d)if(Wl(p)){const g=r(p[0]);e(h,g,p[1],p[2])}else{const g=s(p[0]);h.disconnect(g,p[1])}}t.set(a,l)}else t.set(a,c+l)},UM=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},BM=(t,e)=>n=>t.has(n)||e(n),zM=(t,e)=>n=>t.has(n)||e(n),WM=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},qM=t=>e=>t!==null&&e instanceof t,$M=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,HM=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,GM=(t,e)=>n=>t(n)||e(n),KM=t=>e=>t!==null&&e instanceof t,QM=t=>t!==null&&t.isSecureContext,YM=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw TypeError();super(i,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},XM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},JM=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i);if(r(a))throw new TypeError;const l={...XM,...o},c=e(a,l);super(i,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},ZM=(t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(r(a))throw new TypeError;super(i,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},eV=(t,e,n)=>class extends t{constructor(s,i){const o=n(s),a=e(o,i);super(s,!0,a,null)}},tV=(t,e,n,r,s,i)=>class extends n{constructor(a,l){super(a),this._nativeContext=a,Kh.set(this,a),r(a)&&s.set(a,new Set),this._destination=new t(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?a:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},yl=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},nV=(t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(o=>(a,l=0,c=0)=>{const h=i.size===0;if(e(a))return o.call(n,a,l,c),t(i,[a,l,c],d=>d[0]===a&&d[1]===l&&d[2]===c,!0),h&&r(),a;o.call(n,a,l),t(i,[a,l],d=>d[0]===a&&d[1]===l,!0),h&&r()})(n.connect),n.disconnect=(o=>(a,l,c)=>{const h=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const p of i)p[1]===a&&i.delete(p)}else{e(a)?o.call(n,a,l,c):o.call(n,a,l);for(const p of i)p[0]===a&&(l===void 0||p[1]===l)&&(c===void 0||p[2]===c)&&i.delete(p)}const d=i.size===0;h&&d&&s()})(n.disconnect),n},je=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},ht=(t,e)=>{je(t,e,"channelCount"),je(t,e,"channelCountMode"),je(t,e,"channelInterpretation")},J0=t=>typeof t.getFloatTimeDomainData=="function",rV=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=(n[s]-128)*.0078125;return e}},sV=(t,e)=>(n,r)=>{const s=n.createAnalyser();if(ht(s,r),!(r.maxDecibels>r.minDecibels))throw e();return je(s,r,"fftSize"),je(s,r,"maxDecibels"),je(s,r,"minDecibels"),je(s,r,"smoothingTimeConstant"),t(J0,()=>J0(s))||rV(s),s},iV=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Qe=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},oV=t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw gt();e.call(t,r,s,i),n=!0}})(t.start)},jg=t=>{t.start=(e=>(n=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},Ug=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},aV=(t,e,n,r,s,i,o,a,l,c,h)=>(d,p)=>{const g=d.createBufferSource();return ht(g,p),Qe(g,p,"playbackRate"),je(g,p,"buffer"),je(g,p,"loop"),je(g,p,"loopEnd"),je(g,p,"loopStart"),e(n,()=>n(d))||oV(g),e(r,()=>r(d))||l(g),e(s,()=>s(d))||c(g,d),e(i,()=>i(d))||jg(g),e(o,()=>o(d))||h(g,d),e(a,()=>a(d))||Ug(g),t(d,g),g},lV=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,uV=(t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const o=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{i.channelCount=l}catch(c){if(l>i.maxChannelCount)throw c}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},cV=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,hV=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},dV=(t,e,n,r,s)=>(i,o,a,l,c,h)=>{if(a!==null)try{const d=new a(i,l,h),p=new Map;let g=null;if(Object.defineProperties(d,{channelCount:{get:()=>h.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>g,set:y=>{typeof g=="function"&&d.removeEventListener("processorerror",g),g=typeof y=="function"?y:null,typeof g=="function"&&d.addEventListener("processorerror",g)}}}),d.addEventListener=(y=>(...w)=>{if(w[0]==="processorerror"){const C=typeof w[1]=="function"?w[1]:typeof w[1]=="object"&&w[1]!==null&&typeof w[1].handleEvent=="function"?w[1].handleEvent:null;if(C!==null){const v=p.get(w[1]);v!==void 0?w[1]=v:(w[1]=T=>{T.type==="error"?(Object.defineProperties(T,{type:{value:"processorerror"}}),C(T)):C(new ErrorEvent(w[0],{...T}))},p.set(C,w[1]))}}return y.call(d,"error",w[1],w[2]),y.call(d,...w)})(d.addEventListener),d.removeEventListener=(y=>(...w)=>{if(w[0]==="processorerror"){const C=p.get(w[1]);C!==void 0&&(p.delete(w[1]),w[1]=C)}return y.call(d,"error",w[1],w[2]),y.call(d,w[0],w[1],w[2])})(d.removeEventListener),h.numberOfOutputs!==0){const y=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(y).connect(i.destination),s(d,()=>y.disconnect(),()=>y.connect(i.destination))}return d}catch(d){throw d.code===11?r():d}if(c===void 0)throw r();return hV(h),e(i,o,c,h)},YS=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),fV=t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}),pV=async(t,e)=>{const n=await fV(e);return new t(n)},mV=(t,e,n,r)=>{let s=Up.get(t);s===void 0&&(s=new WeakMap,Up.set(t,s));const i=pV(n,r);return s.set(e,i),i},gV=(t,e,n,r,s,i,o,a,l,c,h,d,p)=>(g,y,w,C)=>{if(C.numberOfInputs===0&&C.numberOfOutputs===0)throw l();const v=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(v.some($=>$<1))throw l();if(v.length!==C.numberOfOutputs)throw e();if(C.channelCountMode!=="explicit")throw l();const T=C.channelCount*C.numberOfInputs,I=v.reduce(($,re)=>$+re,0),O=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length;if(T+O>6||I>6)throw l();const N=new MessageChannel,D=[],E=[];for(let $=0;$<C.numberOfInputs;$+=1)D.push(o(g,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),E.push(s(g,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const _=[];if(w.parameterDescriptors!==void 0)for(const{defaultValue:$,maxValue:re,minValue:Xe,name:be}of w.parameterDescriptors){const ye=i(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:C.parameterData[be]!==void 0?C.parameterData[be]:$===void 0?0:$});Object.defineProperties(ye.offset,{defaultValue:{get:()=>$===void 0?0:$},maxValue:{get:()=>re===void 0?Wt:re},minValue:{get:()=>Xe===void 0?Yt:Xe}}),_.push(ye)}const S=r(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,T+O)}),A=YS(y,g.sampleRate),P=a(g,A,T+O,Math.max(1,I)),b=s(g,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),R=[];for(let $=0;$<C.numberOfOutputs;$+=1)R.push(r(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[$]}));for(let $=0;$<C.numberOfInputs;$+=1){D[$].connect(E[$]);for(let re=0;re<C.channelCount;re+=1)E[$].connect(S,re,$*C.channelCount+re)}const q=new GS(w.parameterDescriptors===void 0?[]:w.parameterDescriptors.map(({name:$},re)=>{const Xe=_[re];return Xe.connect(S,0,T+re),Xe.start(0),[$,Xe.offset]}));S.connect(P);let Z=C.channelInterpretation,Q=null;const K=C.numberOfOutputs===0?[P]:R,F={get bufferSize(){return A},get channelCount(){return C.channelCount},set channelCount($){throw n()},get channelCountMode(){return C.channelCountMode},set channelCountMode($){throw n()},get channelInterpretation(){return Z},set channelInterpretation($){for(const re of D)re.channelInterpretation=$;Z=$},get context(){return P.context},get inputs(){return D},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get onprocessorerror(){return Q},set onprocessorerror($){typeof Q=="function"&&F.removeEventListener("processorerror",Q),Q=typeof $=="function"?$:null,typeof Q=="function"&&F.addEventListener("processorerror",Q)},get parameters(){return q},get port(){return N.port2},addEventListener(...$){return P.addEventListener($[0],$[1],$[2])},connect:t.bind(null,K),disconnect:c.bind(null,K),dispatchEvent(...$){return P.dispatchEvent($[0])},removeEventListener(...$){return P.removeEventListener($[0],$[1],$[2])}},U=new Map;N.port1.addEventListener=($=>(...re)=>{if(re[0]==="message"){const Xe=typeof re[1]=="function"?re[1]:typeof re[1]=="object"&&re[1]!==null&&typeof re[1].handleEvent=="function"?re[1].handleEvent:null;if(Xe!==null){const be=U.get(re[1]);be!==void 0?re[1]=be:(re[1]=ye=>{h(g.currentTime,g.sampleRate,()=>Xe(ye))},U.set(Xe,re[1]))}}return $.call(N.port1,re[0],re[1],re[2])})(N.port1.addEventListener),N.port1.removeEventListener=($=>(...re)=>{if(re[0]==="message"){const Xe=U.get(re[1]);Xe!==void 0&&(U.delete(re[1]),re[1]=Xe)}return $.call(N.port1,re[0],re[1],re[2])})(N.port1.removeEventListener);let z=null;Object.defineProperty(N.port1,"onmessage",{get:()=>z,set:$=>{typeof z=="function"&&N.port1.removeEventListener("message",z),z=typeof $=="function"?$:null,typeof z=="function"&&(N.port1.addEventListener("message",z),N.port1.start())}}),w.prototype.port=N.port1;let H=null;mV(g,F,w,C).then($=>H=$);const me=ih(C.numberOfInputs,C.channelCount),Be=ih(C.numberOfOutputs,v),ie=w.parameterDescriptors===void 0?[]:w.parameterDescriptors.reduce(($,{name:re})=>({...$,[re]:new Float32Array(128)}),{});let _e=!0;const Pe=()=>{C.numberOfOutputs>0&&P.disconnect(b);for(let $=0,re=0;$<C.numberOfOutputs;$+=1){const Xe=R[$];for(let be=0;be<v[$];be+=1)b.disconnect(Xe,re+be,be);re+=v[$]}},te=new Map;P.onaudioprocess=({inputBuffer:$,outputBuffer:re})=>{if(H!==null){const Xe=d(F);for(let be=0;be<A;be+=128){for(let ye=0;ye<C.numberOfInputs;ye+=1)for(let xe=0;xe<C.channelCount;xe+=1)sh($,me[ye],xe,xe,be);w.parameterDescriptors!==void 0&&w.parameterDescriptors.forEach(({name:ye},xe)=>{sh($,ie,ye,T+xe,be)});for(let ye=0;ye<C.numberOfInputs;ye+=1)for(let xe=0;xe<v[ye];xe+=1)Be[ye][xe].byteLength===0&&(Be[ye][xe]=new Float32Array(128));try{const ye=me.map((jt,Qn)=>{if(Xe[Qn].size>0)return te.set(Qn,A/128),jt;const Fs=te.get(Qn);return Fs===void 0?[]:(jt.every(Jl=>Jl.every(dt=>dt===0))&&(Fs===1?te.delete(Qn):te.set(Qn,Fs-1)),jt)});_e=h(g.currentTime+be/g.sampleRate,g.sampleRate,()=>H.process(ye,Be,ie));for(let jt=0,Qn=0;jt<C.numberOfOutputs;jt+=1){for(let fr=0;fr<v[jt];fr+=1)KS(re,Be[jt],fr,Qn+fr,be);Qn+=v[jt]}}catch(ye){_e=!1,F.dispatchEvent(new ErrorEvent("processorerror",{colno:ye.colno,filename:ye.filename,lineno:ye.lineno,message:ye.message}))}if(!_e){for(let ye=0;ye<C.numberOfInputs;ye+=1){D[ye].disconnect(E[ye]);for(let xe=0;xe<C.channelCount;xe+=1)E[be].disconnect(S,xe,ye*C.channelCount+xe)}if(w.parameterDescriptors!==void 0){const ye=w.parameterDescriptors.length;for(let xe=0;xe<ye;xe+=1){const jt=_[xe];jt.disconnect(S,0,T+xe),jt.stop()}}S.disconnect(P),P.onaudioprocess=null,dr?Pe():Kn();break}}}};let dr=!1;const _n=o(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),xn=()=>P.connect(_n).connect(g.destination),Kn=()=>{P.disconnect(_n),_n.disconnect()},Qo=()=>{if(_e){Kn(),C.numberOfOutputs>0&&P.connect(b);for(let $=0,re=0;$<C.numberOfOutputs;$+=1){const Xe=R[$];for(let be=0;be<v[$];be+=1)b.connect(Xe,re+be,be);re+=v[$]}}dr=!0},Yo=()=>{_e&&(xn(),Pe()),dr=!1};return xn(),p(F,Qo,Yo)},XS=(t,e)=>{const n=t.createBiquadFilter();return ht(n,e),Qe(n,e,"Q"),Qe(n,e,"detune"),Qe(n,e,"frequency"),Qe(n,e,"gain"),je(n,e,"type"),n},_V=(t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,s),ht(s,r),s},yV=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw gt()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw gt()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw gt()}})},ql=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return ht(n,e),yV(n),n},vV=(t,e,n,r,s)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return ht(a,o),Qe(a,o,"offset"),e(r,()=>r(i))||jg(a),e(s,()=>s(i))||Ug(a),t(i,a),a},Wo=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),wV=(t,e,n,r)=>(s,{offset:i,...o})=>{const a=s.createBuffer(1,2,44100),l=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(s,{...o,gain:i}),h=a.getChannelData(0);h[0]=1,h[1]=1,l.buffer=a,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(y){c.channelCount=y},get channelCountMode(){return c.channelCountMode},set channelCountMode(y){c.channelCountMode=y},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(y){c.channelInterpretation=y},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(y){l.onended=y},addEventListener(...y){return l.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return l.dispatchEvent(y[0])},removeEventListener(...y){return l.removeEventListener(y[0],y[1],y[2])},start(y=0){l.start.call(l,y)},stop(y=0){l.stop.call(l,y)}},p=()=>l.connect(c),g=()=>l.disconnect(c);return t(s,l),r(Wo(d,c),p,g)},TV=(t,e)=>(n,r)=>{const s=n.createConvolver();if(ht(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),je(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw t();return i.call(s,o)}),r.channelCountMode==="max"))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if(o==="max")throw t();return i.call(s,o)}),s},JS=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return ht(n,e),Qe(n,e,"delayTime"),n},EV=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(ht(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Qe(r,n,"attack"),Qe(r,n,"knee"),Qe(r,n,"ratio"),Qe(r,n,"release"),Qe(r,n,"threshold"),r},on=(t,e)=>{const n=t.createGain();return ht(n,e),Qe(n,e,"gain"),n},IV=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return ht(s,r),s};function SV(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function CV(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Z0(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=CV(n,e),n[0]+=t[r];return n}const AV=(t,e,n,r)=>(s,i,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:h})=>{const d=YS(i,s.sampleRate),p=c instanceof Float64Array?c:new Float64Array(c),g=h instanceof Float64Array?h:new Float64Array(h),y=p.length,w=g.length,C=Math.min(y,w);if(y===0||y>20)throw r();if(p[0]===0)throw e();if(w===0||w>20)throw r();if(g[0]===0)throw e();if(p[0]!==1){for(let _=0;_<w;_+=1)g[_]/=p[0];for(let _=1;_<y;_+=1)p[_]/=p[0]}const v=n(s,d,o,o);v.channelCount=o,v.channelCountMode=a,v.channelInterpretation=l;const T=32,I=[],O=[],N=[];for(let _=0;_<o;_+=1){I.push(0);const S=new Float32Array(T),A=new Float32Array(T);S.fill(0),A.fill(0),O.push(S),N.push(A)}v.onaudioprocess=_=>{const S=_.inputBuffer,A=_.outputBuffer,P=S.numberOfChannels;for(let b=0;b<P;b+=1){const R=S.getChannelData(b),q=A.getChannelData(b);I[b]=QS(p,y,g,w,C,O[b],N[b],I[b],T,R,q)}};const D=s.sampleRate/2;return Wo({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(_){v.channelCount=_},get channelCountMode(){return v.channelCountMode},set channelCountMode(_){v.channelCountMode=_},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(_){v.channelInterpretation=_},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(..._){return v.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return v.dispatchEvent(_[0])},getFrequencyResponse(_,S,A){if(_.length!==S.length||S.length!==A.length)throw t();const P=_.length;for(let b=0;b<P;b+=1){const R=-Math.PI*(_[b]/D),q=[Math.cos(R),Math.sin(R)],Z=Z0(g,q),Q=Z0(p,q),K=SV(Z,Q);S[b]=Math.sqrt(K[0]*K[0]+K[1]*K[1]),A[b]=Math.atan2(K[1],K[0])}},removeEventListener(..._){return v.removeEventListener(_[0],_[1],_[2])}},v)},kV=(t,e)=>t.createMediaElementSource(e.mediaElement),xV=(t,e)=>{const n=t.createMediaStreamDestination();return ht(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},RV=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},NV=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},PV=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,bV=(t,e,n,r,s,i)=>(o,a)=>{const l=o.createOscillator();return ht(l,a),Qe(l,a,"detune"),Qe(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):je(l,a,"type"),e(n,()=>n(o))||jg(l),e(r,()=>r(o))||i(l,o),e(s,()=>s(o))||Ug(l),t(o,l),l},OV=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(ht(r,n),Qe(r,n,"orientationX"),Qe(r,n,"orientationY"),Qe(r,n,"orientationZ"),Qe(r,n,"positionX"),Qe(r,n,"positionY"),Qe(r,n,"positionZ"),je(r,n,"coneInnerAngle"),je(r,n,"coneOuterAngle"),je(r,n,"coneOuterGain"),je(r,n,"distanceModel"),je(r,n,"maxDistance"),je(r,n,"panningModel"),je(r,n,"refDistance"),je(r,n,"rolloffFactor"),r)},DV=(t,e,n,r,s,i,o,a,l,c)=>(h,{coneInnerAngle:d,coneOuterAngle:p,coneOuterGain:g,distanceModel:y,maxDistance:w,orientationX:C,orientationY:v,orientationZ:T,panningModel:I,positionX:O,positionY:N,positionZ:D,refDistance:E,rolloffFactor:_,...S})=>{const A=h.createPanner();if(S.channelCount>2||S.channelCountMode==="max")throw o();ht(A,S);const P={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},b=n(h,{...P,channelInterpretation:"speakers",numberOfInputs:6}),R=r(h,{...S,gain:1}),q=r(h,{...P,gain:1}),Z=r(h,{...P,gain:0}),Q=r(h,{...P,gain:0}),K=r(h,{...P,gain:0}),F=r(h,{...P,gain:0}),U=r(h,{...P,gain:0}),z=s(h,256,6,1),H=i(h,{...P,curve:new Float32Array([1,1]),oversample:"none"});let ee=[C,v,T],me=[O,N,D];const Be=new Float32Array(1);z.onaudioprocess=({inputBuffer:te})=>{const dr=[l(te,Be,0),l(te,Be,1),l(te,Be,2)];dr.some((xn,Kn)=>xn!==ee[Kn])&&(A.setOrientation(...dr),ee=dr);const _n=[l(te,Be,3),l(te,Be,4),l(te,Be,5)];_n.some((xn,Kn)=>xn!==me[Kn])&&(A.setPosition(..._n),me=_n)},Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0});const ie={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(te){if(te>2)throw o();R.channelCount=te,A.channelCount=te},get channelCountMode(){return A.channelCountMode},set channelCountMode(te){if(te==="max")throw o();R.channelCountMode=te,A.channelCountMode=te},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(te){R.channelInterpretation=te,A.channelInterpretation=te},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(te){A.coneInnerAngle=te},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(te){A.coneOuterAngle=te},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(te){if(te<0||te>1)throw e();A.coneOuterGain=te},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(te){A.distanceModel=te},get inputs(){return[R]},get maxDistance(){return A.maxDistance},set maxDistance(te){if(te<0)throw new RangeError;A.maxDistance=te},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return q.gain},get orientationY(){return Z.gain},get orientationZ(){return Q.gain},get panningModel(){return A.panningModel},set panningModel(te){A.panningModel=te},get positionX(){return K.gain},get positionY(){return F.gain},get positionZ(){return U.gain},get refDistance(){return A.refDistance},set refDistance(te){if(te<0)throw new RangeError;A.refDistance=te},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(te){if(te<0)throw new RangeError;A.rolloffFactor=te},addEventListener(...te){return R.addEventListener(te[0],te[1],te[2])},dispatchEvent(...te){return R.dispatchEvent(te[0])},removeEventListener(...te){return R.removeEventListener(te[0],te[1],te[2])}};d!==ie.coneInnerAngle&&(ie.coneInnerAngle=d),p!==ie.coneOuterAngle&&(ie.coneOuterAngle=p),g!==ie.coneOuterGain&&(ie.coneOuterGain=g),y!==ie.distanceModel&&(ie.distanceModel=y),w!==ie.maxDistance&&(ie.maxDistance=w),C!==ie.orientationX.value&&(ie.orientationX.value=C),v!==ie.orientationY.value&&(ie.orientationY.value=v),T!==ie.orientationZ.value&&(ie.orientationZ.value=T),I!==ie.panningModel&&(ie.panningModel=I),O!==ie.positionX.value&&(ie.positionX.value=O),N!==ie.positionY.value&&(ie.positionY.value=N),D!==ie.positionZ.value&&(ie.positionZ.value=D),E!==ie.refDistance&&(ie.refDistance=E),_!==ie.rolloffFactor&&(ie.rolloffFactor=_),(ee[0]!==1||ee[1]!==0||ee[2]!==0)&&A.setOrientation(...ee),(me[0]!==0||me[1]!==0||me[2]!==0)&&A.setPosition(...me);const _e=()=>{R.connect(A),t(R,H,0,0),H.connect(q).connect(b,0,0),H.connect(Z).connect(b,0,1),H.connect(Q).connect(b,0,2),H.connect(K).connect(b,0,3),H.connect(F).connect(b,0,4),H.connect(U).connect(b,0,5),b.connect(z).connect(h.destination)},Pe=()=>{R.disconnect(A),a(R,H,0,0),H.disconnect(q),q.disconnect(b),H.disconnect(Z),Z.disconnect(b),H.disconnect(Q),Q.disconnect(b),H.disconnect(K),K.disconnect(b),H.disconnect(F),F.disconnect(b),H.disconnect(U),U.disconnect(b),b.disconnect(z),z.disconnect(h.destination)};return c(Wo(ie,A),_e,Pe)},MV=t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),o=s instanceof Float32Array?s:new Float32Array(s),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},$l=(t,e,n,r)=>t.createScriptProcessor(e,n,r),VV=(t,e)=>(n,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const i=n.createStereoPanner();return ht(i,r),Qe(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i},LV=(t,e,n,r,s,i)=>{const a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},h={...c,oversample:"none"},d=(y,w,C,v)=>{const T=new Float32Array(16385),I=new Float32Array(16385);for(let S=0;S<16385;S+=1){const A=S/16384*l;T[S]=Math.cos(A),I[S]=Math.sin(A)}const O=n(y,{...c,gain:0}),N=r(y,{...h,curve:T}),D=r(y,{...h,curve:a}),E=n(y,{...c,gain:0}),_=r(y,{...h,curve:I});return{connectGraph(){w.connect(O),w.connect(D.inputs===void 0?D:D.inputs[0]),w.connect(E),D.connect(C),C.connect(N.inputs===void 0?N:N.inputs[0]),C.connect(_.inputs===void 0?_:_.inputs[0]),N.connect(O.gain),_.connect(E.gain),O.connect(v,0,0),E.connect(v,0,1)},disconnectGraph(){w.disconnect(O),w.disconnect(D.inputs===void 0?D:D.inputs[0]),w.disconnect(E),D.disconnect(C),C.disconnect(N.inputs===void 0?N:N.inputs[0]),C.disconnect(_.inputs===void 0?_:_.inputs[0]),N.disconnect(O.gain),_.disconnect(E.gain),O.disconnect(v,0,0),E.disconnect(v,0,1)}}},p=(y,w,C,v)=>{const T=new Float32Array(16385),I=new Float32Array(16385),O=new Float32Array(16385),N=new Float32Array(16385),D=Math.floor(16385/2);for(let K=0;K<16385;K+=1)if(K>D){const F=(K-D)/(16384-D)*l;T[K]=Math.cos(F),I[K]=Math.sin(F),O[K]=0,N[K]=1}else{const F=K/(16384-D)*l;T[K]=1,I[K]=0,O[K]=Math.cos(F),N[K]=Math.sin(F)}const E=e(y,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),_=n(y,{...c,gain:0}),S=r(y,{...h,curve:T}),A=n(y,{...c,gain:0}),P=r(y,{...h,curve:I}),b=r(y,{...h,curve:a}),R=n(y,{...c,gain:0}),q=r(y,{...h,curve:O}),Z=n(y,{...c,gain:0}),Q=r(y,{...h,curve:N});return{connectGraph(){w.connect(E),w.connect(b.inputs===void 0?b:b.inputs[0]),E.connect(_,0),E.connect(A,0),E.connect(R,1),E.connect(Z,1),b.connect(C),C.connect(S.inputs===void 0?S:S.inputs[0]),C.connect(P.inputs===void 0?P:P.inputs[0]),C.connect(q.inputs===void 0?q:q.inputs[0]),C.connect(Q.inputs===void 0?Q:Q.inputs[0]),S.connect(_.gain),P.connect(A.gain),q.connect(R.gain),Q.connect(Z.gain),_.connect(v,0,0),R.connect(v,0,0),A.connect(v,0,1),Z.connect(v,0,1)},disconnectGraph(){w.disconnect(E),w.disconnect(b.inputs===void 0?b:b.inputs[0]),E.disconnect(_,0),E.disconnect(A,0),E.disconnect(R,1),E.disconnect(Z,1),b.disconnect(C),C.disconnect(S.inputs===void 0?S:S.inputs[0]),C.disconnect(P.inputs===void 0?P:P.inputs[0]),C.disconnect(q.inputs===void 0?q:q.inputs[0]),C.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),S.disconnect(_.gain),P.disconnect(A.gain),q.disconnect(R.gain),Q.disconnect(Z.gain),_.disconnect(v,0,0),R.disconnect(v,0,0),A.disconnect(v,0,1),Z.disconnect(v,0,1)}}},g=(y,w,C,v,T)=>{if(w===1)return d(y,C,v,T);if(w===2)return p(y,C,v,T);throw s()};return(y,{channelCount:w,channelCountMode:C,pan:v,...T})=>{if(C==="max")throw s();const I=t(y,{...T,channelCount:1,channelCountMode:C,numberOfInputs:2}),O=n(y,{...T,channelCount:w,channelCountMode:C,gain:1}),N=n(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:D,disconnectGraph:E}=g(y,w,O,N,I);Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"maxValue",{get:()=>1}),Object.defineProperty(N.gain,"minValue",{get:()=>-1});const _={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(b){O.channelCount!==b&&(S&&E(),{connectGraph:D,disconnectGraph:E}=g(y,b,O,N,I),S&&D()),O.channelCount=b},get channelCountMode(){return O.channelCountMode},set channelCountMode(b){if(b==="clamped-max"||b==="max")throw s();O.channelCountMode=b},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(b){O.channelInterpretation=b},get context(){return O.context},get inputs(){return[O]},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get pan(){return N.gain},addEventListener(...b){return O.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return O.dispatchEvent(b[0])},removeEventListener(...b){return O.removeEventListener(b[0],b[1],b[2])}};let S=!1;const A=()=>{D(),S=!0},P=()=>{E(),S=!1};return i(Wo(_,I),A,P)}},FV=(t,e,n,r,s,i,o)=>(a,l)=>{const c=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,l);ht(c,l);const h=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(h!==null&&h.length<2)throw e();je(c,{curve:h},"curve"),je(c,l,"oversample");let d=null,p=!1;return o(c,"curve",w=>()=>w.call(c),w=>C=>(w.call(c,C),p&&(r(C)&&d===null?d=t(a,c):!r(C)&&d!==null&&(d(),d=null)),C)),s(c,()=>{p=!0,r(c.curve)&&(d=t(a,c))},()=>{p=!1,d!==null&&(d(),d=null)})},jV=(t,e,n,r,s)=>(i,{curve:o,oversample:a,...l})=>{const c=i.createWaveShaper(),h=i.createWaveShaper();ht(c,l),ht(h,l);const d=n(i,{...l,gain:1}),p=n(i,{...l,gain:-1}),g=n(i,{...l,gain:1}),y=n(i,{...l,gain:-1});let w=null,C=!1,v=null;const T={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(N){d.channelCount=N,p.channelCount=N,c.channelCount=N,g.channelCount=N,h.channelCount=N,y.channelCount=N},get channelCountMode(){return c.channelCountMode},set channelCountMode(N){d.channelCountMode=N,p.channelCountMode=N,c.channelCountMode=N,g.channelCountMode=N,h.channelCountMode=N,y.channelCountMode=N},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(N){d.channelInterpretation=N,p.channelInterpretation=N,c.channelInterpretation=N,g.channelInterpretation=N,h.channelInterpretation=N,y.channelInterpretation=N},get context(){return c.context},get curve(){return v},set curve(N){if(N!==null&&N.length<2)throw e();if(N===null)c.curve=N,h.curve=N;else{const D=N.length,E=new Float32Array(D+2-D%2),_=new Float32Array(D+2-D%2);E[0]=N[0],_[0]=-N[D-1];const S=Math.ceil((D+1)/2),A=(D+1)/2-1;for(let P=1;P<S;P+=1){const b=P/S*A,R=Math.floor(b),q=Math.ceil(b);E[P]=R===q?N[R]:(1-(b-R))*N[R]+(1-(q-b))*N[q],_[P]=R===q?-N[D-1-R]:-((1-(b-R))*N[D-1-R])-(1-(q-b))*N[D-1-q]}E[S]=D%2===1?N[S-1]:(N[S-2]+N[S-1])/2,c.curve=E,h.curve=_}v=N,C&&(r(v)&&w===null?w=t(i,d):w!==null&&(w(),w=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(N){c.oversample=N,h.oversample=N},addEventListener(...N){return d.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return d.dispatchEvent(N[0])},removeEventListener(...N){return d.removeEventListener(N[0],N[1],N[2])}};o!==null&&(T.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==T.oversample&&(T.oversample=a);const I=()=>{d.connect(c).connect(g),d.connect(p).connect(h).connect(y).connect(g),C=!0,r(v)&&(w=t(i,d))},O=()=>{d.disconnect(c),c.disconnect(g),d.disconnect(p),p.disconnect(h),h.disconnect(y),y.disconnect(g),C=!1,w!==null&&(w(),w=null)};return s(Wo(T,g),I,O)},Kt=()=>new DOMException("","NotSupportedError"),UV={numberOfChannels:1},BV=(t,e,n,r,s)=>class extends t{constructor(o,a,l){let c;if(typeof o=="number"&&a!==void 0&&l!==void 0)c={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")c=o;else throw new Error("The given parameters are not valid.");const{length:h,numberOfChannels:d,sampleRate:p}={...UV,...c},g=r(d,h,p);e(yl,()=>yl(g))||g.addEventListener("statechange",(()=>{let y=0;const w=C=>{this._state==="running"&&(y>0?(g.removeEventListener("statechange",w),C.stopImmediatePropagation(),this._waitForThePromiseToSettle(C)):y+=1)};return w})()),super(g,d),this._length=h,this._nativeOfflineAudioContext=g,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,WS(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},zV={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},WV=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={...zV,...c},p=n(h,d),g=i(h),y=g?r():null,w=l.sampleRate/2;super(l,!1,p,y),this._detune=e(this,g,p.detune,153600,-153600),this._frequency=e(this,g,p.frequency,w,-w),this._nativeOscillatorNode=p,this._onended=null,this._oscillatorNodeRenderer=y,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=c;const h=this._nativeOscillatorNode.onended;this._onended=h!==null&&h===c?l:h}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Ao(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),Ar(this)&&Bl(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},qV=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null,l=null;const c=async(h,d)=>{let p=n(h);const g=Ft(p,d);if(!g){const y={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,periodicWave:o===null?void 0:o,type:p.type};p=e(d,y),a!==null&&p.start(a),l!==null&&p.stop(l)}return i.set(d,p),g?(await t(d,h.detune,p.detune),await t(d,h.frequency,p.frequency)):(await r(d,h.detune,p.detune),await r(d,h.frequency,p.frequency)),await s(h,d,p),p};return{set periodicWave(h){o=h},set start(h){a=h},set stop(h){l=h},render(h,d){const p=i.get(d);return p!==void 0?Promise.resolve(p):c(h,d)}}},$V={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},HV=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={...$V,...c},p=n(h,d),g=i(h),y=g?r():null;super(l,!1,p,y),this._nativePannerNode=p,this._orientationX=e(this,g,p.orientationX,Wt,Yt),this._orientationY=e(this,g,p.orientationY,Wt,Yt),this._orientationZ=e(this,g,p.orientationZ,Wt,Yt),this._positionX=e(this,g,p.positionX,Wt,Yt),this._positionY=e(this,g,p.positionY,Wt,Yt),this._positionZ=e(this,g,p.positionZ,Wt,Yt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},GV=(t,e,n,r,s,i,o,a,l,c)=>()=>{const h=new WeakMap;let d=null;const p=async(g,y)=>{let w=null,C=i(g);const v={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation},T={...v,coneInnerAngle:C.coneInnerAngle,coneOuterAngle:C.coneOuterAngle,coneOuterGain:C.coneOuterGain,distanceModel:C.distanceModel,maxDistance:C.maxDistance,panningModel:C.panningModel,refDistance:C.refDistance,rolloffFactor:C.rolloffFactor},I=Ft(C,y);if("bufferSize"in C)w=r(y,{...v,gain:1});else if(!I){const O={...T,orientationX:C.orientationX.value,orientationY:C.orientationY.value,orientationZ:C.orientationZ.value,positionX:C.positionX.value,positionY:C.positionY.value,positionZ:C.positionZ.value};C=s(y,O)}if(h.set(y,w===null?C:w),w!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const P=new o(6,g.context.length,y.sampleRate),b=e(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});b.connect(P.destination),d=(async()=>{const R=await Promise.all([g.orientationX,g.orientationY,g.orientationZ,g.positionX,g.positionY,g.positionZ].map(async(q,Z)=>{const Q=n(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z===0?1:0});return await a(P,q,Q.offset),Q}));for(let q=0;q<6;q+=1)R[q].connect(b,0,q),R[q].start(0);return c(P)})()}const O=await d,N=r(y,{...v,gain:1});await l(g,y,N);const D=[];for(let P=0;P<O.numberOfChannels;P+=1)D.push(O.getChannelData(P));let E=[D[0][0],D[1][0],D[2][0]],_=[D[3][0],D[4][0],D[5][0]],S=r(y,{...v,gain:1}),A=s(y,{...T,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:_[0],positionY:_[1],positionZ:_[2]});N.connect(S).connect(A.inputs[0]),A.connect(w);for(let P=128;P<O.length;P+=128){const b=[D[0][P],D[1][P],D[2][P]],R=[D[3][P],D[4][P],D[5][P]];if(b.some((q,Z)=>q!==E[Z])||R.some((q,Z)=>q!==_[Z])){E=b,_=R;const q=P/y.sampleRate;S.gain.setValueAtTime(0,q),S=r(y,{...v,gain:0}),A=s(y,{...T,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:_[0],positionY:_[1],positionZ:_[2]}),S.gain.setValueAtTime(1,q),N.connect(S).connect(A.inputs[0]),A.connect(w)}}return w}return I?(await t(y,g.orientationX,C.orientationX),await t(y,g.orientationY,C.orientationY),await t(y,g.orientationZ,C.orientationZ),await t(y,g.positionX,C.positionX),await t(y,g.positionY,C.positionY),await t(y,g.positionZ,C.positionZ)):(await a(y,g.orientationX,C.orientationX),await a(y,g.orientationY,C.orientationY),await a(y,g.orientationZ,C.orientationZ),await a(y,g.positionX,C.positionX),await a(y,g.positionY,C.positionY),await a(y,g.positionZ,C.positionZ)),zo(C)?await l(g,y,C.inputs[0]):await l(g,y,C),C};return{render(g,y){const w=h.get(y);return w!==void 0?Promise.resolve(w):p(g,y)}}},KV={disableNormalization:!1},QV=(t,e,n,r)=>class ZS{constructor(i,o){const a=e(i),l=r({...KV,...o}),c=t(a,l);return n.add(c),c}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===ZS.prototype||n.has(i)}},YV=(t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)),XV=(t,e,n)=>async(r,s,i)=>{const o=t(r);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([c,h])=>{const p=await e(c).render(c,s),g=r.context.destination;!n(c)&&(r!==g||!n(r))&&p.connect(i,h,l)})).reduce((a,l)=>[...a,...l],[]))},JV=(t,e,n)=>async(r,s,i)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const h=await t(a).render(a,s);n(a)||h.connect(i,l)}))},ZV=(t,e,n,r)=>s=>t(yl,()=>yl(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const o=n(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(s.destination),s.startRendering()}),eL=t=>(e,n)=>{t.set(e,n)},tL=t=>(e,n)=>t.set(e,n),nL=(t,e,n,r,s,i,o,a)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(r(c)).map(h=>n(h).render(h,c)))).then(()=>s(c)).then(h=>(typeof h.copyFromChannel!="function"?(o(h),Vg(h)):e(i,()=>i(h))||a(h),t.add(h),h)),rL={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},sL=(t,e,n,r,s,i)=>class extends t{constructor(a,l){const c=s(a),h={...rL,...l},d=n(c,h),p=i(c),g=p?r():null;super(a,!1,d,g),this._pan=e(this,p,d.pan)}get pan(){return this._pan}},iL=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const h=Ft(c,l);if(!h){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,d)}return i.set(l,c),h?await t(l,a.pan,c.pan):await r(l,a.pan,c.pan),zo(c)?await s(a,l,c.inputs[0]):await s(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},oL=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},aL=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,o=!1;try{await r.audioWorklet.addModule(s);const a=new t(r,"a",{numberOfOutputs:0}),l=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await r.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(s)}return i&&!o},lL=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(n.currentTime!==0)},n.startRendering()})},uL=()=>new DOMException("","UnknownError"),cL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},hL=(t,e,n,r,s,i,o)=>class extends t{constructor(l,c){const h=s(l),d={...cL,...c},p=n(h,d),y=i(h)?r():null;super(l,!0,p,y),this._isCurveNullified=!1,this._nativeWaveShaperNode=p,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},dL=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let a=e(i);if(!Ft(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,c)}return r.set(o,a),zo(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):s(i,o)}}},fL=()=>typeof window>"u"?null:window,pL=(t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),h=r.length;for(let d=o<0?-o:0;d+o<l&&d<h;d+=1)r[d]=c[d+o]},n.copyToChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),h=r.length;for(let d=o<0?-o:0;d+o<l&&d<h;d+=1)c[d+o]=r[d]}},mL=t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyToChannel)},gL=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},_L=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let l=0;l<a;l+=1)s.connect(r,0,l)},()=>s.disconnect(r))},e1=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),t1=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Hl=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(o)})},yL=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),vL=t=>({...t,channelCount:t.numberOfOutputs}),wL=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},n1=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;n1(t,e,n+1e-7)}},TL=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},EL=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},IL=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Bg=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},r1=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},zg=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},SL=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},CL=t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,o=i===null?r:Math.min(i.duration,r);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,s)})(t.start)},s1=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),Wo(t,n),t.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else s.call(t,o),i=!0}})(t.stop)},qo=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},AL=HO(Ei),kL=JO(Ei),xL=cM(Qh),i1=new WeakMap,RL=xM(i1),Hn=UD(new Map,new WeakMap),lr=fL(),o1=sV(Hn,ur),Wg=kM(qt),At=XV(qt,Wg,pi),NL=rD(o1,Le,At),Ne=PM(Kh),Fr=PV(lr),Ae=KM(Fr),a1=new WeakMap,l1=wM(qo),Gl=lV(lr),qg=qM(Gl),$g=$M(lr),u1=HM(lr),vl=cV(lr),et=xD(GO(VS),XO(AL,kL,th,xL,nh,qt,RL,Ul,Le,Ei,Ar,pi,uc),Hn,jM(Fp,nh,qt,Le,_l,Ar),ur,Yh,Kt,oM(th,Fp,qt,Le,_l,Ne,Ar,Ae),fM(a1,qt,qn),l1,Ne,qg,$g,u1,Ae,vl),PL=nD(et,NL,ur,o1,Ne,Ae),Hg=new WeakSet,ew=iV(lr),c1=ZD(new Uint32Array(1)),Gg=pL(c1,ur),Kg=mL(c1),h1=iD(Hg,Hn,Kt,ew,Fr,oL(ew),Gg,Kg),Xh=ZO(on),d1=JV(Wg,zl,pi),cr=GD(d1),$o=aV(Xh,Hn,TL,EL,IL,Bg,r1,zg,CL,gL(Hl),s1),hr=YV(RM(zl),d1),bL=lD(cr,$o,Le,hr,At),Gn=RD(KO(LS),a1,Mg,ND,UO,BO,zO,WO,qO,Mp,DS,Gl,n1),OL=aD(et,bL,Gn,gt,$o,Ne,Ae,qo),DL=_D(et,yD,ur,gt,uV(on,Hl),Ne,Ae,At),ML=jD(cr,XS,Le,hr,At),Ii=tL(i1),VL=FD(et,Gn,ML,Yh,XS,Ne,Ae,Ii),Ms=nV(Ei,$g),LL=_L(gt,Ms),Vs=_V(Gl,LL),FL=WD(Vs,Le,At),jL=zD(et,FL,Vs,Ne,Ae),UL=HD(ql,Le,At),BL=$D(et,UL,ql,Ne,Ae,vL),zL=wV(Xh,$o,on,Ms),Ho=vV(Xh,Hn,zL,Bg,zg),WL=JD(cr,Ho,Le,hr,At),qL=XD(et,Gn,WL,Ho,Ne,Ae,qo),f1=TV(Kt,Hl),$L=nM(f1,Le,At),HL=tM(et,$L,f1,Ne,Ae,Ii),GL=uM(cr,JS,Le,hr,At),KL=lM(et,Gn,GL,JS,Ne,Ae,Ii),p1=EV(Kt),QL=_M(cr,p1,Le,hr,At),YL=gM(et,Gn,QL,p1,Kt,Ne,Ae,Ii),XL=CM(cr,on,Le,hr,At),JL=SM(et,Gn,XL,on,Ne,Ae),ZL=AV(Yh,gt,$l,Kt),Jh=ZV(Hn,on,$l,lL(on,Fr)),e4=FM($o,Le,Fr,At,Jh),t4=IV(ZL),n4=VM(et,t4,e4,Ne,Ae,Ii),r4=vD(Gn,Vs,Ho,$l,Kt,e1,Ae,Hl),m1=new WeakMap,s4=tV(DL,r4,l1,Ae,m1,qo),g1=bV(Xh,Hn,Bg,r1,zg,s1),i4=qV(cr,g1,Le,hr,At),o4=WV(et,Gn,g1,i4,Ne,Ae,qo),_1=QD($o),a4=jV(_1,gt,on,t1,Ms),Zh=FV(_1,gt,a4,t1,Ms,Gl,Hl),l4=DV(th,gt,Vs,on,$l,Zh,Kt,nh,e1,Ms),y1=OV(l4),u4=GV(cr,Vs,Ho,on,y1,Le,Fr,hr,At,Jh),c4=HV(et,Gn,y1,u4,Ne,Ae,Ii),h4=MV(ur),d4=QV(h4,Ne,new WeakSet,wL),f4=LV(Vs,ql,on,Zh,Kt,Ms),v1=VV(f4,Kt),p4=iL(cr,v1,Le,hr,At),m4=sL(et,Gn,v1,p4,Ne,Ae),g4=dL(Zh,Le,At),_4=hL(et,gt,Zh,g4,Ne,Ae,Ii),w1=QM(lr),Qg=TM(lr),T1=new WeakMap,y4=bM(T1,Fr),v4=w1?YO(Hn,Kt,vM(lr),Qg,EM($O),Ne,y4,Ae,vl,new WeakMap,new WeakMap,aL(vl,Fr),lr):void 0,w4=GM(qg,Ae),T4=iM(Hg,Hn,sM,yM,new WeakSet,Ne,w4,Zc,yl,Gg,Kg),E1=VD(v4,PL,h1,OL,VL,jL,BL,qL,HL,T4,KL,YL,JL,n4,s4,o4,c4,d4,m4,_4),E4=YM(et,kV,Ne,Ae),I4=JM(et,xV,Ne,Ae),S4=ZM(et,RV,Ne,Ae),C4=NV(gt,Ae),A4=eV(et,C4,Ne),k4=gD(E1,gt,Kt,uL,E4,I4,S4,A4,Gl),Yg=OM(m1),x4=eD(Yg),I1=KD(ur),R4=hM(Yg),S1=pM(ur),C1=new WeakMap,N4=AM(C1,qn),P4=gV(I1,ur,gt,Vs,ql,Ho,on,$l,Kt,S1,Qg,N4,Ms),b4=dV(gt,P4,on,Kt,Ms),O4=MD(cr,I1,$o,Vs,ql,Ho,on,R4,S1,Qg,Le,vl,Fr,hr,At,Jh),D4=NM(T1),M4=eL(C1),tw=w1?bD(x4,et,Gn,O4,b4,qt,D4,Ne,Ae,vl,yL,M4,SL,qo):void 0,V4=rM(Kt,Fr),L4=nL(Hg,Hn,Wg,Yg,Jh,Zc,Gg,Kg),F4=BV(E1,Hn,gt,V4,L4),j4=UM(Kh,qg),U4=BM(Dg,$g),B4=zM(Mg,u1),z4=WM(Kh,Ae);function Sn(t){return t===void 0}function fe(t){return t!==void 0}function W4(t){return typeof t=="function"}function mi(t){return typeof t=="number"}function ni(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function q4(t){return typeof t=="boolean"}function Un(t){return Array.isArray(t)}function Mr(t){return typeof t=="string"}function ju(t){return Mr(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function ce(t,e){if(!t)throw new Error(e)}function As(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function A1(t){!t.isOffline&&t.state!=="running"&&Xg('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let k1=!1,nw=!1;function rw(t){k1=t}function $4(t){Sn(t)&&k1&&!nw&&(nw=!0,Xg("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let x1=console;function H4(...t){x1.log(...t)}function Xg(...t){x1.warn(...t)}function G4(t){return new k4(t)}function K4(t,e,n){return new F4(t,e,n)}const un=typeof self=="object"?self:null,Q4=un&&(un.hasOwnProperty("AudioContext")||un.hasOwnProperty("webkitAudioContext"));function Y4(t,e,n){return ce(fe(tw),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof un?.BaseAudioContext?un?.AudioWorkletNode:tw)(t,e,n)}class X4{constructor(e,n,r,s){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function gi(t){return B4(t)}function ys(t){return U4(t)}function cc(t){return z4(t)}function Oi(t){return j4(t)}function J4(t){return t instanceof h1}function Z4(t,e){return t==="value"||gi(e)||ys(e)||J4(e)}function oo(t,...e){if(!e.length)return t;const n=e.shift();if(ni(t)&&ni(n))for(const r in n)Z4(r,n[r])?t[r]=n[r]:ni(n[r])?(t[r]||Object.assign(t,{[r]:{}}),oo(t[r],n[r])):Object.assign(t,{[r]:n[r]});return oo(t,...e)}function eF(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function ue(t,e,n=[],r){const s={},i=Array.from(e);if(ni(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(oo(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&ni(i[0]))oo(s,i[0]);else for(let o=0;o<n.length;o++)fe(i[o])&&(s[n[o]]=i[o]);return oo(t,s)}function tF(t){return t.constructor.getDefaults()}function ao(t,e){return Sn(t)?e:t}function sw(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class jr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||un&&this.toString()===un.TONE_DEBUG_CLASS)&&H4(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}jr.version=OS;const Jg=1e-6;function ko(t,e){return t>e+Jg}function Wp(t,e){return ko(t,e)||Dn(t,e)}function oh(t,e){return t+Jg<e}function Dn(t,e){return Math.abs(t-e)<Jg}function nF(t,e,n){return Math.max(Math.min(t,n),e)}class Cn extends jr{constructor(){super(),this.name="Timeline",this._timeline=[];const e=ue(Cn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ce(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];ce(Wp(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Dn(this._timeline[n].time,e)){for(let r=n;r>=0&&Dn(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Wp(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let o=Math.floor(r+(i-r)/2);const a=this._timeline[o],l=this._timeline[o+1];if(Dn(a[n],e)){for(let c=o;c<this._timeline.length;c++){const h=this._timeline[c];if(Dn(h[n],e))o=c;else break}return o}else{if(oh(a[n],e)&&ko(l[n],e))return o;ko(a[n],e)?i=o:r=o+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&Dn(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&Dn(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const R1=[];function ed(t){R1.push(t)}function rF(t){R1.forEach(e=>e(t))}const N1=[];function td(t){N1.push(t)}function sF(t){N1.forEach(e=>e(t))}class Kl extends jr{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{Sn(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(Sn(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(Sn(n))this._events[s]=[];else{const i=this._events[s];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(Kl.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class P1 extends Kl{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Ql extends P1{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Cn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=ue(Ql.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=G4({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new X4(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(rF(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ce(Oi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ce(Oi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ce(Oi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ce(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ce(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ce(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ce(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return Y4(this.rawContext,e,n)}addAudioWorkletModule(e){return ot(this,void 0,void 0,function*(){ce(fe(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ot(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Oi(this._context)?this._context.resume():Promise.resolve()}close(){return ot(this,void 0,void 0,function*(){Oi(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&sF(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}class iF extends P1{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ot(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ye(t,e){Un(e)?e.forEach(n=>Ye(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function b1(t,e){Un(e)?e.forEach(n=>b1(t,n)):Object.defineProperty(t,e,{writable:!0})}const Ce=()=>{};class Fe extends jr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ce;const e=ue(Fe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Mr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ce,onload:Ce,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Mn().sampleRate}set(e){return e instanceof Fe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ot(this,void 0,void 0,function*(){const n=Fe.load(e).then(r=>{this.set(r),this.onload(this)});Fe.downloads.push(n);try{yield n}finally{const r=Fe.downloads.indexOf(n);Fe.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=Un(e)&&e[0].length>0,r=n?e.length:1,s=n?e[0].length:e.length,i=Mn(),o=i.createBuffer(r,s,i.sampleRate),a=!n&&r===1?[e]:e;for(let l=0;l<r;l++)o.copyToChannel(a[l],l);return this._buffer=o,this}toMono(e){if(mi(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(s=>s/r),this.fromArray(n)}return this}toArray(e){if(mi(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){ce(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),s=Math.floor(n*this.sampleRate);ce(r<s,"The start time must be less than the end time");const i=s-r,o=Mn().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(r,s),a);return new Fe(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Fe().fromArray(e)}static fromUrl(e){return ot(this,void 0,void 0,function*(){return yield new Fe().load(e)})}static load(e){return ot(this,void 0,void 0,function*(){const n=Fe.baseUrl===""||Fe.baseUrl.endsWith("/")?Fe.baseUrl:Fe.baseUrl+"/",r=yield fetch(n+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const s=yield r.arrayBuffer();return yield Mn().decodeAudioData(s)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return ot(this,void 0,void 0,function*(){for(yield Promise.resolve();Fe.downloads.length;)yield Fe.downloads[0]})}}Fe.baseUrl="";Fe.downloads=[];class Zg extends Ql{constructor(){super({clockSource:"offline",context:cc(arguments[0])?arguments[0]:K4(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:cc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=cc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ot(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(){return ot(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Fe(n)})}close(){return Promise.resolve()}}const O1=new iF;let Xs=O1;function Mn(){return Xs===O1&&Q4&&oF(new Ql),Xs}function oF(t,e=!1){e&&Xs.dispose(),Oi(t)?Xs=new Ql(t):cc(t)?Xs=new Zg(t):Xs=t}function aF(){return Xs.resume()}if(un&&!un.TONE_SILENCE_LOGGING){const e=` * Tone.js v${OS} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function lF(t){return Math.pow(10,t/20)}function uF(t){return 20*(Math.log(t)/Math.LN10)}function D1(t){return Math.pow(2,t/12)}let nd=440;function cF(){return nd}function hF(t){nd=t}function qp(t){return Math.round(M1(t))}function M1(t){return 69+12*Math.log2(t/nd)}function dF(t){return nd*Math.pow(2,(t-69)/12)}class e_ extends jr{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof e_&&this.fromType(this._val),Sn(this._val))return this._noArg();if(Mr(this._val)&&Sn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(ni(this._val)){let e=0;for(const n in this._val)if(fe(this._val[n])){const r=this._val[n],s=new this.constructor(this.context,n).valueOf()*r;e+=s}return e}if(fe(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Mr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Vn extends e_{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Vn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),a=Math.round(s/r)*r-s;return s+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let r=n[0],s=new Vn(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new Vn(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(r=i,s=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return qp(this.toFrequency())}_now(){return this.context.now()}}class Tn extends Vn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return cF()}static set A4(e){hF(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Tn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const s=fF[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?s:Tn.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new Tn(this.context,this.valueOf()*D1(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return qp(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Tn.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),pF[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return dF(e)}static ftom(e){return qp(e)}}const fF={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},pF=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Wa extends Vn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class sn extends jr{constructor(){super();const e=ue(sn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Mn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return $4(e),new Vn(this.context,e).toSeconds()}toFrequency(e){return new Tn(this.context,e).toFrequency()}toTicks(e){return new Wa(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{Sn(e[r])&&delete n[r]}),n}get(){const e=tF(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];fe(r)&&fe(r.value)&&fe(r.setValueAtTime)?e[n]=r.value:r instanceof sn?e[n]=r._getPartialProperties(e[n]):Un(r)||mi(r)||Mr(r)||q4(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&fe(this[n])&&(this[n]&&fe(this[n].value)&&fe(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof sn?this[n].set(e[n]):this[n]=e[n])}),this}}class t_ extends Cn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return As(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class ze extends sn{constructor(){const e=ue(ze.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,ce(fe(e.param)&&(gi(e.param)||e.param instanceof ze),"param must be an AudioParam");!gi(e.param);)e.param=e.param._param;this._swappable=fe(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Cn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,fe(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(sn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return fe(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return fe(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return fe(this.maxValue)&&fe(this.minValue)&&As(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?lF(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?uF(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return ce(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(s.time);let a;o===null?a=this._initialValue:a=o.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,a,s.value,s.constant,n))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=s.value;if(s.type==="setTargetAtTime"){const a=this._events.getBefore(s.time);a===null?o=this._initialValue:o=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,o,r.time,r.value,n):i=this._exponentialInterpolate(s.time,o,r.time,r.value,n)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return ce(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=Dn(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return ce(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);ce(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),ce(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const o=r/(e.length-1);for(let a=1;a<e.length;a++){const l=this._fromType(e[a])*s;this.linearRampToValueAtTime(this._toType(l),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return ce(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));ce(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&Dn(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){ce(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(s-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class he extends sn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return fe(this.input)?gi(this.input)||this.input instanceof ze?1:this.input.numberOfInputs:0}get numberOfOutputs(){return fe(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return fe(e)&&(e instanceof he||ys(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ce(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return Go(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Xg("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return mF(this,e,n,r),this}chain(...e){return $p(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),fe(this.input)&&(this.input instanceof he?this.input.dispose():ys(this.input)&&this.input.disconnect()),fe(this.output)&&(this.output instanceof he?this.output.dispose():ys(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function $p(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof he?n.connect(r):ys(n)&&Go(n,r),r),e)}function Go(t,e,n=0,r=0){for(ce(fe(t),"Cannot connect from undefined node"),ce(fe(e),"Cannot connect to undefined node"),(e instanceof he||ys(e))&&ce(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ce(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof he||e instanceof ze;)fe(e.input)&&(e=e.input);for(;t instanceof he;)fe(t.output)&&(t=t.output);gi(e)?t.connect(e,n):t.connect(e,n,r)}function mF(t,e,n=0,r=0){if(fe(e))for(;e instanceof he;)e=e.input;for(;!ys(t);)fe(t.output)&&(t=t.output);gi(e)?t.disconnect(e,n):ys(e)?t.disconnect(e,n,r):t.disconnect()}class Mt extends he{constructor(){const e=ue(Mt.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new ze({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ye(this,"gain")}static getDefaults(){return Object.assign(he.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class xo extends he{constructor(e){super(e),this.onended=Ce,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Mt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(he.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ce})}_startGain(e,n=1){ce(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ce(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ce&&(this.onended(this),this.onended=Ce,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ce(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ce,this}}class n_ extends xo{constructor(){const e=ue(n_.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Go(this._source,this._gainNode),this.offset=new ze({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(xo.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class _t extends he{constructor(){const e=ue(_t.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new n_({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(he.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return r_(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function r_(t,e,n,r){(e instanceof ze||gi(e)||e instanceof _t&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof _t&&(e.overridden=!0)),Go(t,e,n,r)}class s_ extends ze{constructor(){const e=ue(s_.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Cn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ze.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const l=r*a+n,c=this._exponentialApproach(i.time,i.value,s,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max((n-s.time)*10,1)),o=(n-s.time)/i;for(let a=0;a<=i;a++){const l=o*a+s.time,c=this._exponentialInterpolate(s.time,s.value,n,r,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Sn(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),a=Math.sqrt(Math.pow(s,2)-2*o*(n.ticks-e)),l=(-s+a)/o,c=(-s-a)/o;return(l>0?l:c)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class i_ extends _t{constructor(){const e=ue(i_.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new s_({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(_t.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class o_ extends sn{constructor(){const e=ue(o_.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new t_,this._tickOffset=new Cn,this._ticksAtTime=new Cn,this._secondsAtTime=new Cn,this.frequency=new i_({context:this.context,units:e.units,value:e.frequency}),Ye(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},sn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),fe(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=s||r,a=s?s.ticks:0,l=null;return this._state.forEachBetween(o.time,n+this.sampleTime,c=>{let h=o.time;const d=this._tickOffset.get(c.time);d&&d.time>=o.time&&(a=d.ticks,h=d.time),o.state==="started"&&c.state!=="started"&&(a+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(h),c.time!==i.time&&(l={state:c.state,time:c.time,ticks:a})),o=c}),this._state.remove(i),l&&this._ticksAtTime.add(l),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const s=this._secondsAtTime.get(e);let i=s||n,o=s?s.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,l=>{let c=i.time;const h=this._tickOffset.get(l.time);h&&h.time>=i.time&&(o=h.seconds,c=h.time),i.state==="started"&&l.state!=="started"&&(o+=l.time-c,l.time!==r.time&&(a={state:l.state,time:l.time,seconds:o})),i=l}),this._state.remove(r),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),o=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,o=>{s&&s.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,r),s=o});let i=null;if(s&&s.state==="started"){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(s.time),c=a-l;let h=Math.ceil(c)-c;h=Dn(h,1)?0:h;let d=this.frequency.getTimeOfTick(a+h);for(;d<n;){try{r(d,Math.round(this.getTicksAtTime(d)))}catch(p){i=p;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class rd extends sn{constructor(){const e=ue(rd.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Ce,this._lastUpdate=0,this._state=new t_("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new o_({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ye(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(sn.getDefaults(),{callback:Ce,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){A1(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Kl.mixin(rd);class Ko extends he{constructor(){const e=ue(Ko.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Mt({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ye(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(he.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class a_ extends he{constructor(){const e=ue(a_.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Ko({context:this.context}),this.output=new Mt({context:this.context}),this.volume=this.input.volume,$p(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(he.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),$p(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ed(t=>{t.destination=new a_({context:t})});td(t=>{t.destination.dispose()});class gF extends he{constructor(){super(...arguments),this.name="Listener",this.positionX=new ze({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ze({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ze({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ze({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ze({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ze({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ze({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ze({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ze({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(he.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}ed(t=>{t.listener=new gF({context:t})});td(t=>{t.listener.dispose()});class l_ extends jr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=ue(l_.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ce,onload:Ce,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ce(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=Ce,s=Ce){return Mr(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Fe(this.baseUrl+n,r,s))):this._buffers.set(e.toString(),new Fe(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Ki extends Wa{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class _F extends sn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Cn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,n=>{e-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ed(t=>{t.draw=new _F({context:t})});td(t=>{t.draw.dispose()});class yF extends jr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ce(fe(e.time),"Events must have a time property"),ce(fe(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new vF(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,s=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class vF{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class wF extends jr{constructor(e){super(),this.name="TimelineValue",this._timeline=new Cn({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Ro extends he{constructor(){super(ue(Ro.getDefaults(),arguments,["context"]))}connect(e,n=0,r=0){return r_(this,e,n,r),this}}class Yl extends Ro{constructor(){const e=ue(Yl.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Un(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):W4(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(_t.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++){const o=s/(i-1)*2-1;r[s]=e(o,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));ce(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class u_ extends Ro{constructor(){const e=ue(u_.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Yl({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ro.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ks{constructor(e,n){this.id=ks._eventId++,this._remainderTime=0;const r=Object.assign(ks.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:Ce,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}ks._eventId=0;class c_ extends ks{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(c_.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ks.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return oh(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Ki(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){oh(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Ki(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);ko(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class sd extends sn{constructor(){const e=ue(sd.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new wF(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Cn,this._repeatedEvents=new yF,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new rd({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ye(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(sn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new Ki(this.context,this._swingTicks*2/3).toSeconds()*s}rw(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),rw(!1)}schedule(e,n){const r=new ks(this,{callback:e,time:new Wa(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new c_(this,{callback:e,duration:new Vn(this.context,s).toTicks(),interval:new Vn(this.context,n).toTicks(),time:new Wa(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new ks(this,{callback:e,once:!0,time:new Wa(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Ki(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let r;return fe(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Un(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Vn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Vn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Ki(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new Ki(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),s=e-r%e;return this._clock.nextTickTime(s,n)}}syncSignal(e,n){const r=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(r)/this.PPQ),o=[];if(e.units==="time"){const l=.015625/i,c=new Mt(l),h=new u_(-1),d=new Mt(l);s.chain(c,h,d),s=d,i=1/i,o=[c,h,d]}n||(e.getValueAtTime(r)!==0?n=e.getValueAtTime(r)/i:n=0);const a=new Mt(n);return s.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.nodes.forEach(s=>s.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),b1(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Kl.mixin(sd);ed(t=>{t.transport=new sd({context:t})});td(t=>{t.transport.dispose()});class pn extends he{constructor(e){super(e),this.input=void 0,this._state=new t_("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ce,this._syncedStop=Ce,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ko({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ye(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(he.getDefaults(),{mute:!1,onstop:Ce,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=Sn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")ce(ko(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(ao(n,0)),i.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,r)},s);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else A1(this.context),this._start(s,n,r);return this}stop(e){let n=Sn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||fe(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(ko(n,0)){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ce,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class id extends xo{constructor(){const e=ue(id.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Go(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ze({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Fe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(xo.getDefaults(),{url:new Fe,loop:!1,loopEnd:0,loopStart:0,onload:Ce,onerror:Ce,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){ce(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?n=ao(n,this.loopStart):n=ao(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=a-l;Wp(o,a)&&(o=(o-l)%c+l),Dn(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,oh(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),fe(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Si(t,e){return ot(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new Zg(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class h_ extends xo{constructor(){const e=ue(h_.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Go(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ze({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ze({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ye(this,["frequency","detune"])}static getDefaults(){return Object.assign(xo.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class rt extends pn{constructor(){const e=ue(rt.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency}),Ye(this,"frequency"),this.detune=new _t({context:this.context,units:"cents",value:e.detune}),Ye(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(pn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new h_({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return rt._periodicWaveCache.find(n=>n.phase===this._phase&&eF(n.partials,this._partials));{const e=rt._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(fe(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(s,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),rt._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),rt._periodicWaveCache.length>100&&rt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){As(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,o)=>s[o]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,n){let s=2048;const i=new Float32Array(s),o=new Float32Array(s);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,s=a,this._partials.length===0)return[i,o]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(a=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],a=Math.max(a,2),s=a):this._partialCount=0,this._partials=[]}for(let l=1;l<s;++l){const c=2/(l*Math.PI);let h;switch(e){case"sine":h=l<=a?1:0,this._partials[l-1]=h;break;case"square":h=l&1?2*c:0,this._partials[l-1]=h;break;case"sawtooth":h=c*(l&1?1:-1),this._partials[l-1]=h;break;case"triangle":l&1?h=2*(c*c)*(l-1>>1&1?-1:1):h=0,this._partials[l-1]=h;break;case"custom":h=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}h!==0?(i[l]=-h*Math.sin(n*l),o[l]=h*Math.cos(n*l)):(i[l]=0,o[l]=0)}return[i,o]}_inverseFFT(e,n,r){let s=0;const i=e.length;for(let o=0;o<i;o++)s+=e[o]*Math.cos(o*r)+n[o]*Math.sin(o*r);return s}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let o=0;o<i;o++)r=Math.max(this._inverseFFT(e,n,o/i*s),r);return nF(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ot(this,arguments,void 0,function*(e=1024){return Si(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}rt._periodicWaveCache=[];class TF extends Ro{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Yl({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class No extends _t{constructor(){const e=ue(No.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Mt({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(_t.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class od extends pn{constructor(){const e=ue(od.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new TF({context:this.context}),this._modulationNode=new Mt({context:this.context}),this._carrier=new rt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new rt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new No({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ye(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(rt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ot(this,arguments,void 0,function*(e=1024){return Si(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ad extends pn{constructor(){const e=ue(ad.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Mt({context:this.context,gain:0}),this._carrier=new rt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new rt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new No({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new No({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ye(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(rt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ot(this,arguments,void 0,function*(e=1024){return Si(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Xl extends pn{constructor(){const e=ue(Xl.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Mt({context:this.context,gain:0}),this._thresh=new Yl({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new _t({context:this.context,units:"audioRange",value:e.width}),this._triangle=new rt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ye(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(pn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ot(this,arguments,void 0,function*(e=1024){return Si(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class ld extends pn{constructor(){const e=ue(ld.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _t({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ye(this,["frequency","detune"])}static getDefaults(){return Object.assign(rt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(As(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new rt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):Ce});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ot(this,arguments,void 0,function*(e=1024){return Si(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class ud extends pn{constructor(){const e=ue(ud.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new No({context:this.context,value:2}),this._pulse=new Xl({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new rt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ye(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(pn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ot(this,arguments,void 0,function*(e=1024){return Si(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const iw={am:od,fat:ld,fm:ad,oscillator:rt,pulse:Xl,pwm:ud};class ah extends pn{constructor(){const e=ue(ah.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _t({context:this.context,units:"cents",value:e.detune}),Ye(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(rt.getDefaults(),ad.getDefaults(),od.getDefaults(),ld.getDefaults(),Xl.getDefaults(),ud.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=iw[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof iw[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&mi(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&mi(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Mr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ot(this,arguments,void 0,function*(e=1024){return Si(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function V1(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){As(i,t,e),n.set(this,i)}})}}function Ur(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){As(this.toSeconds(i),t,e),n.set(this,i)}})}}class cd extends pn{constructor(){const e=ue(cd.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Fe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(pn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ce,onerror:Ce,playbackRate:1,reverse:!1})}load(e){return ot(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Ce){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=ao(n,this._loopStart):n=ao(n,0);const s=this.toSeconds(n),i=r;r=ao(r,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);const a=new id({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Sn(i)?a.start(e,s):a.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var s;(s=[...this._activeSources].pop())===null||s===void 0||s.stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&As(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&As(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}$n([Ur(0)],cd.prototype,"fadeIn",void 0);$n([Ur(0)],cd.prototype,"fadeOut",void 0);class Ls extends he{constructor(){const e=ue(Ls.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new _t({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(he.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Mr(e))return e;{let r;for(r in Uu)if(Uu[r][n]===e)return r;return e}}_setCurve(e,n,r){if(Mr(r)&&Reflect.has(Uu,r)){const s=Uu[r];ni(s)?e!=="_decayCurve"&&(this[e]=s[n]):this[e]=s}else if(Un(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/s;s=(1-o)/a}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,s,n)}if(i&&this.sustain<1){const a=n*this.sustain,l=e+s;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+l):this._sig.exponentialApproachValueAtTime(a,l,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(ce(Un(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return r_(this,e,n,r),this}asArray(){return ot(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,r=new Zg(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=i*.1,a=i+o,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return l._sig.toDestination(),l.triggerAttackRelease(n*(s+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}$n([Ur(0)],Ls.prototype,"attack",void 0);$n([Ur(0)],Ls.prototype,"decay",void 0);$n([V1(0,1)],Ls.prototype,"sustain",void 0);$n([Ur(0)],Ls.prototype,"release",void 0);const Uu=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const s=[],i=6.4;for(e=0;e<127;e++){n=e/127;const p=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;s[e]=p/10+n*.83}s[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const l=[];for(e=0;e<128;e++)n=e/127,l[e]=.5*(1-Math.cos(Math.PI*n));const c=[];for(e=0;e<128;e++){n=e/127;const p=Math.pow(n,3)*4+.2,g=Math.cos(p*Math.PI*2*n);c[e]=Math.abs(g*(1-n))}function h(p){const g=new Array(p.length);for(let y=0;y<p.length;y++)g[y]=1-p[y];return g}function d(p){return p.slice(0).reverse()}return{bounce:{In:h(c),Out:c},cosine:{In:r,Out:d(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:h(s)},sine:{In:l,Out:h(l)},step:{In:o,Out:h(o)}}})();class Po extends he{constructor(){const e=ue(Po.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new Ko({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ye(this,"volume")}static getDefaults(){return Object.assign(he.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[n],o=this.context.transport.schedule(a=>{s[n]=a,r.apply(this,s)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),o=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class bo extends Po{constructor(){const e=ue(bo.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Po.getDefaults(),{detune:0,onsilence:Ce,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof Tn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}$n([Ur(0)],bo.prototype,"portamento",void 0);class d_ extends Ls{constructor(){super(ue(d_.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Mt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class wl extends bo{constructor(){const e=ue(wl.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new ah(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new d_(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ye(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(bo.getDefaults(),{envelope:Object.assign(sw(Ls.getDefaults(),Object.keys(he.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(sw(ah.getDefaults(),[...Object.keys(pn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class hd extends wl{constructor(){const e=ue(hd.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ye(this,["oscillator","envelope"])}static getDefaults(){return oo(bo.getDefaults(),wl.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof Tn?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}$n([V1(0)],hd.prototype,"octaves",void 0);$n([Ur(0)],hd.prototype,"pitchDecay",void 0);const L1=new Set;function f_(t){L1.add(t)}function F1(t,e){const n=`registerProcessor("${t}", ${e})`;L1.add(n)}const EF=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;f_(EF);const IF=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;f_(IF);const SF=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;f_(SF);const CF="feedback-comb-filter",AF=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;F1(CF,AF);class dd extends Po{constructor(){const e=ue(dd.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(ce(ju(r)||mi(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),ju(r)){const i=new Tn(this.context,r).toMidi();n[i]=e.urls[r]}else mi(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new l_({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Po.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ce,onerror:Ce,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=M1(new Tn(this.context,s).toFrequency()),o=Math.round(i),a=i-o,l=this._findClosest(o),c=o-l,h=this._buffers.get(c),d=D1(l+a),p=new id({url:h,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);p.start(n,0,h.duration/d,r),Un(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(p),p.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const g=this._activeSources.get(o),y=g.indexOf(p);y!==-1&&g.splice(y,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new Tn(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),Un(n)?(ce(Un(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const l=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(l))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(ce(ju(e)||isFinite(e),`note must be a pitch or midi: ${e}`),ju(e)){const s=new Tn(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}$n([Ur(0)],dd.prototype,"attack",void 0);$n([Ur(0)],dd.prototype,"release",void 0);class p_ extends he{constructor(){const e=ue(p_.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new ze({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ye(this,"pan")}static getDefaults(){return Object.assign(he.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const kF="bit-crusher",xF=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;F1(kF,xF);class nt extends he{constructor(){const e=ue(nt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Mt({context:this.context}),nt._allSolos.has(this.context)||nt._allSolos.set(this.context,new Set),nt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(he.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),nt._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){nt._soloed.has(this.context)||nt._soloed.set(this.context,new Set),nt._soloed.get(this.context).add(this)}_removeSolo(){nt._soloed.has(this.context)&&nt._soloed.get(this.context).delete(this)}_isSoloed(){return nt._soloed.has(this.context)&&nt._soloed.get(this.context).has(this)}_noSolos(){return!nt._soloed.has(this.context)||nt._soloed.has(this.context)&&nt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),nt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}nt._allSolos=new Map;nt._soloed=new Map;class m_ extends he{constructor(){const e=ue(m_.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new p_({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ko({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ye(this,["pan","volume"])}static getDefaults(){return Object.assign(he.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Qi extends he{constructor(){const e=ue(Qi.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new nt({solo:e.solo,context:this.context}),this._panVol=this.output=new m_({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ye(this,["pan","volume"])}static getDefaults(){return Object.assign(he.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Qi.buses.has(e)||Qi.buses.set(e,new Mt({context:this.context})),Qi.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new Mt({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Qi.buses=new Map;Mn().transport;Mn().destination;Mn().destination;Mn().listener;Mn().draw;const RF=Mn(),NF=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),x.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),PF=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),x.jsx("circle",{cx:"9",cy:"7",r:"4"}),x.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),x.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),bF=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),x.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),x.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),x.jsx("line",{x1:"17",y1:"11",x2:"23",y2:"11"})]}),OF=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),x.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),DF=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("line",{x1:"10",y1:"2",x2:"14",y2:"2"}),x.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),x.jsx("path",{d:"M12 2a10 10 0 1 0 10 10c0-4.42-2.68-8.22-6.34-9.66"}),x.jsx("path",{d:"M12 6a6 6 0 1 0 6 6 6 6 0 0 0-6-6z"}),x.jsx("path",{d:"M12 8v4l2 1"})]}),j1=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("polyline",{points:"3 6 5 6 21 6"}),x.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),U1=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),x.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),MF=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),x.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),x.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),VF=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),x.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),LF=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:x.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.487 5.235 3.487 8.413 0 6.557-5.338 11.892-11.894 11.892-1.99 0-3.903-.52-5.614-1.474l-6.238 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.886-.001 2.267.655 4.398 1.804 6.166l-1.225 4.429 4.554-1.204zM9.354 8.014c-.197-.299-.442-.498-.72-.498-.266 0-.533.2-.732.498-.198.299-.798 1.254-.798 2.45 0 1.198.81 2.828 1.25 3.228.439.401 1.877 2.65 4.632 3.787 2.755 1.137 2.755.768 3.248.713.493-.054 1.58-.643 1.804-1.266.225-.623.225-1.153.16-1.266-.062-.113-.224-.17-.48-.299-.256-.129-1.58-.768-1.824-.867-.244-.099-.422-.149-.599.149-.178.299-.693.867-.849 1.017-.156.149-.313.169-.48.02-.167-.149-.713-1.04-1.35-1.666-.995-1.108-1.39-1.266-1.644-1.515-.254-.249-.01-1.017.149-1.266.158-.249.349-.417.498-.567.149-.149.198-.249.298-.416.1-.167.05-.317-.025-.467-.075-.149-.693-1.665-.942-2.248z"})}),B1=({className:t})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:x.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.487 5.235 3.487 8.413 0 6.557-5.338 11.892-11.894 11.892-1.99 0-3.903-.52-5.614-1.474l-6.238 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.886-.001 2.267.655 4.398 1.804 6.166l-1.225 4.429 4.554-1.204zM9.354 8.014c-.197-.299-.442-.498-.72-.498-.266 0-.533.2-.732.498-.198.299-.798 1.254-.798 2.45 0 1.198.81 2.828 1.25 3.228.439.401 1.877 2.65 4.632 3.787 2.755 1.137 2.755.768 3.248.713.493-.054 1.58-.643 1.804-1.266.225-.623.225-1.153.16-1.266-.062-.113-.224-.17-.48-.299-.256-.129-1.58-.768-1.824-.867-.244-.099-.422-.149-.599.149-.178.299-.693.867-.849 1.017-.156.149-.313.169-.48.02-.167-.149-.713-1.04-1.35-1.666-.995-1.108-1.39-1.266-1.644-1.515-.254-.249-.01-1.017.149-1.266.158-.249.349-.417.498-.567.149-.149.198-.249.298-.416.1-.167.05-.317-.025-.467-.075-.149-.693-1.665-.942-2.248z"})}),FF=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),x.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),jF=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),x.jsx("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),x.jsx("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),x.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"22"})]}),z1=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("polyline",{points:"16 3 21 3 21 8"}),x.jsx("line",{x1:"4",y1:"20",x2:"21",y2:"3"}),x.jsx("polyline",{points:"16 16 21 16 21 21"}),x.jsx("line",{x1:"15",y1:"15",x2:"21",y2:"21"}),x.jsx("line",{x1:"4",y1:"4",x2:"9",y2:"9"})]}),UF={apiKey:"AIzaSyCCuZ2hPhw1TKwYs5gszoHelfT5c11BH9o",authDomain:"aplicativo-de-financas.firebaseapp.com",projectId:"aplicativo-de-financas",storageBucket:"aplicativo-de-financas.firebasestorage.app",messagingSenderId:"520430593915",appId:"1:520430593915:web:b8b1b8646a2f6ec7463fde",measurementId:"G-5LPVR2ZLJY"},W1=kE(UF),Ws=lb(W1),Bu=MO(W1),lh=t=>t?t.trim().split(" ").filter(e=>e).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"",BF=({db:t,userId:e})=>{const[n,r]=X.useState([]),[s,i]=X.useState(!0),[o,a]=X.useState("summary"),l="game_players";X.useEffect(()=>{if(!e)return;i(!0);const g=ti(Zn(t,l),Ml("createdAt")),y=di(g,w=>{const C=[];w.forEach(v=>{C.push({id:v.id,...v.data()})}),r(C),i(!1)},w=>{console.error("Erro ao buscar jogadores do jogo: ",w),i(!1)});return()=>y()},[t,e]);const c=g=>{const y=g.phone.replace(/\D/g,"");if(!y){console.error("Nmero de telefone invlido:",g.phone);return}const w=`Ol ${g.name.split(" ")[0]}, tudo bem?
Passando para lembrar que voc precisa fazer o pagamento do futebol!!!

Depois de fazer a transferncia, clica nesse Link https://rezaalenda.netlify.app para confirmar o seu pagamento.

Obrigado!!!`,C=`https://wa.me/${y}?text=${encodeURIComponent(w)}`;window.open(C,"_blank")},h=n.filter(g=>g.paymentStatus==="Pago"),d=n.filter(g=>g.paymentStatus==="Pendente"),p=(g,y)=>x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:y}),x.jsx("ul",{className:"space-y-3",children:g.length>0?g.map(w=>x.jsxs("li",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-lg text-gray-800",children:w.name}),w.phone&&x.jsx("p",{className:"text-sm text-gray-500",children:w.phone})]}),y==="Pendentes"&&w.phone&&x.jsx("button",{onClick:()=>c(w),className:"p-2 rounded-full bg-green-500 hover:bg-green-600 transition-colors flex-shrink-0 ml-4",children:x.jsx(B1,{className:"text-white h-5 w-5"})})]},w.id)):x.jsx("p",{className:"text-center text-gray-500 py-4",children:"Nenhum jogador nesta lista."})}),x.jsx("button",{onClick:()=>a("summary"),className:"w-full mt-6 bg-gray-200 text-gray-800 font-semibold px-6 py-3 rounded-lg shadow-sm hover:bg-gray-300 transition-colors",children:"Voltar ao Resumo"})]});return x.jsxs("div",{className:"p-4 md:p-6",children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Resumo do Jogo"}),s?x.jsx("p",{className:"text-center text-gray-500",children:"Carregando resumo..."}):o==="summary"?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-8",children:[x.jsxs("div",{className:"bg-blue-100 p-4 rounded-lg shadow-sm",children:[x.jsx("p",{className:"text-2xl font-bold text-blue-800",children:n.length}),x.jsx("p",{className:"text-sm text-blue-700",children:"Total"})]}),x.jsxs("button",{onClick:()=>a("paid"),className:"bg-green-100 p-4 rounded-lg shadow-sm hover:bg-green-200 transition-colors",children:[x.jsx("p",{className:"text-2xl font-bold text-green-800",children:h.length}),x.jsx("p",{className:"text-sm text-green-700",children:"Pagaram"})]}),x.jsxs("button",{onClick:()=>a("pending"),className:"bg-yellow-100 p-4 rounded-lg shadow-sm hover:bg-yellow-200 transition-colors",children:[x.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:d.length}),x.jsx("p",{className:"text-sm text-yellow-700",children:"Pendentes"})]})]}),x.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[x.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-3",children:"Seu ID de Administrador"}),x.jsx("p",{className:"text-md text-gray-500 mb-4",children:"Use este ID permanente nas regras de segurana do Firebase:"}),x.jsx("p",{className:"text-lg font-mono bg-gray-100 p-3 rounded-md text-gray-800 break-all",children:e||"Carregando..."})]})]}):o==="paid"?p(h,"Jogadores que Pagaram"):p(d,"Pendentes")]})},zF=({db:t,userId:e})=>{const[n,r]=X.useState([]),[s,i]=X.useState(""),[o,a]=X.useState("+44"),[l,c]=X.useState(!0),[h,d]=X.useState(null),[p,g]=X.useState(null),y="contacts";X.useEffect(()=>{if(!e)return;c(!0);const T=ti(Zn(t,y),Ml("name")),I=di(T,O=>{const N=[];O.forEach(D=>{N.push({id:D.id,...D.data()})}),r(N),c(!1)},O=>{console.error("Erro ao buscar contatos: ",O),c(!1)});return()=>I()},[t,e]);const w=async()=>{if(!(s.trim()===""||!e))try{await ZI(Zn(t,y),{name:lh(s),phone:o.trim()}),i(""),a("+44")}catch(T){console.error("Erro ao adicionar contato: ",T)}},C=async()=>{if(h)try{await Pp(In(t,y,h.id))}catch(T){console.error("Erro ao deletar contato: ",T)}finally{d(null)}},v=async(T,I,O)=>{const N=lh(I);if(N)try{const D=In(t,y,T);await So(D,{name:N,phone:O.trim()},{merge:!0})}catch(D){console.error("Erro ao atualizar contato: ",D)}finally{g(null)}};return x.jsxs("div",{className:"p-4 md:p-6",children:[h&&x.jsx(g_,{onConfirm:C,onCancel:()=>d(null),message:`Voc tem certeza que deseja apagar ${h.name}?`}),p&&x.jsx(JF,{player:p,onSave:v,onCancel:()=>g(null)}),x.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Cadastros"}),x.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-8",children:[x.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Cadastro Individual"}),x.jsxs("div",{className:"space-y-3",children:[x.jsx("input",{type:"text",value:s,onChange:T=>i(T.target.value),placeholder:"Nome completo do jogador",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),x.jsx("input",{type:"tel",value:o,onChange:T=>a(T.target.value),placeholder:"Telefone com cdigo do pas",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),x.jsx("button",{onClick:w,className:"bg-green-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md hover:bg-green-700 transition-colors duration-300 w-full mt-3",children:"Cadastrar Jogador"})]}),l?x.jsx("p",{className:"text-gray-500 text-center",children:"Carregando jogadores..."}):x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:"Jogadores Cadastrados"}),x.jsx("ul",{className:"space-y-3",children:n.length>0?n.map(T=>x.jsxs("li",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-lg text-gray-800",children:T.name}),x.jsx("p",{className:"text-sm text-gray-500",children:T.phone})]}),x.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-4",children:[x.jsx("button",{onClick:()=>g(T),className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white transition-colors",children:x.jsx(U1,{})}),x.jsx("button",{onClick:()=>d(T),className:"p-2 rounded-full bg-red-500 hover:bg-red-600 text-white transition-colors",children:x.jsx(j1,{})})]})]},T.id)):x.jsx("p",{className:"text-center text-gray-500 py-4",children:"Nenhum jogador cadastrado."})})]})]})},WF=({db:t,userId:e})=>{const[n,r]=X.useState([]),[s,i]=X.useState(""),[o,a]=X.useState(!0),[l,c]=X.useState(!1),[h,d]=X.useState(null),p="game_players",g="contacts";X.useEffect(()=>{if(!e)return;a(!0);const I=ti(Zn(t,p),Ml("createdAt")),O=di(I,N=>{const D=[];N.forEach(E=>{D.push({id:E.id,...E.data()})}),r(D),a(!1)},N=>{console.error("Erro ao buscar jogadores: ",N),a(!1)});return()=>O()},[t,e]);const y=async I=>{const O=lh(I);if(!O)return;const N=await hf(ti(Zn(t,g),g0("name","==",O)));let D={phone:""};N.empty||(D=N.docs[0].data()),await ZI(Zn(t,p),{name:O,phone:D.phone,paymentStatus:"Pendente",createdAt:new Date})},w=async()=>{if(s.trim()===""||!e)return;const I=s.split(`
`).filter(O=>O.trim()!=="");if(I.length!==0){for(const O of I){const N=O.replace(/[\d.\-]/g,"").trim();await y(N)}i("")}},C=async I=>{try{await Pp(In(t,p,I))}catch(O){console.error("Erro ao deletar jogador: ",O)}},v=async()=>{const I=await hf(Zn(t,p)),O=Eb(t);I.forEach(D=>O.delete(D.ref)),await O.commit();const N=In(t,"divided_teams/current_division");await Pp(N).catch(D=>console.log("Nenhuma diviso de times para limpar.")),c(!1)},T=async(I,O)=>{const N=lh(O);if(N)try{const D=ti(Zn(t,g),g0("name","==",N)),E=await hf(D);let _="";E.empty||(_=E.docs[0].data().phone||"");const S=In(t,p,I);await So(S,{name:N,phone:_},{merge:!0})}catch(D){console.error("Erro ao atualizar jogador: ",D)}finally{d(null)}};return x.jsxs("div",{className:"p-4 md:p-6",children:[l&&x.jsx(qF,{onConfirm:v,onCancel:()=>c(!1)}),h&&x.jsx(XF,{player:h,onSave:T,onCancel:()=>d(null)}),x.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Jogadores da Partida"}),x.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-8",children:[x.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Adicionar Jogadores"}),x.jsx("textarea",{value:s,onChange:I=>i(I.target.value),placeholder:"Cole a lista de nomes aqui.",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none min-h-[100px]"}),x.jsx("button",{onClick:w,className:"bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-300 w-full mt-2",children:"Adicionar da Lista"})]}),o?x.jsx("p",{className:"text-gray-500 text-center",children:"Carregando lista..."}):x.jsxs(x.Fragment,{children:[x.jsx("ul",{className:"space-y-3",children:n.length>0?n.map(I=>x.jsxs("li",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-lg text-gray-800",children:I.name}),I.phone&&x.jsx("p",{className:"text-sm text-gray-500",children:I.phone})]}),x.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-4",children:[x.jsx("button",{onClick:()=>d(I),className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white transition-colors",children:x.jsx(U1,{})}),x.jsx("button",{onClick:()=>C(I.id),className:"p-2 rounded-full bg-red-500 hover:bg-red-600 text-white transition-colors",children:x.jsx(j1,{})})]})]},I.id)):x.jsx("p",{className:"text-center text-gray-500 py-4",children:"Nenhum jogador na lista da partida."})}),n.length>0&&x.jsx("button",{onClick:()=>c(!0),className:"w-full mt-6 bg-red-500 text-white font-semibold px-6 py-3 rounded-lg shadow-md hover:bg-red-600 transition-colors",children:"Apagar Todos"})]})]})},ow=({db:t,userId:e})=>{const[n,r]=X.useState([]),[s,i]=X.useState(!0),[o,a]=X.useState(null),l="game_players";X.useEffect(()=>{i(!0);const p=ti(Zn(t,l),Ml("createdAt")),g=di(p,y=>{const w=[];y.forEach(C=>{w.push({id:C.id,...C.data()})}),r(w),i(!1)},y=>{console.error("Erro ao buscar lista de pagamentos:",y),i(!1)});return()=>g()},[t]);const c=p=>{a(p)},h=async()=>{if(!o||o.paymentStatus==="Pago"){a(null);return}try{const p=In(t,l,o.id);await So(p,{paymentStatus:"Pago"},{merge:!0})}catch(p){console.error("Erro ao atualizar pagamento: ",p)}finally{a(null)}},d=async()=>{if(o){if(o.paymentStatus==="Pago")try{const p=In(t,l,o.id);await So(p,{paymentStatus:"Pendente"},{merge:!0})}catch(p){console.error("Erro ao reverter pagamento: ",p)}a(null)}};return x.jsxs("div",{className:"p-4 md:p-6",children:[o&&x.jsx(g_,{onConfirm:h,onCancel:d,message:"Voc confirma que j fez a transferncia ou o pagamento em Cash?"}),x.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"Confirmao de Pagamento"}),s?x.jsx("p",{className:"text-gray-500 text-center",children:"Carregando lista..."}):x.jsx("ul",{className:"space-y-2",children:n.length>0?n.map(p=>x.jsxs("li",{className:"flex items-center justify-between bg-white p-3 rounded-lg shadow-sm border border-gray-200",children:[x.jsx("p",{className:"text-lg text-gray-800",children:p.name}),x.jsx("button",{onClick:()=>c(p),className:`px-4 py-2 text-sm font-semibold rounded-full text-white flex-shrink-0 ml-4 ${p.paymentStatus==="Pago"?"bg-green-500":"bg-yellow-500"}`,children:p.paymentStatus})]},p.id)):x.jsx("p",{className:"text-center text-gray-500 py-4",children:"Nenhum jogador na lista da partida."})})]})},g_=({onConfirm:t,onCancel:e,message:n})=>{const r=X.useRef(null);return X.useEffect(()=>{const s=i=>{r.current&&!r.current.contains(i.target)&&e()};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[e]),x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-40",children:x.jsxs("div",{ref:r,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm text-center",children:[x.jsx("p",{className:"text-lg text-gray-800 mb-6",children:n}),x.jsxs("div",{className:"flex justify-center gap-4",children:[x.jsx("button",{onClick:e,className:"px-8 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 font-semibold",children:"NO"}),x.jsx("button",{onClick:t,className:"px-8 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-semibold",children:"SIM"})]})]})})},qF=({onConfirm:t,onCancel:e})=>x.jsx(g_,{onConfirm:t,onCancel:e,message:"Voc tem certeza que deseja apagar todos os jogadores da partida?"}),$F=({db:t,userId:e})=>{const[n,r]=X.useState(!1),[s,i]=X.useState({date:"24.07.25",time:"20:00 s 21:30",location:"Harris Lowe Academy",fieldValue:"135.35",individualValue:"6,45"}),o="app_details",a="paymentInfo";X.useEffect(()=>{if(!e)return;const d=In(t,o,a),p=di(d,g=>{g.exists()?i(g.data()):console.log("Documento de detalhes de pagamento no encontrado, usando valores padro.")},g=>console.error("Erro ao buscar detalhes de pagamento:",g));return()=>p()},[t,e]);const l=async d=>{try{const p=In(t,o,a);await So(p,d,{merge:!0}),i(d),r(!1)}catch(p){console.error("Erro ao salvar informaes: ",p)}},c=()=>`Lista de Pagamento

Data: ${s.date}
Horrio: ${s.time}
Local: ${s.location}
Valor Campo: ${s.fieldValue}

Detalhes de Pagamento

 ${s.individualValue}

Sort Cod: 20-26-82
Account : 23638502
Paulo Simoes de Souza

Clica no Link para confirmar o seu pagamento.

https://rezaalenda.netlify.app

Obrigado!!!`,h=()=>{const d=c(),p=`https://wa.me/?text=${encodeURIComponent(d)}`;window.open(p,"_blank")};return x.jsxs("div",{className:"p-4 md:p-6",children:[n&&x.jsx(HF,{currentInfo:s,onSave:l,onClose:()=>r(!1)}),x.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"Compartilhar Pagamento"}),x.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Pr-visualizao da Mensagem"}),x.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-700 bg-gray-50 p-4 rounded-md",children:c()})]}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[x.jsx("button",{onClick:()=>r(!0),className:"w-full bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors",children:"Editar Informaes"}),x.jsxs("button",{onClick:h,className:"w-full bg-green-500 text-white font-semibold px-6 py-3 rounded-lg shadow-md hover:bg-green-600 transition-colors flex items-center justify-center gap-2",children:[x.jsx(B1,{className:"text-white h-6 w-6"})," Enviar para WhatsApp"]})]})]})},HF=({currentInfo:t,onSave:e,onClose:n})=>{const[r,s]=X.useState(t),i=X.useRef(null);X.useEffect(()=>{const l=c=>{i.current&&!i.current.contains(c.target)&&n()};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[n]);const o=l=>{const{name:c,value:h}=l.target;s(d=>({...d,[c]:h}))},a=l=>{l.preventDefault(),e(r)};return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-30",children:x.jsxs("div",{ref:i,className:"bg-white rounded-lg shadow-xl w-full max-w-md flex flex-col max-h-[90vh]",children:[x.jsx("div",{className:"flex-shrink-0 p-6 pb-4 border-b",children:x.jsx("h3",{className:"text-xl font-bold",children:"Editar Informaes"})}),x.jsx("form",{id:"edit-payment-form",onSubmit:a,className:"flex-grow overflow-y-auto p-6",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data"}),x.jsx("input",{type:"text",name:"date",value:r.date,onChange:o,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Horrio"}),x.jsx("input",{type:"text",name:"time",value:r.time,onChange:o,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Local"}),x.jsx("input",{type:"text",name:"location",value:r.location,onChange:o,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Campo ()"}),x.jsx("input",{type:"text",name:"fieldValue",value:r.fieldValue,onChange:o,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Individual ()"}),x.jsx("input",{type:"text",name:"individualValue",value:r.individualValue,onChange:o,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"})]})]})}),x.jsxs("div",{className:"flex-shrink-0 p-6 pt-4 flex justify-end gap-4 border-t",children:[x.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),x.jsx("button",{type:"submit",form:"edit-payment-form",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Salvar"})]})]})})},GF=()=>{const[t,e]=X.useState(10),[n,r]=X.useState(t*60),[s,i]=X.useState(!1),o=X.useRef(null),a=X.useRef(null);X.useEffect(()=>{a.current=new wl().toDestination()},[]),X.useEffect(()=>(s&&n>0?o.current=setInterval(()=>{r(w=>w-1)},1e3):n===0&&s&&(clearInterval(o.current),i(!1),RF.state!=="running"&&aF(),a.current.triggerAttackRelease("C4","0.5"),setTimeout(()=>a.current.triggerAttackRelease("G4","0.5"),500)),()=>clearInterval(o.current)),[s,n]);const l=w=>{s||(e(w),r(w*60))},c=w=>{if(s)return;const C=t+w;C<1||(e(C),r(C*60))},h=()=>{n>0&&i(!0)},d=()=>{i(!1),clearInterval(o.current)},p=()=>{i(!1),clearInterval(o.current),r(t*60)},g=w=>{const C=Math.floor(w/60),v=w%60;return`${C.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`},y=n/(t*60)*100;return x.jsxs("div",{className:"p-4 md:p-6 flex flex-col items-center",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-8 text-center",children:"Cronmetro"}),x.jsxs("div",{className:"flex items-center justify-center w-full max-w-sm mb-8",children:[x.jsx("button",{onClick:()=>c(-1),disabled:s||t<=1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50 text-2xl font-bold w-12 h-12 flex items-center justify-center",children:"-"}),x.jsxs("div",{className:"relative w-48 h-48 sm:w-56 sm:h-56 flex items-center justify-center mx-4",children:[x.jsxs("svg",{className:"absolute w-full h-full transform -rotate-90",viewBox:"0 0 120 120",children:[x.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#e6e6e6",strokeWidth:"12"}),x.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#3b82f6",strokeWidth:"12",strokeDasharray:"339.292",strokeDashoffset:339.292-y/100*339.292,className:"transition-all duration-1000"})]}),x.jsx("span",{className:"text-4xl sm:text-5xl font-mono text-gray-800 z-10",children:g(n)})]}),x.jsx("button",{onClick:()=>c(1),disabled:s,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50 text-2xl font-bold w-12 h-12 flex items-center justify-center",children:"+"})]}),x.jsxs("div",{className:"mb-8 w-full max-w-sm",children:[x.jsx("p",{className:"text-center text-sm font-medium text-gray-700 mb-3",children:"Selecionar Durao"}),x.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,5,7,10].map(w=>x.jsxs("button",{onClick:()=>l(w),disabled:s,className:`py-2 px-4 rounded-lg font-semibold transition-colors ${t===w?"bg-blue-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[w," min"]},w))})]}),x.jsxs("div",{className:"flex space-x-4",children:[x.jsx("button",{onClick:h,disabled:s,className:"bg-green-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-green-600 disabled:bg-gray-400 transition-colors",children:"Iniciar"}),x.jsx("button",{onClick:d,disabled:!s,className:"bg-red-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-red-600 disabled:bg-gray-400 transition-colors",children:"Parar"}),x.jsx("button",{onClick:p,className:"bg-gray-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-gray-600 transition-colors",children:"Resetar"})]})]})},KF=({db:t,userId:e})=>{const[n,r]=X.useState([]),[s,i]=X.useState({red:[],yellow:[],green:[]}),[o,a]=X.useState(!0),[l,c]=X.useState(!1),[h,d]=X.useState(!1),p="game_players",g="divided_teams/current_division";X.useEffect(()=>{a(!0);const v=ti(Zn(t,p),Ml("createdAt")),T=di(v,O=>{const N=[];O.forEach(D=>{N.push({id:D.id,...D.data()})}),r(N),a(!1)},O=>{console.error("Erro ao buscar jogadores do jogo: ",O),a(!1)}),I=di(In(t,g),O=>{O.exists()?(i(O.data()),c(!0)):(i({red:[],yellow:[],green:[]}),c(!1))});return()=>{T(),I()}},[t]);const y=async()=>{const v=[...n].sort(()=>Math.random()-.5),T={red:[],yellow:[],green:[]};v.forEach((I,O)=>{O%3===0?T.red.push(I):O%3===1?T.yellow.push(I):T.green.push(I)});try{await So(In(t,g),T),c(!0),d(!1)}catch(I){console.error("Erro ao salvar diviso de times: ",I)}},w=()=>{l?d(!0):y()},C=({title:v,players:T,color:I})=>x.jsxs("div",{className:`rounded-lg p-4 ${I}`,children:[x.jsx("h3",{className:"text-xl font-bold text-white text-center mb-3",children:v}),x.jsx("ul",{className:"space-y-2",children:T.map(O=>x.jsx("li",{className:"bg-white/90 text-gray-800 p-2 rounded-md text-center font-medium",children:O.name},O.id))})]});return x.jsxs("div",{className:"p-4 md:p-6",children:[h&&x.jsx(ZF,{onConfirm:y,onCancel:()=>d(!1)}),x.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Diviso de Times"}),x.jsx("div",{className:"mb-6",children:x.jsxs("button",{onClick:w,disabled:n.length===0,className:"w-full bg-indigo-600 text-white font-semibold px-6 py-4 rounded-lg shadow-md hover:bg-indigo-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[x.jsx(z1,{})," ",l?"Dividir Novamente":"Dividir Times"]})}),o?x.jsx("p",{className:"text-center text-gray-500",children:"Carregando jogadores da partida..."}):x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsx(C,{title:"Time Vermelho",players:s.red,color:"bg-red-500"}),x.jsx(C,{title:"Time Amarelo",players:s.yellow,color:"bg-yellow-500"}),x.jsx(C,{title:"Time Verde",players:s.green,color:"bg-green-500"})]})]})};function QF(){const[t,e]=X.useState("Pagamentos"),[n,r]=X.useState(null),[s,i]=X.useState(!1),[o,a]=X.useState(!1),[l,c]=X.useState(!1),h=n&&!n.isAnonymous,d=n?n.uid:null;X.useEffect(()=>{const C=I2(Bu,v=>{v?r(v):m2(Bu).catch(T=>console.error("Erro no login annimo:",T)),i(!0)});return()=>C()},[]);const p=async(C,v)=>{try{return await w2(Bu,C,v),c(!1),e("Home"),{success:!0}}catch(T){return console.error("Erro de login:",T),{success:!1,message:"E-mail ou senha invlidos."}}},g=()=>{S2(Bu).then(()=>{r(null),e("Pagamentos")}).catch(C=>console.error("Erro no logout:",C))},y=()=>{if(!s)return x.jsx("div",{className:"flex justify-center items-center h-full",children:x.jsx("p",{children:"Autenticando..."})});if(h){if(t==="Home")return x.jsx(BF,{db:Ws,userId:d});if(t==="Cadastros")return x.jsx(zF,{db:Ws,userId:d});if(t==="Jogadores")return x.jsx(WF,{db:Ws,userId:d});if(t==="Compartilhar Pagamento")return x.jsx($F,{db:Ws,userId:d})}return t==="Pagamentos"?x.jsx(ow,{db:Ws,userId:d}):t==="Diviso de Times"?x.jsx(KF,{db:Ws,userId:d}):t==="Cronmetro"?x.jsx(GF,{}):x.jsx(ow,{db:Ws,userId:d})},w=({tabName:C,icon:v})=>x.jsxs("button",{onClick:()=>{e(C),a(!1)},className:`flex items-center w-full text-left p-4 text-lg transition-colors duration-200 ${t===C?"bg-blue-100 text-blue-700 font-semibold":"text-gray-600 hover:bg-gray-100"}`,children:[x.jsx("span",{className:"mr-4",children:v}),C]});return x.jsxs("div",{className:"h-screen w-full bg-gray-100 flex flex-col font-sans",children:[l&&x.jsx(YF,{onLogin:p,onClose:()=>c(!1)}),o&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20",onClick:()=>a(!1)}),x.jsxs("aside",{className:`fixed top-0 left-0 h-full w-72 bg-white shadow-xl z-30 transform transition-transform duration-300 ease-in-out ${o?"translate-x-0":"-translate-x-full"}`,children:[x.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[x.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Menu"}),x.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-800",children:x.jsx(VF,{})})]}),x.jsxs("nav",{className:"mt-4",children:[h&&x.jsx(w,{tabName:"Home",icon:x.jsx(NF,{})}),h&&x.jsx(w,{tabName:"Cadastros",icon:x.jsx(bF,{})}),h&&x.jsx(w,{tabName:"Jogadores",icon:x.jsx(PF,{})}),x.jsx(w,{tabName:"Pagamentos",icon:x.jsx(OF,{})}),x.jsx(w,{tabName:"Diviso de Times",icon:x.jsx(z1,{})}),h&&x.jsx(w,{tabName:"Compartilhar Pagamento",icon:x.jsx(LF,{})}),x.jsx(w,{tabName:"Cronmetro",icon:x.jsx(DF,{})})]})]}),x.jsx("header",{className:"bg-white shadow-md sticky top-0 z-10",children:x.jsxs("div",{className:"flex items-center justify-between p-4 h-16",children:[x.jsx("button",{onClick:()=>a(!0),className:"p-2 text-gray-600 hover:text-blue-600",children:x.jsx(MF,{})}),x.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 absolute left-1/2 -translate-x-1/2",children:"Reza a lenda FC"}),x.jsx("div",{className:"w-24 text-right",children:h?x.jsx("button",{onClick:g,className:"font-semibold text-sm text-red-600 bg-red-100 px-3 py-2 rounded-lg",children:"Logout"}):x.jsx("button",{onClick:()=>c(!0),className:"font-semibold text-sm text-blue-600 bg-blue-100 px-3 py-2 rounded-lg",children:"Login"})})]})}),x.jsx("main",{className:"flex-grow overflow-y-auto pb-24",children:y()})]})}const YF=({onLogin:t,onClose:e})=>{const[n,r]=X.useState(""),[s,i]=X.useState(""),[o,a]=X.useState(!1),[l,c]=X.useState(""),h=X.useRef(null),d=async p=>{p.preventDefault(),c("");const g=await t(n,s);g.success||c(g.message||"Ocorreu um erro.")};return X.useEffect(()=>{const p=g=>{h.current&&!h.current.contains(g.target)&&e()};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[e]),x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-40",children:x.jsxs("div",{ref:h,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm",children:[x.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Login de Administrador"}),x.jsxs("form",{onSubmit:d,children:[x.jsxs("div",{className:"space-y-4",children:[x.jsx("input",{type:"email",value:n,onChange:p=>r(p.target.value),placeholder:"E-mail",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:o?"text":"password",value:s,onChange:p=>i(p.target.value),placeholder:"Senha",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),x.jsx("button",{type:"button",onClick:()=>a(!o),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500",children:o?x.jsx(jF,{}):x.jsx(FF,{})})]})]}),l&&x.jsx("p",{className:"text-red-500 text-sm text-center mt-3",children:l}),x.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[x.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),x.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Entrar"})]})]})]})})},XF=({player:t,onSave:e,onCancel:n})=>{const[r,s]=X.useState(t.name),i=X.useRef(null);X.useEffect(()=>{const a=l=>{i.current&&!i.current.contains(l.target)&&n()};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[n]);const o=()=>{r.trim()&&e(t.id,r)};return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-40",children:x.jsxs("div",{ref:i,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm",children:[x.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Editar Jogador"}),x.jsx("div",{className:"space-y-4",children:x.jsx("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"Nome do jogador",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),x.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[x.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),x.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Salvar"})]})]})})},JF=({player:t,onSave:e,onCancel:n})=>{const[r,s]=X.useState(t.name),[i,o]=X.useState(t.phone),a=X.useRef(null);X.useEffect(()=>{const c=h=>{a.current&&!a.current.contains(h.target)&&n()};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[n]);const l=()=>{r.trim()&&e(t.id,r,i)};return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-40",children:x.jsxs("div",{ref:a,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm",children:[x.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Editar Contato"}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("input",{type:"text",value:r,onChange:c=>s(c.target.value),placeholder:"Nome do jogador",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),x.jsx("input",{type:"tel",value:i,onChange:c=>o(c.target.value),placeholder:"Telefone",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),x.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[x.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),x.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Salvar"})]})]})})},ZF=({onConfirm:t,onCancel:e})=>{const n=X.useRef(null);return X.useEffect(()=>{const r=s=>{n.current&&!n.current.contains(s.target)&&e()};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[e]),x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-40",children:x.jsxs("div",{ref:n,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm text-center",children:[x.jsx("p",{className:"text-lg text-gray-800 mb-6",children:"Uma diviso j foi feita."}),x.jsxs("div",{className:"flex justify-center gap-4",children:[x.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 font-semibold",children:"Voltar"}),x.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-semibold",children:"Gerar Nova Diviso"})]})]})})};gf.createRoot(document.getElementById("root")).render(x.jsx(bC.StrictMode,{children:x.jsx(QF,{})}));
